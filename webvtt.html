<!doctype html><html lang="en">
 <head>
  <meta charset="utf-8">
  <title>WebVTT: The Web Video Text Tracks Format</title>
  <link href="https://www.whatwg.org/style/specification" rel="stylesheet">
  <link href="https://resources.whatwg.org/bikeshed.css" rel="stylesheet">
  <link href="https://resources.whatwg.org/logo.svg" rel="icon">
  <meta content="Bikeshed 1.0.0" name="generator">
<style>
 .head .editor { display:block }
</style>
 </head>
 <body class="h-entry status-LS">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://whatwg.org/"> <img alt="WHATWG" height="100" src="https://resources.whatwg.org/logo.svg"> </a> </p>
   <h1 class="p-name no-ref" id="title">WebVTT: The Web Video Text Tracks Format</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Living Standard — Last Updated <time class="dt-updated" datetime="2015-09-24">24 September 2015</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>Test Suite:
     <dd><a href="https://github.com/w3c/web-platform-tests/tree/master/webvtt">https://github.com/w3c/web-platform-tests/tree/master/webvtt</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:silviapfeiffer1@gmail.com">Silvia Pfeiffer</a> (<a class="p-org org" href="http://nicta.com.au/">NICTA</a>)
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:simonp@opera.com">Simon Pieters</a> (<a class="p-org org" href="http://www.opera.com/">Opera Software ASA</a>)
     <dt>Former Editors:
     <dd>
      <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:philipj@opera.com">Philip Jägenstedt</a> (<a class="p-org org" href="http://www.opera.com/">Opera Software ASA</a>)
     <dd>
      <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:ian@hixie.ch">Ian Hickson</a> (<a class="p-org org" href="http://www.google.com/">Google</a>)
     <dt>Participate:
     <dd><span><a href="https://github.com/whatwg/webvtt">GitHub whatwg/webvtt</a> (<a href="https://github.com/whatwg/webvtt/issues/new">new issue</a>, <a href="https://github.com/whatwg/webvtt/issues">open issues</a>, <a href="https://www.w3.org/Bugs/Public/buglist.cgi?product=TextTracks%20CG&amp;component=WebVTT&amp;resolution=---">legacy open bugs</a>)</span>
     <dd><span><a href="https://wiki.whatwg.org/wiki/IRC">IRC: #whatwg on Freenode</a></span>
     <dt>Commits:
     <dd><span><a href="https://github.com/whatwg/webvtt/commits">GitHub whatwg/webvtt/commits</a></span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
  <div class="p-summary" data-fill-with="abstract">
   <p>This specification defines WebVTT, the Web Video Text Tracks format. Its main use is for marking up external text track resources in connection with the HTML &lt;track> element.

WebVTT files provide captions or subtitles for video content, and also text video descriptions [MAUR], chapters for content navigation, and more generally any form of metadata that is time-aligned with audio or video content.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="contents"><span class="content">Table of Contents</span></h2>
  <div data-fill-with="table-of-contents" role="navigation">
   <ul class="toc" role="directory">
    <li>
     <a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ul class="toc">
      <li><a href="#cues-with-multiple-lines"><span class="secno">1.1</span> <span class="content">Cues with multiple lines</span></a>
      <li><a href="#comments"><span class="secno">1.2</span> <span class="content">Comments</span></a>
      <li><a href="#other-features"><span class="secno">1.3</span> <span class="content">Other features</span></a>
     </ul>
    <li>
     <a href="#conformance"><span class="secno">2</span> <span class="content">Conformance</span></a>
     <ul class="toc">
      <li><a href="#conformance-for-authors"><span class="secno">2.1</span> <span class="content">Conformance for authors</span></a>
      <li><a href="#unicode-normalization"><span class="secno">2.2</span> <span class="content">Unicode normalization</span></a>
      <li><a href="#document-conformance"><span class="secno">2.3</span> <span class="content">Document conformance</span></a>
      <li><a href="#dependencies0"><span class="secno">2.4</span> <span class="content">Dependencies</span></a>
     </ul>
    <li>
     <a href="#data-model"><span class="secno">3</span> <span class="content">Data model</span></a>
     <ul class="toc">
      <li><a href="#webvtt-cues"><span class="secno">3.1</span> <span class="content">WebVTT cues</span></a>
      <li><a href="#webvtt-regions"><span class="secno">3.2</span> <span class="content">WebVTT regions</span></a>
     </ul>
    <li>
     <a href="#syntax"><span class="secno">4</span> <span class="content">Syntax</span></a>
     <ul class="toc">
      <li><a href="#webvtt-file-structure"><span class="secno">4.1</span> <span class="content">WebVTT file structure</span></a>
      <li>
       <a href="#types-of-webvtt-cue-payload"><span class="secno">4.2</span> <span class="content">Types of WebVTT cue payload</span></a>
       <ul class="toc">
        <li><a href="#webvtt-metadata-text"><span class="secno">4.2.1</span> <span class="content">WebVTT metadata text</span></a>
        <li><a href="#webvtt-cue-text"><span class="secno">4.2.2</span> <span class="content">WebVTT cue text</span></a>
       </ul>
      <li><a href="#webvtt-region-definition"><span class="secno">4.3</span> <span class="content">WebVTT region definition</span></a>
      <li><a href="#webvtt-cue-settings"><span class="secno">4.4</span> <span class="content">WebVTT cue settings</span></a>
      <li>
       <a href="#properties-of-cue-sequences"><span class="secno">4.5</span> <span class="content">Properties of cue sequences</span></a>
       <ul class="toc">
        <li><a href="#webvtt-file-using-only-nested-cues"><span class="secno">4.5.1</span> <span class="content">WebVTT file using only nested cues</span></a>
       </ul>
      <li>
       <a href="#types-of-webvtt-files"><span class="secno">4.6</span> <span class="content">Types of WebVTT files</span></a>
       <ul class="toc">
        <li><a href="#webvtt-file-using-metadata-content"><span class="secno">4.6.1</span> <span class="content">WebVTT file using metadata content</span></a>
        <li><a href="#webvtt-file-using-chapter-title-text"><span class="secno">4.6.2</span> <span class="content">WebVTT file using chapter title text</span></a>
        <li><a href="#webvtt-file-using-cue-text"><span class="secno">4.6.3</span> <span class="content">WebVTT file using cue text</span></a>
       </ul>
     </ul>
    <li>
     <a href="#parsing"><span class="secno">5</span> <span class="content">Parsing</span></a>
     <ul class="toc">
      <li><a href="#webvtt-file-parsing"><span class="secno">5.1</span> <span class="content">WebVTT file parsing</span></a>
      <li><a href="#webvtt-region-settings-parsing"><span class="secno">5.2</span> <span class="content">WebVTT region settings parsing</span></a>
      <li><a href="#webvtt-cue-timings-and-settings-parsing"><span class="secno">5.3</span> <span class="content">WebVTT cue timings and settings parsing</span></a>
      <li><a href="#webvtt-cue-text-parsing-rules"><span class="secno">5.4</span> <span class="content"><span>WebVTT cue text parsing rules</span></span></a>
      <li><a href="#webvtt-cue-text-dom-construction-rules"><span class="secno">5.5</span> <span class="content"><span>WebVTT cue text DOM construction rules</span></span></a>
      <li><a href="#webvtt-rules-for-extracting-the-chapter-title"><span class="secno">5.6</span> <span class="content">WebVTT rules for extracting the chapter title</span></a>
     </ul>
    <li>
     <a href="#rendering"><span class="secno">6</span> <span class="content">Rendering</span></a>
     <ul class="toc">
      <li>
       <a href="#processing-model"><span class="secno">6.1</span> <span class="content">Processing model</span></a>
       <ul class="toc">
        <li><a href="#applying-css-properties-to-webvtt-node-objects"><span class="secno">6.1.1</span> <span class="content">Applying CSS properties to <span>WebVTT Node Objects</span></span></a>
        <li>
         <a href="#css-extensions"><span class="secno">6.1.2</span> <span class="content">CSS extensions</span></a>
         <ul class="toc">
          <li><a href="#the-cue-pseudo-element"><span class="secno">6.1.2.1</span> <span class="content">The <span class="css">::cue</span> pseudo-element</span></a>
          <li><a href="#the-past-and-future-pseudo-classes"><span class="secno">6.1.2.2</span> <span class="content">The <span class="css">:past</span> and <span class="css">:future</span> pseudo-classes</span></a>
         </ul>
       </ul>
      <li><a href="#the-cue-region-pseudo-element"><span class="secno">6.2</span> <span class="content">The <span class="css">::cue-region</span> pseudo-element</span></a>
     </ul>
    <li>
     <a href="#api"><span class="secno">7</span> <span class="content">API</span></a>
     <ul class="toc">
      <li><a href="#the-vttcue-interface"><span class="secno">7.1</span> <span class="content">The <code class="idl"><span>VTTCue</span></code> interface</span></a>
      <li><a href="#the-vttregion-interface"><span class="secno">7.2</span> <span class="content">The <code class="idl"><span>VTTRegion</span></code> interface</span></a>
     </ul>
    <li>
     <a href="#iana"><span class="secno">8</span> <span class="content">IANA considerations</span></a>
     <ul class="toc">
      <li><a href="#text-vtt"><span class="secno">8.1</span> <span class="content"><span><code>text/vtt</code></span></span></a>
     </ul>
    <li><a href="#acknowledgements"><span class="secno"></span> <span class="content">Acknowledgements</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ul class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ul>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ul class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ul>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ul>
  </div>
  <main>
<script async="" src="https://resources.whatwg.org/file-issue.js"></script>
   <section id="sotd">
    <p>Work on this specification is being undertaken both in the <a href="http://www.w3.org/community/texttracks/">Web Media Text Tracks Community Group</a> as well
   as in the <a href="http://www.w3.org/AudioVideo/TT/">W3C Timed Text Working Group</a>. The latter
   group works towards a W3C Recommendation for reference purposes with interoperability
   requirements, while the former is a Draft Community Group Report that continues to evolve.</p>
   </section>
   <section>
    <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
    <p><i>This section is non-normative.</i></p>
    <p>The <dfn data-dfn-type="dfn" data-noexport="" id="webvtt">WebVTT<a class="self-link" href="#webvtt"></a></dfn> (Web Video Text Tracks) format is intended for marking up external text
   track resources.</p>
    <p>The main use for WebVTT files is captioning or subtitling video content. Here is a sample file
   that captions an interview:</p>
<pre>WEBVTT
00:11.000 --> 00:13.000
&lt;v Roger Bingham>We are in New York City

00:13.000 --> 00:16.000
&lt;v Roger Bingham>We’re actually at the Lucern Hotel, just down the street

00:16.000 --> 00:18.000
&lt;v Roger Bingham>from the American Museum of Natural History

00:18.000 --> 00:20.000
&lt;v Roger Bingham>And with me is Neil deGrasse Tyson

00:20.000 --> 00:22.000
&lt;v Roger Bingham>Astrophysicist, Director of the Hayden Planetarium

00:22.000 --> 00:24.000
&lt;v Roger Bingham>at the AMNH.

00:24.000 --> 00:26.000
&lt;v Roger Bingham>Thank you for walking down here.

00:27.000 --> 00:30.000
&lt;v Roger Bingham>And I want to do a follow-up on the last conversation we did.

00:30.000 --> 00:31.500 align:end size:50%
&lt;v Roger Bingham>When we e-mailed—

00:30.500 --> 00:32.500 align:start size:50%
&lt;v Neil deGrasse Tyson>Didn’t we talk about enough in that conversation?

00:32.000 --> 00:35.500 align:end size:50%
&lt;v Roger Bingham>No! No no no no; 'cos 'cos obviously 'cos

00:32.500 --> 00:33.500 align:start size:50%
&lt;v Neil deGrasse Tyson>&lt;i>Laughs&lt;/i>

00:35.500 --> 00:38.000
&lt;v Roger Bingham>You know I’m so excited my glasses are falling off here.</pre>
    <section>
     <h3 class="heading settled" data-level="1.1" id="cues-with-multiple-lines"><span class="secno">1.1. </span><span class="content">Cues with multiple lines</span><a class="self-link" href="#cues-with-multiple-lines"></a></h3>
     <p><i>This section is non-normative.</i></p>
     <p>Line breaks in cues are honored. User agents will also insert extra line breaks if necessary
    to fit the cue in the cue’s width. In general, therefore, authors are encouraged to write cues
    all on one line except when a line break is definitely necessary.</p>
     <div class="example" id="example-dde10b1d">
      <a class="self-link" href="#example-dde10b1d"></a> 
      <p>These captions on a public service announcement video demonstrate line breaking:</p>
<pre>WEBVTT
00:01.000 --> 00:04.000
Never drink liquid nitrogen.

00:05.000 --> 00:09.000
— It will perforate your stomach.
— You could die.

00:10.000 --> 00:14.000
The Organisation for Sample Public Service Announcements accepts no liability for the content of this advertisement, or for the consequences of any actions taken on the basis of the information provided.</pre>
      <p>The first cue is simple, it will probably just display on one line. The second will take two
     lines, one for each speaker. The third will wrap to fit the width of the video, possibly taking
     multiple lines. For example, the three cues could look like this:</p>
<pre>           Never drink liquid nitrogen.
    — It will perforate your stomach.
            — You could die.

The Organisation for Sample Public Service
Announcements accepts no liability for the
content of this advertisement, or for the
 consequences of any actions taken on the
    basis of the information provided.</pre>
      <p>If the width of the cues is smaller, the first two cues could wrap as well, as in the
     following example. Note how the second cue’s explicit line break is still honored, however:</p>
<pre>       Never drink  liquid nitrogen.

— It will perforate
    your stomach.
  — You could die.

The Organisation for
Sample Public Service
Announcements accepts
no liability for the
   content of this
advertisement, or for
 the consequences of
any actions taken on
  the basis of the
information provided.</pre>
      <p>Also notice how the wrapping is done so as to keep the line lengths balanced.</p>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="1.2" id="comments"><span class="secno">1.2. </span><span class="content">Comments</span><a class="self-link" href="#comments"></a></h3>
     <p><i>This section is non-normative.</i></p>
     <p>Comments can be included in WebVTT files.</p>
     <p>Comments are just blocks that are preceded by a blank line, start with the word
    "<code>NOTE</code>" (followed by a space or newline), and end at the first blank line.</p>
     <div class="example" id="example-fca3ee1c">
      <a class="self-link" href="#example-fca3ee1c"></a> 
      <p>Here, a one-line comment is used to note a possible problem with a cue.</p>
<pre>WEBVTT
00:01.000 --> 00:04.000
Never drink liquid nitrogen.

NOTE I’m not sure the timing is right on the following cue.

00:05.000 --> 00:09.000
— It will perforate your stomach.
— You could die.</pre>
     </div>
     <div class="example" id="example-cec2b14d">
      <a class="self-link" href="#example-cec2b14d"></a> 
      <p>In this example, the author has written many comments.</p>
<pre>WEBVTT
NOTE
This file was written by Jill. I hope
you enjoy reading it. Some things to
bear in mind:
- I was lip-reading, so the cues may
not be 100% accurate
- I didn’t pay too close attention to
when the cues should start or end.

00:01.000 --> 00:04.000
Never drink liquid nitrogen.

NOTE check next cue

00:05.000 --> 00:09.000
— It will perforate your stomach.
— You could die.

NOTE end of file</pre>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="1.3" id="other-features"><span class="secno">1.3. </span><span class="content">Other features</span><a class="self-link" href="#other-features"></a></h3>
     <p><i>This section is non-normative.</i></p>
     <p>WebVTT also supports some less-often used features.</p>
     <div class="example" id="example-b9cc45b3">
      <a class="self-link" href="#example-b9cc45b3"></a> 
      <p>In this example, the cues have an identifier:</p>
<pre>WEBVTT
1
00:00.000 --> 00:02.000
That’s an, an, that’s an L!

crédit de transcription
00:04.000 --> 00:05.000
Transcrit par Célestes™</pre>
      <p>This allows a style sheet to specifically target the cues (notice the use of CSS character
     escape sequences):</p>
<pre>::cue(#\31) { color: green; }::cue(#crédit\ de\ transcription) { color: red; }</pre>
     </div>
     <div class="example" id="example-531e8e61">
      <a class="self-link" href="#example-531e8e61"></a> 
      <p>In this example, each cue says who is talking using voice spans. In the first cue, the span
     specifying the speaker is also annotated with two classes, "first" and "loud". In the third
     cue, there is also some italics text (not associated with a specific speaker). The last cue is
     annotated with just the class "loud".</p>
<pre>WEBVTT
00:00.000 --> 00:02.000
&lt;v.first.loud Esme>It’s a blue apple tree!

00:02.000 --> 00:04.000
&lt;v Mary>No way!

00:04.000 --> 00:06.000
&lt;v Esme>Hee!&lt;/v> &lt;i>laughter&lt;/i>

00:06.000 --> 00:08.000
&lt;v.loud Mary>That’s awesome!</pre>
      <p>Notice that as a special exception, the voice spans don’t have to be closed if they cover
     the entire cue text.</p>
      <p>Style sheets can style these spans:</p>
<pre>::cue(v[voice="Esme"]) { color: blue }::cue(v[voice="Mary"]) { color: green }
::cue(i) { font-style: italic }
::cue(.loud) { font-size: 2em }</pre>
     </div>
     <div class="example" id="example-9e54952e">
      <a class="self-link" href="#example-9e54952e"></a> 
      <p>This example shows how to position cues at explicit positions in the video viewport.</p>
<pre>WEBVTT
00:00:00.000 --> 00:00:04.000 position:10%,start align:start size:35%
Where did he go?

00:00:03.000 --> 00:00:06.500 position:90% align:end size:35%
I think he went down this lane.

00:00:04.000 --> 00:00:06.500 position:45%,end align:middle size:35%
What are you waiting for?</pre>
      <p>The cues cover only 35% of the video viewport’s width. The first cue has its <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a> left aligned at the 10% mark of the video viewport width and
     the text is left aligned within that box - probably underneath a speaker on the left of the
     video image. "start" alignment of the cue box is the default for start aligned text, so does
     not need to be specified in "position". The second cue has its <a data-link-type="dfn" href="#webvtt-cue-box">cue
     box</a> right aligned at the 90% mark of the video viewport width. The same effect can be
     achieved with "position:55%,start", which explicitly positions the cue box. The third cue has
     middle aligned text within the same type of cue box as the first cue.</p>
     </div>
     <div class="example" id="example-d8801e8e">
      <a class="self-link" href="#example-d8801e8e"></a> 
      <p>This example shows two regions containing rollup captions for two different speakers. Fred’s
     cues scroll up in a region in the left half of the video, Bill’s cues scroll up in a region on
     the right half of the video. Fred’s first cue disappears at 12.5sec even though it is defined
     until 20sec because its region is limited to 3 lines and at 12.5sec a fourth cue appears:</p>
<pre>WEBVTTRegion: id=fred width=40% lines=3 regionanchor=0%,100% viewportanchor=10%,90% scroll=up
Region: id=bill width=40% lines=3 regionanchor=100%,100% viewportanchor=90%,90% scroll=up

00:00:00.000 --> 00:00:20.000 region:fred align:left
&lt;v Fred>Hi, my name is Fred

00:00:02.500 --> 00:00:22.500 region:bill align:right
&lt;v Bill>Hi, I’m Bill

00:00:05.000 --> 00:00:25.000 region:fred align:left
&lt;v Fred>Would you like to get a coffee?

00:00:07.500 --> 00:00:27.500 region:bill align:right
&lt;v Bill>Sure! I’ve only had one today.

00:00:10.000 --> 00:00:30.000 region:fred align:left
&lt;v Fred>This is my fourth!

00:00:12.500 --> 00:00:32.500 region:fred align:left
&lt;v Fred>OK, let’s go.</pre>
      <p>Note that regions are only defined for horizontal cues.</p>
     </div>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="2" id="conformance"><span class="secno">2. </span><span class="content">Conformance</span><a class="self-link" href="#conformance"></a></h2>
    <section>
     <h3 class="heading settled" data-level="2.1" id="conformance-for-authors"><span class="secno">2.1. </span><span class="content">Conformance for authors</span><a class="self-link" href="#conformance-for-authors"></a></h3>
     <p>The <a href="#syntax">Syntax</a> section of this specification defines what consists a valid
    WebVTT document. Authors need to follow the <a href="#syntax">Syntax</a> specification and are
    encouraged to use a validator.</p>
     <p>The <a href="#parsing">Parsing</a> section of this specification defines in some detail the
    required processing for valid and also for invalid documents. It is a little more tolerant to
    author errors than the syntax allows, so as to reject less documents and provide for
    extensibility. However, authors must not take advantage of it. Only documents that follow the <a href="#syntax">Syntax</a> specification are valid.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="2.2" id="unicode-normalization"><span class="secno">2.2. </span><span class="content">Unicode normalization</span><a class="self-link" href="#unicode-normalization"></a></h3>
     <p>This specification requires that Unicode text must not be normalized.</p>
     <p>For example, a cue with the identifier consisting of the characters U+0041 LATIN CAPITAL
    LETTER A and U+212B ANGSTROM SIGN will not match a selector targeting a cue with an ID
    consisting of the character U+00C5 LATIN CAPITAL LETTER A WITH RING ABOVE.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="2.3" id="document-conformance"><span class="secno">2.3. </span><span class="content">Document conformance</span><a class="self-link" href="#document-conformance"></a></h3>
     <p>All diagrams, examples, and notes in this specification are non-normative, as are all
    sections explicitly marked non-normative. Everything else in this specification is
    normative.</p>
     <p>The key words "MUST", "MUST NOT", "SHOULD", "SHOULD NOT", "MAY", and "OPTIONAL" in the
    normative parts of this document are to be interpreted as described in RFC2119. The key word
    "OPTIONALLY" in the normative parts of this document is to be interpreted with the same
    normative meaning as "MAY" and "OPTIONAL". For readability, these words do not appear in all
    uppercase letters in this specification. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
     <p>Requirements phrased in the imperative as part of algorithms (such as "strip any leading
    space characters" or "return false and abort these steps") are to be interpreted with the
    meaning of the key word ("must", "should", "may", etc) used in introducing the algorithm.</p>
     <p>Conformance requirements phrased as algorithms or specific steps may be implemented in any
    manner, so long as the end result is equivalent. (In particular, the algorithms defined in this
    specification are intended to be easy to follow, and not intended to be performant.)</p>
    </section>
    <section id="dependencies">
     <h3 class="heading settled" data-level="2.4" id="dependencies0"><span class="secno">2.4. </span><span class="content">Dependencies</span><a class="self-link" href="#dependencies0"></a></h3>
     <p>This specification uses terms defined in the Encoding standard, DOM standard, HTML standard,
    and the Web IDL specification. <a data-link-type="biblio" href="#biblio-encoding">[ENCODING]</a> <a data-link-type="biblio" href="#biblio-dom">[DOM]</a> <a data-link-type="biblio" href="#biblio-html">[HTML]</a> <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a></p>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="3" id="data-model"><span class="secno">3. </span><span class="content">Data model</span><a class="self-link" href="#data-model"></a></h2>
    <section>
     <h3 class="heading settled" data-level="3.1" id="webvtt-cues"><span class="secno">3.1. </span><span class="content">WebVTT cues</span><a class="self-link" href="#webvtt-cues"></a></h3>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue">WebVTT cue<a class="self-link" href="#webvtt-cue"></a></dfn> is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue">text track cue</a> that additionally consist of the
    following: <a data-link-type="biblio" href="#biblio-html">[HTML]</a></p>
     <dl>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue box" data-noexport="" id="webvtt-cue-box">A cue box<a class="self-link" href="#webvtt-cue-box"></a></dfn>
      <dd>
       <p>The cue box of a <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> is a box within which the text of all lines of the cue
      is to be rendered.</p>
       <p class="note" role="note">The position of the <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a> within the video
      viewport’s dimensions depends on the value of the <a data-link-type="dfn" href="#webvtt-cue-position">WebVTT cue position</a> and the <a data-link-type="dfn" href="#webvtt-cue-line">WebVTT
      cue line</a>.</p>
       <p class="note" role="note">Lines are wrapped within the <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a>’s <a data-link-type="dfn" href="#webvtt-cue-size">size</a> if lines' lengths make this necessary.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue writing direction" data-noexport="" id="webvtt-cue-writing-direction">A writing direction<a class="self-link" href="#webvtt-cue-writing-direction"></a></dfn>
      <dd>
       <p>A writing direction, either</p>
       <ul>
        <li><dfn data-dfn-type="dfn" data-lt="WebVTT cue horizontal writing direction" data-noexport="" id="webvtt-cue-horizontal-writing-direction">horizontal<a class="self-link" href="#webvtt-cue-horizontal-writing-direction"></a></dfn> (a line extends
       horizontally and is offset vertically from the video viewport’s top edge, with consecutive
       lines displayed below each other),
        <li> <dfn data-dfn-type="dfn" data-lt="WebVTT cue vertical growing left writing direction" data-noexport="" id="webvtt-cue-vertical-growing-left-writing-direction">vertical growing
       left<a class="self-link" href="#webvtt-cue-vertical-growing-left-writing-direction"></a></dfn> (a line extends vertically and is offset horizontally from the video viewport’s
       right edge, with consecutive lines displayed to the left of each other), or
        <li><dfn data-dfn-type="dfn" data-lt="WebVTT cue vertical growing right writing direction" data-noexport="" id="webvtt-cue-vertical-growing-right-writing-direction">vertical growing
       right<a class="self-link" href="#webvtt-cue-vertical-growing-right-writing-direction"></a></dfn> (a line extends vertically and is offset horizontally from the video viewport’s
       left edge, with consecutive lines displayed to the right of each other).
       </ul>
       <p>If the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a>, then the <a data-link-type="dfn" href="#webvtt-cue-line">line</a> percentages are relative to the height of the video, and <a data-link-type="dfn" href="#webvtt-cue-position">position</a> and <a data-link-type="dfn" href="#webvtt-cue-size">size</a> percentages are relative to the
      width of the video.</p>
       <p>Otherwise, <a data-link-type="dfn" href="#webvtt-cue-line">line</a> percentages are relative to the width of the
      video, and <a data-link-type="dfn" href="#webvtt-cue-position">position</a> and <a data-link-type="dfn" href="#webvtt-cue-size">size</a> percentages are relative to the height of the video.</p>
       <p>The <a data-link-type="dfn" href="#webvtt-cue-writing-direction">writing direction</a> defaults to <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a>.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue snap-to-lines flag" data-noexport="" id="webvtt-cue-snap-to-lines-flag">A snap-to-lines flag<a class="self-link" href="#webvtt-cue-snap-to-lines-flag"></a></dfn>
      <dd>
       <p>A boolean indicating whether the <a data-link-type="dfn" href="#webvtt-cue-line">line</a> is an integer number
      of lines (using the line dimensions of the first line of the cue), or whether it is a
      percentage of the dimension of the video. The flag is set when lines are counted, unset
      otherwise.</p>
       <p>Cues whose <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines flag</a> is set will be placed within the title-safe
      area on user agents that use overscan. Cues with the flag unset will be offset as requested
      (modulo overlap avoidance if multiple cues are in the same place).</p>
       <p>By default, the <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">snap-to-lines flag</a> is set to
      true.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue line" data-noexport="" id="webvtt-cue-line">A line<a class="self-link" href="#webvtt-cue-line"></a></dfn>
      <dd>
       <p>The <a data-link-type="dfn" href="#webvtt-cue-line">line</a> defines positioning of the <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a>.</p>
       <p>The <a data-link-type="dfn" href="#webvtt-cue-line">line</a> offsets the <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a> from the top, the right or left of the video viewport as defined by the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">writing direction</a>, the <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">snap-to-lines flag</a>, or the lines occupied by any other showing tracks.</p>
       <p>The <a data-link-type="dfn" href="#webvtt-cue-line">line</a> is set either as a number of lines, a percentage of
      the video viewport height or width, or as the special value <dfn data-dfn-type="dfn" data-lt="WebVTT cue line
      automatic" data-noexport="" id="webvtt-cue-line-automatic">auto<a class="self-link" href="#webvtt-cue-line-automatic"></a></dfn>, which means the offset is to depend on the other showing tracks.</p>
       <p>A <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> has a <dfn data-dfn-type="dfn" data-lt="cue computed line" data-noexport="" id="cue-computed-line">computed line<a class="self-link" href="#cue-computed-line"></a></dfn> whose value is
      that returned by the following algorithm, which is defined in terms of the other aspects of
      the cue:</p>
       <ol>
        <li>
         <p>If the <a data-link-type="dfn" href="#webvtt-cue-line">line</a> is numeric, the <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines
       flag</a> of the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> is not set, and the <a data-link-type="dfn" href="#webvtt-cue-line">line</a> is
       negative or greater than 100, then return 100 and abort these steps.</p>
        <li>
         <p>If the <a data-link-type="dfn" href="#webvtt-cue-line">line</a> is numeric, return the value of the <a data-link-type="dfn" href="#webvtt-cue-line">WebVTT cue line</a> and abort these steps. (Either the <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines
       flag</a> is set, so any value, not just those in the range 0..100, is valid, or the value is
       in the range 0..100 and is thus valid regardless of the value of that flag.)</p>
        <li>
         <p>If the <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines flag</a> of the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> is not set,
       return the value 100 and abort these steps. (The <a data-link-type="dfn" href="#webvtt-cue-line">line</a> is the
       special value <a data-link-type="dfn" href="#webvtt-cue-line-automatic">auto</a>.)</p>
        <li>
         <p>Let <var>cue</var> be the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a>.</p>
        <li>
         <p>If <var>cue</var> is not in a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-list-of-cues">list of cues</a> of a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track">text track</a>, or if that <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track">text track</a> is not in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#list-of-text-tracks">list of text tracks</a> of a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">media element</a>, return −1 and abort these steps.</p>
        <li>
         <p>Let <var>track</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track">text track</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-list-of-cues">list of cues</a> the <var>cue</var> is in.</p>
        <li>
         <p>Let <var>n</var> be the number of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track">text tracks</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-mode">text
       track mode</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-showing">showing</a> and that are in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">media
       element</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#list-of-text-tracks">list of text tracks</a> before <var>track</var>.</p>
        <li>
         <p>Increment <var>n</var> by one.</p>
        <li>
         <p>Negate <var>n</var>.</p>
        <li>
         <p>Return <var>n</var>.</p>
       </ol>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue line alignment" data-noexport="" id="webvtt-cue-line-alignment">A line alignment<a class="self-link" href="#webvtt-cue-line-alignment"></a></dfn>
      <dd>
       <p>An alignment for the <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a>’s <a data-link-type="dfn" href="#webvtt-cue-line">line</a>, one of:</p>
       <dl>
        <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue line start alignment" data-noexport="" id="webvtt-cue-line-start-alignment">Start alignment<a class="self-link" href="#webvtt-cue-line-start-alignment"></a></dfn>
        <dd>The <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a>’s top side (for <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a> cues), left side (for <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-right-writing-direction">vertical growing right</a>), or right side (for <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-left-writing-direction">vertical growing left</a>) is aligned at the <a data-link-type="dfn" href="#webvtt-cue-line">line</a>.
        <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue line middle alignment" data-noexport="" id="webvtt-cue-line-middle-alignment">Middle alignment<a class="self-link" href="#webvtt-cue-line-middle-alignment"></a></dfn>
        <dd>The <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a> is centered at the <a data-link-type="dfn" href="#webvtt-cue-line">line</a>.
        <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue line end alignment" data-noexport="" id="webvtt-cue-line-end-alignment">End alignment<a class="self-link" href="#webvtt-cue-line-end-alignment"></a></dfn>
        <dd>The <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a>’s bottom side (for <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a> cues), right side (for <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-right-writing-direction">vertical growing right</a>), or left side (for <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-left-writing-direction">vertical growing left</a>) is
       aligned at the <a data-link-type="dfn" href="#webvtt-cue-line">line</a>.
       </dl>
       <p>A <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> has a default <a data-link-type="dfn" href="#webvtt-cue-line-alignment">WebVTT cue line alignment</a> of <a data-link-type="dfn" href="#webvtt-cue-line-start-alignment">start</a>.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue position" data-noexport="" id="webvtt-cue-position">A position<a class="self-link" href="#webvtt-cue-position"></a></dfn>
      <dd>
       <p>The <a data-link-type="dfn" href="#webvtt-cue-position">position</a> defines the indent of the <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a> in the direction defined by the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">writing direction</a>.</p>
       <p>The <a data-link-type="dfn" href="#webvtt-cue-position">position</a> is either a number giving the position of
      the <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a> as a percentage value or the special value <dfn data-dfn-type="dfn" data-lt="WebVTT cue automatic position" data-noexport="" id="webvtt-cue-automatic-position">auto<a class="self-link" href="#webvtt-cue-automatic-position"></a></dfn>, which means the position is to depend on the <a data-link-type="dfn" href="#webvtt-cue-text-alignment">text alignment</a> of the cue.</p>
       <p>If the cue is not within a <a data-link-type="dfn" href="#webvtt-region">region</a>, the percentage value is to
      be interpreted as a percentage of the video dimensions, otherwise as a percentage of the
      region dimensions.</p>
       <p>A <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> has a <dfn data-dfn-type="dfn" data-lt="cue computed position" data-noexport="" id="cue-computed-position">computed position<a class="self-link" href="#cue-computed-position"></a></dfn> whose
      value is that returned by the following algorithm, which is defined in terms of the other
      aspects of the cue:</p>
       <ol>
        <li>
         <p>If the <a data-link-type="dfn" href="#webvtt-cue-position">position</a> is numeric, then return the value
       of the <a data-link-type="dfn" href="#webvtt-cue-position">position</a> and abort these steps. (Otherwise, the <a data-link-type="dfn" href="#webvtt-cue-position">position</a> is the special value <a data-link-type="dfn" href="#webvtt-cue-automatic-position">auto</a>.)</p>
        <li>
         <p>If the <a data-link-type="dfn" href="#webvtt-cue-text-alignment">cue text alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-start-alignment">start</a> or <a data-link-type="dfn" href="#webvtt-cue-left-alignment">left</a>, return 0 and
       abort these steps.</p>
        <li>
         <p>If the <a data-link-type="dfn" href="#webvtt-cue-text-alignment">cue text alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-end-alignment">end</a> or <a data-link-type="dfn" href="#webvtt-cue-right-alignment">right</a>, return 100 and
       abort these steps.</p>
        <li>
         <p>If the <a data-link-type="dfn" href="#webvtt-cue-text-alignment">cue text alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-middle-alignment">middle</a>, return 50 and abort these steps.</p>
       </ol>
       <p class="note" role="note">Since the default value of the <a data-link-type="dfn" href="#webvtt-cue-position-alignment">WebVTT cue position alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-middle-alignment">middle</a>, if there is no <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text
      alignment</a> setting for a cue, the <a data-link-type="dfn" href="#webvtt-cue-position">WebVTT cue position</a> defaults to 50%.</p>
       <p class="note" role="note">Even for <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a> cues with right-to-left <i>paragraph direction</i> text, the <a data-link-type="dfn" href="#webvtt-cue-box">cue
      box</a> is positioned from the left edge of the video viewport. This allows defining a
      rendering space template which can be filled with either left-to-right or right-to-left <i>paragraph direction</i> text. If such a <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a> template is
      created with <a data-link-type="dfn" href="#webvtt-cue-start-alignment">start</a> or <a data-link-type="dfn" href="#webvtt-cue-end-alignment">end</a> aligned text, it is best to also specify a <a data-link-type="dfn" href="#webvtt-cue-size">size</a> since otherwise the text may flip from one side of the video viewport to the
      other.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue position alignment" data-noexport="" id="webvtt-cue-position-alignment">A position alignment<a class="self-link" href="#webvtt-cue-position-alignment"></a></dfn>
      <dd>
       <p>An alignment for the <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a> in the dimension of the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">writing direction</a>, describing what the <a data-link-type="dfn" href="#webvtt-cue-position">position</a> is anchored to, one of:</p>
       <dl>
        <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue position start alignment" data-noexport="" id="webvtt-cue-position-start-alignment">Start alignment<a class="self-link" href="#webvtt-cue-position-start-alignment"></a></dfn>
        <dd>The <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a>’s left side (for <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a> cues) or top side (otherwise) is aligned at the <a data-link-type="dfn" href="#webvtt-cue-position">position</a>.
        <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue position middle alignment" data-noexport="" id="webvtt-cue-position-middle-alignment">Middle alignment<a class="self-link" href="#webvtt-cue-position-middle-alignment"></a></dfn>
        <dd>The <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a> is centered at the <a data-link-type="dfn" href="#webvtt-cue-position">position</a>.
        <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue position end alignment" data-noexport="" id="webvtt-cue-position-end-alignment">End alignment<a class="self-link" href="#webvtt-cue-position-end-alignment"></a></dfn>
        <dd>The <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a>’s right side (for <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a> cues) or bottom side (otherwise) is aligned at
       the <a data-link-type="dfn" href="#webvtt-cue-position">position</a>.
        <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue position automatic alignment" data-noexport="" id="webvtt-cue-position-automatic-alignment">Auto alignment<a class="self-link" href="#webvtt-cue-position-automatic-alignment"></a></dfn>
        <dd>The <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a>’s alignment depends on the value of the <a data-link-type="dfn" href="#webvtt-cue-text-alignment">text alignment</a> of the cue.
       </dl>
       <p>A <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> has a <dfn data-dfn-type="dfn" data-lt="cue computed position alignment" data-noexport="" id="cue-computed-position-alignment">computed position
      alignment<a class="self-link" href="#cue-computed-position-alignment"></a></dfn> whose value is that returned by the following algorithm, which is defined in
      terms of other aspects of the cue:</p>
       <ol>
        <li>
         <p>If the <a data-link-type="dfn" href="#webvtt-cue-position-alignment">WebVTT cue position alignment</a> is not <a data-link-type="dfn" href="#webvtt-cue-position-automatic-alignment">auto</a>, then return the value of the <a data-link-type="dfn" href="#webvtt-cue-position-alignment">WebVTT cue position
       alignment</a> and abort these steps.</p>
        <li>
         <p>If the <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-start-alignment">start</a> or <a data-link-type="dfn" href="#webvtt-cue-left-alignment">left</a>, return <a data-link-type="dfn" href="#webvtt-cue-position-start-alignment">start</a> and abort these steps.</p>
        <li>
         <p>If the <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-end-alignment">end</a> or <a data-link-type="dfn" href="#webvtt-cue-right-alignment">right</a>, return <a data-link-type="dfn" href="#webvtt-cue-position-end-alignment">end</a> and abort these steps.</p>
        <li>
         <p>If the <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-middle-alignment">middle</a>, return <a data-link-type="dfn" href="#webvtt-cue-position-middle-alignment">middle</a> and
       abort these steps.</p>
       </ol>
       <p class="note" role="note">Since the <a data-link-type="dfn" href="#webvtt-cue-position">position</a> always measures from the
      left of the video (for <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a> cues)
      or the top (otherwise), the <a data-link-type="dfn" href="#webvtt-cue-position-alignment">WebVTT cue position alignment</a> <a data-link-type="dfn" href="#webvtt-cue-position-start-alignment">start value</a> varies between left and top for horizontal and vertical cues,
      but not between left and right even for changing <i>paragraph direction</i>.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue size" data-noexport="" id="webvtt-cue-size">A size<a class="self-link" href="#webvtt-cue-size"></a></dfn>
      <dd>
       <p>A number giving the size of the <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a>, to be interpreted as
      a percentage of the video, as defined by the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">writing
      direction</a>.</p>
       <p>By default, the <a data-link-type="dfn" href="#webvtt-cue-size">WebVTT cue size</a> is 100%.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue text alignment" data-noexport="" id="webvtt-cue-text-alignment">A text alignment<a class="self-link" href="#webvtt-cue-text-alignment"></a></dfn>
      <dd>
       <p>An alignment for all lines of text within the <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a>, in the
      dimension of the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">writing direction</a> and the <i>paragraph direction</i> <a data-link-type="biblio" href="#biblio-bidi">[BIDI]</a>, one of:</p>
       <dl>
        <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue start alignment" data-noexport="" id="webvtt-cue-start-alignment">Start alignment<a class="self-link" href="#webvtt-cue-start-alignment"></a></dfn>
        <dd>The text is aligned towards the <i>paragraph direction</i> start side of the <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a>.
        <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue middle alignment" data-noexport="" id="webvtt-cue-middle-alignment">Middle alignment<a class="self-link" href="#webvtt-cue-middle-alignment"></a></dfn>
        <dd>The text is aligned centered between the box’s start and end sides.
        <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue end alignment" data-noexport="" id="webvtt-cue-end-alignment">End alignment<a class="self-link" href="#webvtt-cue-end-alignment"></a></dfn>
        <dd>The text is aligned towards the <i>paragraph direction</i> end side of the <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a>.
        <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue left alignment" data-noexport="" id="webvtt-cue-left-alignment">Left alignment<a class="self-link" href="#webvtt-cue-left-alignment"></a></dfn>
        <dd>The text is aligned to the box’s left side.
        <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue right alignment" data-noexport="" id="webvtt-cue-right-alignment">Right alignment<a class="self-link" href="#webvtt-cue-right-alignment"></a></dfn>
        <dd>The text is aligned to the box’s right side.
       </dl>
       <p>By default, the value of the <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-middle-alignment">middle aligned</a>.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT cue region" data-noexport="" id="webvtt-cue-region">A region<a class="self-link" href="#webvtt-cue-region"></a></dfn>
      <dd>
       <p>An optional <a data-link-type="dfn" href="#webvtt-region">WebVTT region</a> to which a cue belongs.</p>
     </dl>
     <p>The associated <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#rules-for-updating-the-text-track-rendering">rules for updating the text track rendering</a> of <a data-link-type="dfn" href="#webvtt-cue">WebVTT cues</a> are the <a data-link-type="dfn" href="#rules-for-updating-the-display-of-webvtt-text-tracks">rules for updating the display of WebVTT text tracks</a>.</p>
     <div class="impl">
      <p>When a <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-active-flag">active flag</a> is set
     has its <a data-link-type="dfn" href="#webvtt-cue-writing-direction">writing direction</a>, <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">snap-to-lines flag</a>, <a data-link-type="dfn" href="#webvtt-cue-line">line</a>, <a data-link-type="dfn" href="#webvtt-cue-position">position</a>, <a data-link-type="dfn" href="#webvtt-cue-size">size</a>, <a data-link-type="dfn" href="#webvtt-cue-text-alignment">text alignment</a>, <a data-link-type="dfn" href="#webvtt-cue-region">region</a>, or <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-text">text</a> change value, then the user agent must empty the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-display-state">text
     track cue display state</a>, and then immediately run the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track">text track</a>’s <a data-link-type="dfn" href="#rules-for-updating-the-display-of-webvtt-text-tracks">rules for
     updating the display of WebVTT text tracks</a>.</p>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="3.2" id="webvtt-regions"><span class="secno">3.2. </span><span class="content">WebVTT regions</span><a class="self-link" href="#webvtt-regions"></a></h3>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-region">WebVTT region<a class="self-link" href="#webvtt-region"></a></dfn> represents a subpart of the video viewport and provides a
    rendering area for <a data-link-type="dfn" href="#webvtt-cue">WebVTT cues</a>.</p>
     <p>Each <a data-link-type="dfn" href="#webvtt-region">WebVTT region</a> consists of:</p>
     <dl>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT region identifier" data-noexport="" id="webvtt-region-identifier">An identifier<a class="self-link" href="#webvtt-region-identifier"></a></dfn>
      <dd>
       <p>An arbitrary string.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT region width" data-noexport="" id="webvtt-region-width">A width<a class="self-link" href="#webvtt-region-width"></a></dfn>
      <dd>
       <p>A number giving the width of the box within which the text of each line of the containing
      cues is to be rendered, to be interpreted as a percentage of the video width. Defaults to
      100.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT region lines" data-noexport="" id="webvtt-region-lines">A lines value<a class="self-link" href="#webvtt-region-lines"></a></dfn>
      <dd>
       <p>A number giving the number of lines of the box within which the text of each line of the
      containing cues is to be rendered. Defaults to 3.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT region anchor" data-noexport="" id="webvtt-region-anchor">A region anchor point<a class="self-link" href="#webvtt-region-anchor"></a></dfn>
      <dd>
       <p>Two numbers giving the x and y coordinates within the region which is anchored to the video
      viewport and does not change location even when the region does, e.g. because of font size
      changes. Defaults to (0,100), i.e. the bottom left corner of the region.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT region viewport anchor" data-noexport="" id="webvtt-region-viewport-anchor">A region viewport anchor point<a class="self-link" href="#webvtt-region-viewport-anchor"></a></dfn>
      <dd>
       <p>Two numbers giving the x and y coordinates within the video viewport to which the region
      anchor point is anchored. Defaults to (0,100), i.e. the bottom left corner of the
      viewport.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT region scroll" data-noexport="" id="webvtt-region-scroll">A scroll value<a class="self-link" href="#webvtt-region-scroll"></a></dfn>
      <dd>
       <p>One of the following:</p>
       <dl>
        <dt><dfn data-dfn-type="dfn" data-lt="WebVTT region scroll none" data-noexport="" id="webvtt-region-scroll-none">None<a class="self-link" href="#webvtt-region-scroll-none"></a></dfn>
        <dd>Indicates that the cues in the region are not to scroll and instead stay fixed at the
       location they were first painted in.
        <dt><dfn data-dfn-type="dfn" data-lt="WebVTT region scroll up" data-noexport="" id="webvtt-region-scroll-up">Up<a class="self-link" href="#webvtt-region-scroll-up"></a></dfn>
        <dd>Indicates that the cues in the region will be added at the bottom of the region and push
       any already displayed cues in the region up until all lines of the new cue are visible in the
       region.
       </dl>
     </dl>
     <div class="note" role="note">
      <p>The following diagram illustrates how anchoring of a region to a video viewport works. The
     black cross is the anchor, orange explains the anchor’s offset within the region and green the
     anchor’s offset within the viewport. Think of it as sticking a pin through a note onto a
     board:</p>
      <p><img alt="Within the video viewport, there is a WebVTT
     region. Inside the region, there is an anchor point marked with a black cross. The vertical and
     horizontal distance from the video viewport’s edges to the anchor is marked with green arrows,
     representing the region viewport anchor X and Y offsets. The vertical and horizontal distance
     from the region’s edges to the anchor is marked with orange arrows, representing the region
     anchor X and Y offsets. The size of the region is represented by the region width for the
     horizontal axis, and region lines for the vertical axis." src="webvtt-region-diagram.png"></p>
     </div>
     <p>For parsing, we also need the following:</p>
     <dl>
      <dt><dfn data-dfn-type="dfn" data-lt="text track list of regions" data-noexport="" id="text-track-list-of-regions">A text track list of regions<a class="self-link" href="#text-track-list-of-regions"></a></dfn>
      <dd>
       <p>A list of zero or more <a data-link-type="dfn" href="#webvtt-region">WebVTT regions</a>.</p>
     </dl>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="4" id="syntax"><span class="secno">4. </span><span class="content">Syntax</span><a class="self-link" href="#syntax"></a></h2>
    <section>
     <h3 class="heading settled" data-level="4.1" id="webvtt-file-structure"><span class="secno">4.1. </span><span class="content">WebVTT file structure</span><a class="self-link" href="#webvtt-file-structure"></a></h3>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-file">WebVTT file<a class="self-link" href="#webvtt-file"></a></dfn> must consist of a <a data-link-type="dfn" href="#webvtt-file-body">WebVTT file body</a> encoded as UTF-8 and
    labeled with the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#mime-type">MIME type</a> <code>text/vtt</code>. <a data-link-type="biblio" href="#biblio-rfc3629">[RFC3629]</a></p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-file-body">WebVTT file body<a class="self-link" href="#webvtt-file-body"></a></dfn> consists of the following components, in the following
    order:</p>
     <ol>
      <li>An optional U+FEFF BYTE ORDER MARK (BOM) character.
      <li>The string "<code>WEBVTT</code>".
      <li>Optionally, either a U+0020 SPACE character or a U+0009 CHARACTER TABULATION (tab)
     character followed by any number of characters that are not U+000A LINE FEED (LF) or U+000D
     CARRIAGE RETURN (CR) characters.
      <li>Exactly one <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line terminators</a> to terminate the
     line with the file magic and separate it from the rest of the body.
      <li>Zero or more <a data-link-type="dfn" href="#webvtt-metadata-header">WebVTT metadata headers</a>.
      <li>One or more <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line terminators</a> to terminate the
     header block and separate the cues from the file header.
      <li>Zero or more <a data-link-type="dfn" href="#webvtt-cue-block">WebVTT cue blocks</a> and <a data-link-type="dfn" href="#webvtt-comment-block">WebVTT comment blocks</a> separated from each other by one or more <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line terminators</a>.
      <li>Zero or more <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line terminators</a>.
     </ol>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-line-terminator">WebVTT line terminator<a class="self-link" href="#webvtt-line-terminator"></a></dfn> consists of one of the following:</p>
     <ul class="brief">
      <li>A U+000D CARRIAGE RETURN U+000A LINE FEED (CRLF) character pair.
      <li>A single U+000A LINE FEED (LF) character.
      <li>A single U+000D CARRIAGE RETURN (CR) character.
     </ul>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-metadata-header">WebVTT metadata header<a class="self-link" href="#webvtt-metadata-header"></a></dfn> consists of the following components, in the given
    order:</p>
     <ol>
      <li>A <a data-link-type="dfn" href="#webvtt-metadata-header-name">WebVTT metadata header name</a>.
      <li>A U+003A COLON (colon) character.
      <li>A <a data-link-type="dfn" href="#webvtt-metadata-header-value">WebVTT metadata header value</a>.
      <li>A <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line terminator</a>.
     </ol>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-metadata-header-name">WebVTT metadata header name<a class="self-link" href="#webvtt-metadata-header-name"></a></dfn> and a <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-metadata-header-value">WebVTT metadata header value<a class="self-link" href="#webvtt-metadata-header-value"></a></dfn> each
    consist of any sequence of one or more characters other than U+000A LINE FEED (LF) characters
    and U+000D CARRIAGE RETURN (CR) characters except that the entire resulting string must not
    contain the substring "<code>--></code>" (U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E
    GREATER-THAN SIGN).</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-block">WebVTT cue block<a class="self-link" href="#webvtt-cue-block"></a></dfn> consists of the following components, in the given order:</p>
     <ol>
      <li>Optionally, a <a data-link-type="dfn" href="#webvtt-cue-identifier">WebVTT cue identifier</a> followed by a <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line
     terminator</a>.
      <li><a data-link-type="dfn" href="#webvtt-cue-timings">WebVTT cue timings</a>.
      <li>Optionally, one or more U+0020 SPACE characters or U+0009 CHARACTER TABULATION (tab)
     characters followed by a <a data-link-type="dfn" href="#webvtt-cue-settings-list">WebVTT cue settings list</a>.
      <li>A <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line terminator</a>.
      <li>The <dfn data-dfn-type="dfn" data-noexport="" id="cue-payload">cue payload<a class="self-link" href="#cue-payload"></a></dfn>: either <a data-link-type="dfn" href="#webvtt-cue-text0">WebVTT cue text</a>, <a data-link-type="dfn" href="#webvtt-chapter-title-text">WebVTT chapter title
     text</a>, or <a data-link-type="dfn" href="#webvtt-metadata-text0">WebVTT metadata text</a>, but it must not contain the substring
     "<code>--></code>" (U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E GREATER-THAN SIGN).
      <li>A <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line terminator</a>.
     </ol>
     <p class="note" role="note">A <a data-link-type="dfn" href="#webvtt-cue-block">WebVTT cue block</a> corresponds to one piece of time-aligned text or data
    in the <a data-link-type="dfn" href="#webvtt-file">WebVTT file</a>, for example one subtitle. The <a data-link-type="dfn" href="#cue-payload">cue payload</a> is the text or data
    associated with the cue.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-identifier">WebVTT cue identifier<a class="self-link" href="#webvtt-cue-identifier"></a></dfn> is any sequence of one or more characters not containing
    the substring "<code>--></code>" (U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E GREATER-THAN
    SIGN), nor containing any U+000A LINE FEED (LF) characters or U+000D CARRIAGE RETURN (CR)
    characters.</p>
     <p>A <a data-link-type="dfn" href="#webvtt-cue-identifier">WebVTT cue identifier</a> must be unique amongst all the <a data-link-type="dfn" href="#webvtt-cue-identifier">WebVTT cue identifiers</a> of all <a data-link-type="dfn" href="#webvtt-cue">WebVTT cues</a> of a <a data-link-type="dfn" href="#webvtt-file">WebVTT file</a>.</p>
     <p class="note" role="note">A <a data-link-type="dfn" href="#webvtt-cue-identifier">WebVTT cue identifier</a> can be used to reference a specific cue, for
    example from script or CSS.</p>
     <p>The <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-timings">WebVTT cue timings<a class="self-link" href="#webvtt-cue-timings"></a></dfn> part of a <a data-link-type="dfn" href="#webvtt-cue-block">WebVTT cue block</a> consists of the following
    components, in the given order:</p>
     <ol>
      <li>A <a data-link-type="dfn" href="#webvtt-timestamp">WebVTT timestamp</a> representing the start time offset of the cue. The time
     represented by this <a data-link-type="dfn" href="#webvtt-timestamp">WebVTT timestamp</a> must be greater than or equal to the start time
     offsets of all previous cues in the file.
      <li>One or more U+0020 SPACE characters or U+0009 CHARACTER TABULATION (tab) characters.
      <li>The string "<code>--></code>" (U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E
     GREATER-THAN SIGN).
      <li>One or more U+0020 SPACE characters or U+0009 CHARACTER TABULATION (tab) characters.
      <li>A <a data-link-type="dfn" href="#webvtt-timestamp">WebVTT timestamp</a> representing the end time offset of the cue. The time represented
     by this <a data-link-type="dfn" href="#webvtt-timestamp">WebVTT timestamp</a> must be greater than the start time offset of the cue.
     </ol>
     <p class="note" role="note">The <a data-link-type="dfn" href="#webvtt-cue-timings">WebVTT cue timings</a> give the start and end offsets of the <a data-link-type="dfn" href="#webvtt-cue-block">WebVTT
    cue block</a>. Different cues can overlap. Cues are always listed ordered by their start
    time.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-timestamp">WebVTT timestamp<a class="self-link" href="#webvtt-timestamp"></a></dfn> consists of the following components, in the given order:</p>
     <ol>
      <li>
        Optionally (required if <var>hours</var> is non-zero): 
       <ol>
        <li>Two or more <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII digits</a>, representing the <var>hours</var> as a base ten
       integer.
        <li>A U+003A COLON character (:)
       </ol>
      <li>Two <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII digits</a>, representing the <var>minutes</var> as a base ten integer in the
     range 0 ≤ <var>minutes</var> ≤ 59.
      <li>A U+003A COLON character (:)
      <li>Two <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII digits</a>, representing the <var>seconds</var> as a base ten integer in the
     range 0 ≤ <var>seconds</var> ≤ 59.
      <li>A U+002E FULL STOP character (.).
      <li>Three <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII digits</a>, representing the thousandths of a second <var>seconds-frac</var> as a base ten integer.
     </ol>
     <p class="note" role="note">A <a data-link-type="dfn" href="#webvtt-timestamp">WebVTT timestamp</a> is always interpreted relative to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#current-playback-position">current
    playback position</a> of the media data that the WebVTT file is to be synchronized with.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-settings-list">WebVTT cue settings list<a class="self-link" href="#webvtt-cue-settings-list"></a></dfn> consist of a sequence of zero or more <dfn data-dfn-type="dfn" data-lt="WebVTT cue setting" data-noexport="" id="webvtt-cue-setting">WebVTT cue settings<a class="self-link" href="#webvtt-cue-setting"></a></dfn> in any order, separated from each other by
    one or more U+0020 SPACE characters or U+0009 CHARACTER TABULATION (tab) characters. Each
    setting consists of the following components, in the order given:</p>
     <ol>
      <li>A <a data-link-type="dfn" href="#webvtt-cue-setting-name">WebVTT cue setting name</a>.
      <li>An optional U+003A COLON (colon) character.
      <li>An optional <a data-link-type="dfn" href="#webvtt-cue-setting-value">WebVTT cue setting value</a>.
     </ol>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-setting-name">WebVTT cue setting name<a class="self-link" href="#webvtt-cue-setting-name"></a></dfn> and a <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-setting-value">WebVTT cue setting value<a class="self-link" href="#webvtt-cue-setting-value"></a></dfn> each consist
    of any sequence of one or more characters other than U+000A LINE FEED (LF) characters and -
    U+000D CARRIAGE RETURN (CR) characters except that the entire resulting string must not contain
    the substring "<code>--></code>" (U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E GREATER-THAN
    SIGN).</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-percentage">WebVTT percentage<a class="self-link" href="#webvtt-percentage"></a></dfn> consists of the following components:</p>
     <ol>
      <li>One or more <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII digits</a>.
      <li>
        Optionally: 
       <ol>
        <li>A U+002E DOT character (.).
        <li>One or more <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII digits</a>.
       </ol>
      <li>A U+0025 PERCENT SIGN character (%).
     </ol>
     <p>When interpreted as a number, a <a data-link-type="dfn" href="#webvtt-percentage">WebVTT percentage</a> must be in the range 0..100.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-comment-block">WebVTT comment block<a class="self-link" href="#webvtt-comment-block"></a></dfn> consists of the following components, in the given
    order:</p>
     <ol>
      <li>The string "<code>NOTE</code>".
      <li>
        Optionally, the following components, in the given order: 
       <ol>
        <li>
          Either: 
         <ul>
          <li>A U+0020 SPACE character or U+0009 CHARACTER TABULATION (tab) character.
          <li>A <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line terminator</a>.
         </ul>
        <li>Any sequence of zero or more characters other than U+000A LINE FEED (LF) characters and
       U+000D CARRIAGE RETURN (CR) characters, each optionally separated from the next by a <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line terminator</a>, except that the entire resulting string must not contain the
       substring "<code>--></code>" (U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E GREATER-THAN
       SIGN).
       </ol>
      <li>A <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line terminator</a>.
     </ol>
     <p class="note" role="note">A <a data-link-type="dfn" href="#webvtt-comment-block">WebVTT comment block</a> is ignored by the parser.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.2" id="types-of-webvtt-cue-payload"><span class="secno">4.2. </span><span class="content">Types of WebVTT cue payload</span><a class="self-link" href="#types-of-webvtt-cue-payload"></a></h3>
     <section>
      <h4 class="heading settled" data-level="4.2.1" id="webvtt-metadata-text"><span class="secno">4.2.1. </span><span class="content">WebVTT metadata text</span><a class="self-link" href="#webvtt-metadata-text"></a></h4>
      <p><dfn data-dfn-type="dfn" data-noexport="" id="webvtt-metadata-text0">WebVTT metadata text<a class="self-link" href="#webvtt-metadata-text0"></a></dfn> consists of any sequence of zero or more characters other
     than U+000A LINE FEED (LF) characters and U+000D CARRIAGE RETURN (CR) characters, each
     optionally separated from the next by a <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line terminator</a>. (In other words, any
     text that does not have two consecutive <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line
     terminators</a> and does not start or end with a <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line terminator</a>.)</p>
      <p><a data-link-type="dfn" href="#webvtt-metadata-text0">WebVTT metadata text</a> cues are only useful for scripted applications (using the <code>metadata</code> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-kind">text track kind</a>).</p>
     </section>
     <section>
      <h4 class="heading settled" data-level="4.2.2" id="webvtt-cue-text"><span class="secno">4.2.2. </span><span class="content">WebVTT cue text</span><a class="self-link" href="#webvtt-cue-text"></a></h4>
      <p><dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-text0">WebVTT cue text<a class="self-link" href="#webvtt-cue-text0"></a></dfn> is <a data-link-type="dfn" href="#cue-payload">cue payload</a> that consists of zero or more <a data-link-type="dfn" href="#webvtt-cue-components">WebVTT cue
     components</a>, in any order, each optionally separated from the next by a <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line
     terminator</a>.</p>
      <p>The <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-components">WebVTT cue components<a class="self-link" href="#webvtt-cue-components"></a></dfn> are:</p>
      <ul>
       <li>A <a data-link-type="dfn" href="#webvtt-cue-class-span">WebVTT cue class span</a>.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-italics-span">WebVTT cue italics span</a>.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-bold-span">WebVTT cue bold span</a>.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-underline-span">WebVTT cue underline span</a>.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-ruby-span">WebVTT cue ruby span</a>.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-voice-span">WebVTT cue voice span</a>.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-language-span">WebVTT cue language span</a>.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-timestamp">WebVTT cue timestamp</a>.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-text-span">WebVTT cue text span</a>, representing the text of the cue.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-amp-escape">WebVTT cue amp escape</a>, representing a "&amp;" character in the text of the
      cue.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-lt-escape">WebVTT cue lt escape</a>, representing a "&lt;" character in the text of the
      cue.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-gt-escape">WebVTT cue gt escape</a>, representing a ">" character in the text of the
      cue.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-lrm-escape">WebVTT cue lrm escape</a>, representing a U+200E LEFT-TO-RIGHT MARK Unicode
      bidirectional formatting character in the text of the cue.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-rlm-escape">WebVTT cue rlm escape</a>, representing a U+200F RIGHT-TO-LEFT MARK Unicode
      bidirectional formatting character in the text of the cue.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-nbsp-escape">WebVTT cue nbsp escape</a>, representing a U+00A0 NO-BREAK SPACE character in the
      text of the cue.
      </ul>
      <p><dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-internal-text">WebVTT cue internal text<a class="self-link" href="#webvtt-cue-internal-text"></a></dfn> consists of an optional <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line terminator</a>,
     followed by zero or more <a data-link-type="dfn" href="#webvtt-cue-components">WebVTT cue components</a>, in any order, each optionally followed
     by a <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line terminator</a>.</p>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-class-span">WebVTT cue class span<a class="self-link" href="#webvtt-cue-class-span"></a></dfn> consists of a <a data-link-type="dfn" href="#webvtt-cue-span-start-tag">WebVTT cue span start tag</a> "<code>c</code>" that disallows an annotation, <a data-link-type="dfn" href="#webvtt-cue-internal-text">WebVTT cue internal text</a> representing cue
     text, and a <a data-link-type="dfn" href="#webvtt-cue-span-end-tag">WebVTT cue span end tag</a> "<code>c</code>".</p>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-italics-span">WebVTT cue italics span<a class="self-link" href="#webvtt-cue-italics-span"></a></dfn> consists of a <a data-link-type="dfn" href="#webvtt-cue-span-start-tag">WebVTT cue span start tag</a> "<code>i</code>" that disallows an annotation, <a data-link-type="dfn" href="#webvtt-cue-internal-text">WebVTT cue internal text</a> representing the
     italicized text, and a <a data-link-type="dfn" href="#webvtt-cue-span-end-tag">WebVTT cue span end tag</a> "<code>i</code>".</p>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-bold-span">WebVTT cue bold span<a class="self-link" href="#webvtt-cue-bold-span"></a></dfn> consists of a <a data-link-type="dfn" href="#webvtt-cue-span-start-tag">WebVTT cue span start tag</a> "<code>b</code>" that disallows an annotation, <a data-link-type="dfn" href="#webvtt-cue-internal-text">WebVTT cue internal text</a> representing the
     boldened text, and a <a data-link-type="dfn" href="#webvtt-cue-span-end-tag">WebVTT cue span end tag</a> "<code>b</code>".</p>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-underline-span">WebVTT cue underline span<a class="self-link" href="#webvtt-cue-underline-span"></a></dfn> consists of a <a data-link-type="dfn" href="#webvtt-cue-span-start-tag">WebVTT cue span start tag</a> "<code>u</code>" that disallows an annotation, <a data-link-type="dfn" href="#webvtt-cue-internal-text">WebVTT cue internal text</a> representing the
     underlined text, and a <a data-link-type="dfn" href="#webvtt-cue-span-end-tag">WebVTT cue span end tag</a> "<code>u</code>".</p>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-ruby-span">WebVTT cue ruby span<a class="self-link" href="#webvtt-cue-ruby-span"></a></dfn> consists of the following components, in the order
     given:</p>
      <ol>
       <li>A <a data-link-type="dfn" href="#webvtt-cue-span-start-tag">WebVTT cue span start tag</a> "<code>ruby</code>" that disallows an annotation.
       <li>
         One or more occurrences of the following group of components, in the order given: 
        <ol>
         <li><a data-link-type="dfn" href="#webvtt-cue-internal-text">WebVTT cue internal text</a>, representing the ruby base.
         <li>A <a data-link-type="dfn" href="#webvtt-cue-span-start-tag">WebVTT cue span start tag</a> "<code>rt</code>" that disallows an annotation.
         <li>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-ruby-text-span">WebVTT cue ruby text span<a class="self-link" href="#webvtt-cue-ruby-text-span"></a></dfn>: <a data-link-type="dfn" href="#webvtt-cue-internal-text">WebVTT cue internal text</a>, representing
        the ruby text component of the ruby annotation.
         <li>A <a data-link-type="dfn" href="#webvtt-cue-span-end-tag">WebVTT cue span end tag</a> "<code>rt</code>". If this is the last occurrence of
        this group of components in the <a data-link-type="dfn" href="#webvtt-cue-ruby-span">WebVTT cue ruby span</a>, then this last end tag string
        may be omitted.
        </ol>
       <li>If the last end tag string was not omitted: Optionally, a <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line
      terminator</a>.
       <li>If the last end tag string was not omitted: Zero or more U+0020 SPACE characters or U+0009
      CHARACTER TABULATION (tab) characters, each optionally followed by a <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT line
      terminator</a>.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-span-end-tag">WebVTT cue span end tag</a> "<code>ruby</code>".
      </ol>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-voice-span">WebVTT cue voice span<a class="self-link" href="#webvtt-cue-voice-span"></a></dfn> consists of the following components, in the order
     given:</p>
      <ol>
       <li>A <a data-link-type="dfn" href="#webvtt-cue-span-start-tag">WebVTT cue span start tag</a> "<code>v</code>" that requires an annotation; the
      annotation represents the name of the voice.
       <li><a data-link-type="dfn" href="#webvtt-cue-internal-text">WebVTT cue internal text</a>.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-span-end-tag">WebVTT cue span end tag</a> "<code>v</code>". If this <a data-link-type="dfn" href="#webvtt-cue-voice-span">WebVTT cue voice span</a> is
      the only <a data-link-type="dfn" href="#webvtt-cue-components">component</a> of its <a data-link-type="dfn" href="#webvtt-cue-text0">WebVTT cue text</a> sequence, then the end tag may be omitted for brevity.
      </ol>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-language-span">WebVTT cue language span<a class="self-link" href="#webvtt-cue-language-span"></a></dfn> consists of the following components, in the order
     given:</p>
      <ol>
       <li>A <a data-link-type="dfn" href="#webvtt-cue-span-start-tag">WebVTT cue span start tag</a> "<code>lang</code>" that requires an annotation; the
      annotation represents the language of the following component, and must be a valid BCP 47
      language tag. <a data-link-type="biblio" href="#biblio-bcp47">[BCP47]</a>
       <li><a data-link-type="dfn" href="#webvtt-cue-internal-text">WebVTT cue internal text</a>.
       <li>A <a data-link-type="dfn" href="#webvtt-cue-span-end-tag">WebVTT cue span end tag</a> "<code>lang</code>".
      </ol>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-span-start-tag">WebVTT cue span start tag<a class="self-link" href="#webvtt-cue-span-start-tag"></a></dfn> has a <var>tag name</var> and either 
     requires or disallows an annotation, and consists of the following components, in the
     order given:</p>
      <ol>
       <li>A U+003C LESS-THAN SIGN character (&lt;).
       <li>The <var>tag name</var>.
       <li>
         Zero or more occurrences of the following sequence: 
        <ol>
         <li>U+002E FULL STOP character (.)
         <li>One or more characters other than U+0009 CHARACTER TABULATION (tab) characters, U+000A
        LINE FEED (LF) characters, U+000D CARRIAGE RETURN (CR) characters, U+0020 SPACE characters,
        U+0026 AMPERSAND characters (&amp;), U+003C LESS-THAN SIGN characters (&lt;), U+003E
        GREATER-THAN SIGN characters (>), and U+002E FULL STOP characters (.), representing a class
        that describes the cue span’s significance.
        </ol>
       <li>
        <p>If the start tag requires an annotation: a U+0020 SPACE character or a U+0009 CHARACTER
       TABULATION (tab) character, followed by one or more of the following components, the
       concatenation of their representations having a value that contains at least one character
       other than U+0020 SPACE and U+0009 CHARACTER TABULATION (tab) characters:</p>
        <ul>
         <li><a data-link-type="dfn" href="#webvtt-cue-span-start-tag-annotation-text">WebVTT cue span start tag annotation text</a>, representing the text of the
        annotation.
         <li>A <a data-link-type="dfn" href="#webvtt-cue-amp-escape">WebVTT cue amp escape</a>, representing a "&amp;" character in the text of the
        annotation.
         <li>A <a data-link-type="dfn" href="#webvtt-cue-lt-escape">WebVTT cue lt escape</a>, representing a "&lt;" character in the text of the
        annotation.
         <li>A <a data-link-type="dfn" href="#webvtt-cue-gt-escape">WebVTT cue gt escape</a>, representing a ">" character in the text of the
        annotation.
         <li>A <a data-link-type="dfn" href="#webvtt-cue-lrm-escape">WebVTT cue lrm escape</a>, representing a U+200E LEFT-TO-RIGHT MARK Unicode
        bidirectional formatting character in the text of the cue.
         <li>A <a data-link-type="dfn" href="#webvtt-cue-rlm-escape">WebVTT cue rlm escape</a>, representing a U+200F RIGHT-TO-LEFT MARK Unicode
        bidirectional formatting character in the text of the cue.
         <li>A <a data-link-type="dfn" href="#webvtt-cue-nbsp-escape">WebVTT cue nbsp escape</a>, representing a U+00A0 NO-BREAK SPACE character in the
        text of the cue.
        </ul>
       <li>A U+003E GREATER-THAN SIGN character (>).
      </ol>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-span-end-tag">WebVTT cue span end tag<a class="self-link" href="#webvtt-cue-span-end-tag"></a></dfn> has a <var>tag name</var> and consists of the following
     components, in the order given:</p>
      <ol>
       <li>A U+003C LESS-THAN SIGN character (&lt;).
       <li>U+002F SOLIDUS character (/).
       <li>The <var>tag name</var>.
       <li>A U+003E GREATER-THAN SIGN character (>).
      </ol>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-timestamp">WebVTT cue timestamp<a class="self-link" href="#webvtt-cue-timestamp"></a></dfn> consists of a U+003C LESS-THAN SIGN character (&lt;),
     followed by a <a data-link-type="dfn" href="#webvtt-timestamp">WebVTT timestamp</a> representing the time that the given point in the cue
     becomes active, followed by a U+003E GREATER-THAN SIGN character (>). The time represented by
     the <a data-link-type="dfn" href="#webvtt-timestamp">WebVTT timestamp</a> must be greater than the times represented by any previous <a data-link-type="dfn" href="#webvtt-cue-timestamp">WebVTT cue timestamps</a> in the cue, as well as greater than the
     cue’s start time offset, and less than the cue’s end time offset.</p>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-text-span">WebVTT cue text span<a class="self-link" href="#webvtt-cue-text-span"></a></dfn> consists of one or more characters other than U+000A LINE
     FEED (LF) characters, U+000D CARRIAGE RETURN (CR) characters, U+0026 AMPERSAND characters
     (&amp;), and U+003C LESS-THAN SIGN characters (&lt;).</p>
      <p><dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-span-start-tag-annotation-text">WebVTT cue span start tag annotation text<a class="self-link" href="#webvtt-cue-span-start-tag-annotation-text"></a></dfn> consists of one or more characters
     other than U+000A LINE FEED (LF) characters, U+000D CARRIAGE RETURN (CR) characters, U+0026
     AMPERSAND characters (&amp;), and U+003E GREATER-THAN SIGN characters (>).</p>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-amp-escape">WebVTT cue amp escape<a class="self-link" href="#webvtt-cue-amp-escape"></a></dfn> is the five character string
     "<code>&amp;amp;</code>".</p>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-lt-escape">WebVTT cue lt escape<a class="self-link" href="#webvtt-cue-lt-escape"></a></dfn> is the four character string "<code>&amp;lt;</code>".</p>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-gt-escape">WebVTT cue gt escape<a class="self-link" href="#webvtt-cue-gt-escape"></a></dfn> is the four character string "<code>&amp;gt;</code>".</p>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-lrm-escape">WebVTT cue lrm escape<a class="self-link" href="#webvtt-cue-lrm-escape"></a></dfn> is the five character string
     "<code>&amp;lrm;</code>".</p>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-rlm-escape">WebVTT cue rlm escape<a class="self-link" href="#webvtt-cue-rlm-escape"></a></dfn> is the five character string
     "<code>&amp;rlm;</code>".</p>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-nbsp-escape">WebVTT cue nbsp escape<a class="self-link" href="#webvtt-cue-nbsp-escape"></a></dfn> is the six character string
     "<code>&amp;nbsp;</code>".</p>
     </section>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.3" id="webvtt-region-definition"><span class="secno">4.3. </span><span class="content">WebVTT region definition</span><a class="self-link" href="#webvtt-region-definition"></a></h3>
     <p>A <a data-link-type="dfn" href="#webvtt-cue-settings-list">WebVTT cue settings list</a> may contain a reference to a <a data-link-type="dfn" href="#webvtt-region">WebVTT region</a>. To
    define a region, a <a data-link-type="dfn" href="#webvtt-region-metadata-header">WebVTT region metadata header</a> is specified.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-region-metadata-header">WebVTT region metadata header<a class="self-link" href="#webvtt-region-metadata-header"></a></dfn> is a special kind of <a data-link-type="dfn" href="#webvtt-metadata-header">WebVTT metadata header</a> where both of the following apply:</p>
     <ul>
      <li>The <a data-link-type="dfn" href="#webvtt-metadata-header-name">WebVTT metadata header name</a> is the string "<code>Region</code>".
      <li>The <a data-link-type="dfn" href="#webvtt-metadata-header-value">WebVTT metadata header value</a> is a <a data-link-type="dfn" href="#webvtt-region-setting-list">WebVTT region setting list</a>.
     </ul>
     <p>The <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-region-setting-list">WebVTT region setting list<a class="self-link" href="#webvtt-region-setting-list"></a></dfn> of a <a data-link-type="dfn" href="#webvtt-region-metadata-header">WebVTT region metadata header</a> consists
    of zero or more of the following components, in any order, separated from each other by one or
    more U+0020 SPACE characters or U+0009 CHARACTER TABULATION (tab) characters. Each component
    must not be included more than once per <a data-link-type="dfn" href="#webvtt-region-setting-list">WebVTT region setting list</a> string.</p>
     <ul>
      <li>A <a data-link-type="dfn" href="#webvtt-region-identifier-setting">WebVTT region identifier setting</a>.
      <li>A <a data-link-type="dfn" href="#webvtt-region-width-setting">WebVTT region width setting</a>.
      <li>A <a data-link-type="dfn" href="#webvtt-region-lines-setting">WebVTT region lines setting</a>.
      <li>A <a data-link-type="dfn" href="#webvtt-region-anchor-setting">WebVTT region anchor setting</a>.
      <li>A <a data-link-type="dfn" href="#webvtt-region-viewport-anchor-setting">WebVTT region viewport anchor setting</a>.
      <li>A <a data-link-type="dfn" href="#webvtt-region-scroll-setting">WebVTT region scroll setting</a>.
     </ul>
     <p class="note" role="note">The <a data-link-type="dfn" href="#webvtt-region-setting-list">WebVTT region setting list</a> gives configuration options regarding the
    dimensions, positioning and anchoring of the region. For example, it allows a group of cues
    within a region to be anchored in the center of the region and the center of the video viewport.
    In this example, when the font size grows, the region grows uniformly in all directions from the
    center.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-region-identifier-setting">WebVTT region identifier setting<a class="self-link" href="#webvtt-region-identifier-setting"></a></dfn> consists of the following components, in the
    order given:</p>
     <ol>
      <li>
       <p>The string "<code>id</code>".</p>
      <li>
       <p>A U+003D EQUALS SIGN character (=).</p>
      <li>
       <p>An arbitrary string of one or more characters other than U+0020 SPACE or U+0009
     CHARACTER TABULATION character. The string must not contain the substring "<code>--></code>"
     (U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E GREATER-THAN SIGN).</p>
     </ol>
     <p>A <a data-link-type="dfn" href="#webvtt-region-identifier-setting">WebVTT region identifier setting</a> must be unique amongst all the <a data-link-type="dfn" href="#webvtt-region-identifier-setting">WebVTT region identifier settings</a> of all <a data-link-type="dfn" href="#webvtt-region">WebVTT regions</a> of a <a data-link-type="dfn" href="#webvtt-file">WebVTT file</a>.</p>
     <p class="note" role="note">The <a data-link-type="dfn" href="#webvtt-region-identifier-setting">WebVTT region identifier setting</a> gives a name to the region so it
    can be referenced by the cues that belong to the region.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-region-width-setting">WebVTT region width setting<a class="self-link" href="#webvtt-region-width-setting"></a></dfn> consists of the following components, in the order
    given:</p>
     <ol>
      <li>
       <p>The string "<code>width</code>".</p>
      <li>
       <p>A U+003D EQUALS SIGN character (=).</p>
      <li>
       <p>A <a data-link-type="dfn" href="#webvtt-percentage">WebVTT percentage</a>.</p>
     </ol>
     <p class="note" role="note">The <a data-link-type="dfn" href="#webvtt-region-width-setting">WebVTT region width setting</a> provides a fixed width as a percentage
    of the video width for the region into which cues are rendered and based on which alignment is
    calculated.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-region-lines-setting">WebVTT region lines setting<a class="self-link" href="#webvtt-region-lines-setting"></a></dfn> consists of the following components, in the order
    given:</p>
     <ol>
      <li>
       <p>The string "<code>lines</code>".</p>
      <li>
       <p>A U+003D EQUALS SIGN character (=).</p>
      <li>
       <p>One or more <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII digits</a>.</p>
     </ol>
     <p class="note" role="note">The <a data-link-type="dfn" href="#webvtt-region-lines-setting">WebVTT region lines setting</a> provides a fixed height as a number of
    lines for the region into which cues are rendered. As such, it defines the height of the roll-up
    region if it is a scroll region.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-region-anchor-setting">WebVTT region anchor setting<a class="self-link" href="#webvtt-region-anchor-setting"></a></dfn> consists of the following components, in the order
    given:</p>
     <ol>
      <li>
       <p>The string "<code>regionanchor</code>".</p>
      <li>
       <p>A U+003D EQUALS SIGN character (=).</p>
      <li>
       <p>A <a data-link-type="dfn" href="#webvtt-percentage">WebVTT percentage</a>.</p>
      <li>
       <p>A U+002C COMMA character (,).</p>
      <li>
       <p>A <a data-link-type="dfn" href="#webvtt-percentage">WebVTT percentage</a>.</p>
     </ol>
     <p class="note" role="note">The <a data-link-type="dfn" href="#webvtt-region-anchor-setting">WebVTT region anchor setting</a> provides a tuple of two percentages
    that specify the point within the region box that is fixed in location. The first percentage
    measures the x-dimension and the second percentage y-dimension from the top left corner of the
    region box. If no <a data-link-type="dfn" href="#webvtt-region-anchor-setting">WebVTT region anchor setting</a> is given, the anchor defaults to 0%, 100%
    (i.e. the bottom left corner).</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-region-viewport-anchor-setting">WebVTT region viewport anchor setting<a class="self-link" href="#webvtt-region-viewport-anchor-setting"></a></dfn> consists of the following components, in
    the order given:</p>
     <ol>
      <li>
       <p>The string "<code>viewportanchor</code>".</p>
      <li>
       <p>A U+003D EQUALS SIGN character (=).</p>
      <li>
       <p>A <a data-link-type="dfn" href="#webvtt-percentage">WebVTT percentage</a>.</p>
      <li>
       <p>A U+002C COMMA character (,).</p>
      <li>
       <p>A <a data-link-type="dfn" href="#webvtt-percentage">WebVTT percentage</a>.</p>
     </ol>
     <p class="note" role="note">The <a data-link-type="dfn" href="#webvtt-region-viewport-anchor-setting">WebVTT region viewport anchor setting</a> provides a tuple of two
    percentages that specify the point within the video viewport that the region anchor point is
    anchored to. The first percentage measures the x-dimension and the second percentage measures
    the y-dimension from the top left corner of the video viewport box. If no viewport anchor is
    given, it defaults to 0%, 100% (i.e. the bottom left corner).</p>
     <p class="note" role="note">For browsers, the region maps to an absolute positioned CSS box relative to the
    video viewport, i.e. there is a relative positioned box that represents the video viewport
    relative to which the regions are absolutely positioned. Overflow is hidden.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-region-scroll-setting">WebVTT region scroll setting<a class="self-link" href="#webvtt-region-scroll-setting"></a></dfn> consists of the following components, in the order
    given:</p>
     <ol>
      <li>
       <p>The string "<code>scroll</code>".</p>
      <li>
       <p>A U+003D EQUALS SIGN character (=).</p>
      <li>
       <p>The string "<code>up</code>".</p>
     </ol>
     <p class="note" role="note">The <a data-link-type="dfn" href="#webvtt-region-scroll-setting">WebVTT region scroll setting</a> specifies whether cues rendered into
    the region are allowed to move out of their initial rendering place and roll up, i.e. move
    towards the top of the video viewport. If the scroll setting is omitted, cues do not move from
    their rendered position.</p>
     <p class="note" role="note">Cues are added to a region one line at a time below existing cue lines. When an
    existing rendered cue line is removed, and it was above another already rendered cue line, that
    cue line moves into its space, thus scrolling in the given direction. If there is not enough
    space for a new cue line to be added to a region, the top-most cue line is pushed off the
    visible region (thus slowly becoming invisible as it moves into overflow:hidden). This
    eventually makes space for the new cue line and allows it to be added.</p>
     <p class="note" role="note">When there is no scroll direction, cue lines are added in the empty line closest
    to the line in the bottom of the region. If no empty line is available, the oldest line is
    replaced.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.4" id="webvtt-cue-settings"><span class="secno">4.4. </span><span class="content">WebVTT cue settings</span><a class="self-link" href="#webvtt-cue-settings"></a></h3>
     <p>A <a data-link-type="dfn" href="#webvtt-cue-settings-list">WebVTT cue settings list</a> consists of zero or more of the following settings. Each
    setting must not be included more than once per <a data-link-type="dfn" href="#webvtt-cue-settings-list">WebVTT cue settings list</a>.</p>
     <ul class="brief">
      <li>A <a data-link-type="dfn" href="#webvtt-vertical-text-cue-setting">WebVTT vertical text cue setting</a>.
      <li>A <a data-link-type="dfn" href="#webvtt-line-cue-setting">WebVTT line cue setting</a>.
      <li>A <a data-link-type="dfn" href="#webvtt-position-cue-setting">WebVTT position cue setting</a>.
      <li>A <a data-link-type="dfn" href="#webvtt-size-cue-setting">WebVTT size cue setting</a>.
      <li>A <a data-link-type="dfn" href="#webvtt-alignment-cue-setting">WebVTT alignment cue setting</a>.
      <li>A <a data-link-type="dfn" href="#webvtt-region-cue-setting">WebVTT region cue setting</a>.
     </ul>
     <p class="note" role="note">A <a data-link-type="dfn" href="#webvtt-cue-settings-list">WebVTT cue settings list</a> gives configuration options regarding the
    position and alignment of the cue box and the cue text within. For example, it allows a cue box
    to be aligned to the left or positioned at the top right with the cue text within middle
    aligned.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-vertical-text-cue-setting">WebVTT vertical text cue setting<a class="self-link" href="#webvtt-vertical-text-cue-setting"></a></dfn> is a <a data-link-type="dfn" href="#webvtt-cue-setting">WebVTT cue setting</a> that consists of
    the following components, in the order given:</p>
     <ol>
      <li>The string "<code>vertical</code>" as the <a data-link-type="dfn" href="#webvtt-cue-setting-name">WebVTT cue setting name</a>.
      <li>
       <p>A U+003A COLON character (:).</p>
      <li>One of the following strings as the <a data-link-type="dfn" href="#webvtt-cue-setting-value">WebVTT cue setting value</a>: "<code>rl</code>",
     "<code>lr</code>".
     </ol>
     <p class="note" role="note">A <a data-link-type="dfn" href="#webvtt-vertical-text-cue-setting">WebVTT vertical text cue setting</a> configures the cue to use vertical
    text layout rather than horizontal text layout. Vertical text layout is sometimes used in
    Japanese, for example. The default is horizontal layout.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-line-cue-setting">WebVTT line cue setting<a class="self-link" href="#webvtt-line-cue-setting"></a></dfn> consists of the following components, in the order
    given:</p>
     <ol>
      <li>
       <p>The string "<code>line</code>" as the <a data-link-type="dfn" href="#webvtt-cue-setting-name">WebVTT cue setting name</a>.</p>
      <li>
       <p>A U+003A COLON character (:).</p>
      <li>
        As the <a data-link-type="dfn" href="#webvtt-cue-setting-value">WebVTT cue setting value</a>: 
       <ol>
        <li>
          an offset value, either: 
         <dl>
          <dt>To represent a specific offset relative to the video viewport
          <dd>
           <p>A <a data-link-type="dfn" href="#webvtt-percentage">WebVTT percentage</a>.</p>
          <dt>Or to represent a line number
          <dd>
           <ol>
            <li>Optionally a U+002D HYPHEN-MINUS character (-).
            <li>One or more <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII digits</a>.
           </ol>
         </dl>
        <li>
          An optional alignment value consisting of the following components: 
         <ol>
          <li>A U+002C COMMA character (,).
          <li>One of the following strings: "<code>start</code>", "<code>middle</code>",
         "<code>end</code>"
         </ol>
       </ol>
     </ol>
     <p class="note" role="note">A <a data-link-type="dfn" href="#webvtt-line-cue-setting">WebVTT line cue setting</a> configures the offset of the cue box from the
    video viewport’s edge in the direction opposite to the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">writing direction</a>. For horizontal cues, this is the vertical offset from the top
    of the video viewport. The offset is for the <a data-link-type="dfn" href="#webvtt-cue-line-start-alignment">start</a>, <a data-link-type="dfn" href="#webvtt-cue-line-middle-alignment">middle</a>, or <a data-link-type="dfn" href="#webvtt-cue-line-end-alignment">end</a> of the cue box, depending on the <a data-link-type="dfn" href="#webvtt-cue-line-alignment">WebVTT cue
    line alignment</a> value - <a data-link-type="dfn" href="#webvtt-cue-line-start-alignment">start</a> by default. The
    offset can be given either as a percentage of the video dimension or as a line number. Line
    numbers are based on the size of the first line of the cue. Positive line numbers count from the
    start of the video viewport (the first line is numbered 0), negative line numbers from the end
    of the viewport (the last line is numbered −1).</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-position-cue-setting">WebVTT position cue setting<a class="self-link" href="#webvtt-position-cue-setting"></a></dfn> consists of the following components, in the order
    given:</p>
     <ol>
      <li>
       <p>The string "<code>position</code>" as the <a data-link-type="dfn" href="#webvtt-cue-setting-name">WebVTT cue setting name</a>.</p>
      <li>
       <p>A U+003A COLON character (:).</p>
      <li>
        As the <a data-link-type="dfn" href="#webvtt-cue-setting-value">WebVTT cue setting value</a>: 
       <ol>
        <li>a position value consisting of: a <a data-link-type="dfn" href="#webvtt-percentage">WebVTT percentage</a>.
        <li>
          an optional alignment value consisting of: 
         <ol>
          <li>A U+002C COMMA character (,).
          <li>One of the following strings: "<code>start</code>", "<code>middle</code>",
         "<code>end</code>"
         </ol>
       </ol>
     </ol>
     <p class="note" role="note">A <a data-link-type="dfn" href="#webvtt-position-cue-setting">WebVTT position cue setting</a> configures the indent position of the <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a> in the direction orthogonal to the <a data-link-type="dfn" href="#webvtt-line-cue-setting">WebVTT line cue
    setting</a>. For horizontal cues, this is the horizontal position. The cue position is given as
    a percentage of the video viewport. The positioning is for the <a data-link-type="dfn" href="#webvtt-cue-position-start-alignment">start</a>, <a data-link-type="dfn" href="#webvtt-cue-position-middle-alignment">middle</a>, or <a data-link-type="dfn" href="#webvtt-cue-position-end-alignment">end</a> of the cue box, depending on the cue’s <a data-link-type="dfn" href="#cue-computed-position-alignment">computed position alignment</a>, which is overridden by
    the <a data-link-type="dfn" href="#webvtt-position-cue-setting">WebVTT position cue setting</a>.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-size-cue-setting">WebVTT size cue setting<a class="self-link" href="#webvtt-size-cue-setting"></a></dfn> consists of the following components, in the order
    given:</p>
     <ol>
      <li>
       <p>The string "<code>size</code>" as the <a data-link-type="dfn" href="#webvtt-cue-setting-name">WebVTT cue setting name</a>.</p>
      <li>
       <p>A U+003A COLON character (:).</p>
      <li>
       <p>As the <a data-link-type="dfn" href="#webvtt-cue-setting-value">WebVTT cue setting value</a>: a <a data-link-type="dfn" href="#webvtt-percentage">WebVTT percentage</a>.</p>
     </ol>
     <p class="note" role="note">A <a data-link-type="dfn" href="#webvtt-size-cue-setting">WebVTT size cue setting</a> configures the size of the <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a> in the same direction as the <a data-link-type="dfn" href="#webvtt-position-cue-setting">WebVTT position cue setting</a>. For horizontal
    cues, this is the width of the <a data-link-type="dfn" href="#webvtt-cue-box">cue box</a>. It is given as a
    percentage of the width of the viewport.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-alignment-cue-setting">WebVTT alignment cue setting<a class="self-link" href="#webvtt-alignment-cue-setting"></a></dfn> consists of the following components, in the order
    given:</p>
     <ol>
      <li>
       <p>The string "<code>align</code>" as the <a data-link-type="dfn" href="#webvtt-cue-setting-name">WebVTT cue setting name</a>.</p>
      <li>
       <p>A U+003A COLON character (:).</p>
      <li>One of the following strings as the <a data-link-type="dfn" href="#webvtt-cue-setting-value">WebVTT cue setting value</a>: "<code>start</code>",
     "<code>middle</code>", "<code>end</code>", "<code>left</code>", "<code>right</code>"
     </ol>
     <p class="note" role="note">A <a data-link-type="dfn" href="#webvtt-alignment-cue-setting">WebVTT alignment cue setting</a> configures the alignment of the text
    within the cue. The keywords are relative to the text direction; for left-to-right English text,
    "<code>start</code>" means left-aligned.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-region-cue-setting">WebVTT region cue setting<a class="self-link" href="#webvtt-region-cue-setting"></a></dfn> consists of the following components, in the order
    given:</p>
     <ol>
      <li>
       <p>The string "<code>region</code>" as the <a data-link-type="dfn" href="#webvtt-cue-setting-name">WebVTT cue setting name</a>.</p>
      <li>
       <p>A U+003A COLON character (:).</p>
      <li>
       <p>As the <a data-link-type="dfn" href="#webvtt-cue-setting-value">WebVTT cue setting value</a>: an arbitrary string of one or more characters
     other than U+0020 SPACE or U+0009 CHARACTER TABULATION character. The string must not contain
     the substring "<code>--></code>" (U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E GREATER-THAN
     SIGN).</p>
     </ol>
     <p class="note" role="note">A <a data-link-type="dfn" href="#webvtt-region-cue-setting">WebVTT region cue setting</a> configures a cue to become part of a region
    by referencing the region’s identifier unless the cue has a <a data-link-type="dfn" href="#webvtt-vertical-text-cue-setting">"vertical"</a>, <a data-link-type="dfn" href="#webvtt-line-cue-setting">"line"</a> or <a data-link-type="dfn" href="#webvtt-size-cue-setting">"size"</a> cue setting. If a cue is part of a region, its cue settings for <a data-link-type="dfn" href="#webvtt-position-cue-setting">"position"</a> and <a data-link-type="dfn" href="#webvtt-alignment-cue-setting">"align"</a> are applied to the line boxes in the cue relative to the region box.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.5" id="properties-of-cue-sequences"><span class="secno">4.5. </span><span class="content">Properties of cue sequences</span><a class="self-link" href="#properties-of-cue-sequences"></a></h3>
     <section>
      <h4 class="heading settled" data-level="4.5.1" id="webvtt-file-using-only-nested-cues"><span class="secno">4.5.1. </span><span class="content">WebVTT file using only nested cues</span><a class="self-link" href="#webvtt-file-using-only-nested-cues"></a></h4>
      <p>A <a data-link-type="dfn" href="#webvtt-file">WebVTT file</a> whose cues all follow the following rules is said to be a <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-file-using-only-nested-cues0">WebVTT
     file using only nested cues<a class="self-link" href="#webvtt-file-using-only-nested-cues0"></a></dfn>:</p>
      <p>given any two cues <var>cue1</var> and <var>cue2</var> with start and end time offsets <var>(x1, y1)</var> and <var>(x2, y2)</var> respectively,</p>
      <ul>
       <li>either <var>cue1</var> lies fully within <var>cue2</var>, i.e. <var>x1 >= x2</var> and <var>y1 &lt;= y2</var>
       <li>or <var>cue1</var> fully contains <var>cue2</var>, i.e. <var>x1 &lt;= x2</var> and <var>y1
      >= y2</var>.
      </ul>
      <div class="example" id="example-59cb7886">
       <a class="self-link" href="#example-59cb7886"></a> 
       <p>The following example matches this definition:</p>
<pre>WEBVTT
00:00.000 --> 01:24.000
Introduction

00:00.000 --> 00:44.000
Topics

00:44.000 --> 01:19.000
Presenters

01:24.000 --> 05:00.000
Scrolling Effects

01:35.000 --> 03:00.000
Achim’s Demo

03:00.000 --> 05:00.000
Timeline Panel</pre>
       <p>Notice how you can express the cues in this WebVTT file as a tree structure:</p>
       <ul>
        <li>
          WebVTT file 
         <ul>
          <li>
            Introduction 
           <ul>
            <li>Topics
            <li>Presenters
           </ul>
          <li>
            Scrolling Effects 
           <ul>
            <li>Achim’s Demo
            <li>Timeline Panel
           </ul>
         </ul>
       </ul>
       <p>If the file has cues that can’t be expressed in this fashion, then they don’t match the
      definition of a <a data-link-type="dfn" href="#webvtt-file-using-only-nested-cues0">WebVTT file using only nested cues</a>. For example:</p>
<pre>WEBVTT
00:00.000 --> 01:00.000
The First Minute

00:30.000 --> 01:30.000
The Final Minute</pre>
       <p>In this ninety-second example, the two cues partly overlap, with the first ending before
      the second ends and the second starting before the first ends. This therefore is not a <a data-link-type="dfn" href="#webvtt-file-using-only-nested-cues0">WebVTT file using only nested cues</a>.</p>
      </div>
     </section>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.6" id="types-of-webvtt-files"><span class="secno">4.6. </span><span class="content">Types of WebVTT files</span><a class="self-link" href="#types-of-webvtt-files"></a></h3>
     <p>The syntax definition of WebVTT files allows authoring of a wide variety of WebVTT files with
    a mix of cues. However, only a small subset of WebVTT file types are typically authored.</p>
     <p>Conformance checkers, when validating <a data-link-type="dfn" href="#webvtt">WebVTT</a> files, may offer to restrict syntax
    checking for validating these types.</p>
     <section>
      <h4 class="heading settled" data-level="4.6.1" id="webvtt-file-using-metadata-content"><span class="secno">4.6.1. </span><span class="content">WebVTT file using metadata content</span><a class="self-link" href="#webvtt-file-using-metadata-content"></a></h4>
      <p>A <a data-link-type="dfn" href="#webvtt-file">WebVTT file</a> whose cues all have a <a data-link-type="dfn" href="#cue-payload">cue payload</a> that is <a data-link-type="dfn" href="#webvtt-metadata-text0">WebVTT metadata
     text</a> is said to be a <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-file-using-metadata-content0">WebVTT file using metadata content<a class="self-link" href="#webvtt-file-using-metadata-content0"></a></dfn>.</p>
     </section>
     <section>
      <h4 class="heading settled" data-level="4.6.2" id="webvtt-file-using-chapter-title-text"><span class="secno">4.6.2. </span><span class="content">WebVTT file using chapter title text</span><a class="self-link" href="#webvtt-file-using-chapter-title-text"></a></h4>
      <p><dfn data-dfn-type="dfn" data-noexport="" id="webvtt-chapter-title-text">WebVTT chapter title text<a class="self-link" href="#webvtt-chapter-title-text"></a></dfn> is <a data-link-type="dfn" href="#webvtt-cue-text0">WebVTT cue text</a> that makes use only of zero
     or more of the following components, each optionally separated from the next by a <a data-link-type="dfn" href="#webvtt-line-terminator">WebVTT
     line terminator</a>:</p>
      <ul>
       <li><a data-link-type="dfn" href="#webvtt-cue-text-span">WebVTT cue text span</a>
       <li><a data-link-type="dfn" href="#webvtt-cue-amp-escape">WebVTT cue amp escape</a>
       <li><a data-link-type="dfn" href="#webvtt-cue-lt-escape">WebVTT cue lt escape</a>
       <li><a data-link-type="dfn" href="#webvtt-cue-gt-escape">WebVTT cue gt escape</a>
       <li><a data-link-type="dfn" href="#webvtt-cue-lrm-escape">WebVTT cue lrm escape</a>
       <li><a data-link-type="dfn" href="#webvtt-cue-rlm-escape">WebVTT cue rlm escape</a>
       <li><a data-link-type="dfn" href="#webvtt-cue-nbsp-escape">WebVTT cue nbsp escape</a>
      </ul>
      <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-file-using-chapter-title-text0">WebVTT file using chapter title text<a class="self-link" href="#webvtt-file-using-chapter-title-text0"></a></dfn> is a <a data-link-type="dfn" href="#webvtt-file-using-only-nested-cues0">WebVTT file using only nested
     cues</a> whose cues all have a <a data-link-type="dfn" href="#cue-payload">cue payload</a> that is <a data-link-type="dfn" href="#webvtt-chapter-title-text">WebVTT chapter title text</a>.</p>
     </section>
     <section>
      <h4 class="heading settled" data-level="4.6.3" id="webvtt-file-using-cue-text"><span class="secno">4.6.3. </span><span class="content">WebVTT file using cue text</span><a class="self-link" href="#webvtt-file-using-cue-text"></a></h4>
      <p>A <a data-link-type="dfn" href="#webvtt-file">WebVTT file</a> whose cues all have a <a data-link-type="dfn" href="#cue-payload">cue payload</a> that is <a data-link-type="dfn" href="#webvtt-cue-text0">WebVTT cue text</a> is said to be a <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-file-using-cue-text0">WebVTT file using cue text<a class="self-link" href="#webvtt-file-using-cue-text0"></a></dfn>.</p>
     </section>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="5" id="parsing"><span class="secno">5. </span><span class="content">Parsing</span><a class="self-link" href="#parsing"></a></h2>
    <section>
     <h3 class="heading settled" data-level="5.1" id="webvtt-file-parsing"><span class="secno">5.1. </span><span class="content">WebVTT file parsing</span><a class="self-link" href="#webvtt-file-parsing"></a></h3>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-parser">WebVTT parser<a class="self-link" href="#webvtt-parser"></a></dfn>, given an input byte stream and a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-list-of-cues">text track list of cues</a> <var>output</var>, must decode the byte stream using the <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode">UTF-8
    decode</a> algorithm, and then must parse the resulting string according to the <a data-link-type="dfn" href="#webvtt-parser-algorithm">WebVTT parser
    algorithm</a> below. This results in <a data-link-type="dfn" href="#webvtt-cue">WebVTT cues</a> being added to <var>output</var>. <a data-link-type="biblio" href="#biblio-rfc3629">[RFC3629]</a></p>
     <p>A <a data-link-type="dfn" href="#webvtt-parser">WebVTT parser</a>, specifically its conversion and parsing steps, is typically run
    asynchronously, with the input byte stream being updated incrementally as the resource is
    downloaded; this is called an <dfn data-dfn-type="dfn" data-noexport="" id="incremental-webvtt-parser">incremental WebVTT parser<a class="self-link" href="#incremental-webvtt-parser"></a></dfn>.</p>
     <p>A <a data-link-type="dfn" href="#webvtt-parser">WebVTT parser</a> verifies a file signature before parsing the provided byte stream. If
    the stream lacks this WebVTT file signature, then the parser aborts.</p>
     <p>The <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-parser-algorithm">WebVTT parser algorithm<a class="self-link" href="#webvtt-parser-algorithm"></a></dfn> is as follows:</p>
     <ol>
      <li>
       <p>Let <var>input</var> be the string being parsed, after conversion to Unicode, and with the
      following transformations applied:</p>
       <ul>
        <li>
         <p>Replace all U+0000 NULL characters by U+FFFD REPLACEMENT CHARACTERs.</p>
        <li>
         <p>Replace each U+000D CARRIAGE RETURN U+000A LINE FEED (CRLF) character pair by a single
       U+000A LINE FEED (LF) character.</p>
        <li>
         <p>Replace all remaining U+000D CARRIAGE RETURN characters by U+000A LINE FEED (LF)
       characters.</p>
       </ul>
      <li>
       <p>Let <var>position</var> be a pointer into <var>input</var>, initially pointing at the
     start of the string. In an <a data-link-type="dfn" href="#incremental-webvtt-parser">incremental WebVTT parser</a>, when this algorithm (or further
     algorithms that it uses) moves the <var>position</var> pointer, the user agent must wait until
     appropriate further characters from the byte stream have been added to <var>input</var> before
     moving the pointer, so that the algorithm never reads past the end of the <var>input</var> string. Once the byte stream has ended, and all characters have been added to <var>input</var>,
     then the <var>position</var> pointer may, when so instructed by the algorithms, be moved past
     the end of <var>input</var>.</p>
      <li>Let <var>line</var> be a string variable. Unset the <var>already collected line</var> flag.
      <li>
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <em>not</em> U+000A LINE FEED
     (LF) characters. Let <var>line</var> be those characters, if any.</p>
      <li>
       <p>If <var>line</var> is less than six characters long, then abort these steps. The file
     does not start with the correct <a data-link-type="dfn" href="#webvtt-file">WebVTT file</a> signature and was therefore not successfully
     processed.</p>
      <li>
       <p>If <var>line</var> is exactly six characters long but does not exactly equal
     "<code>WEBVTT</code>", then abort these steps. The file does not start with the correct <a data-link-type="dfn" href="#webvtt-file">WebVTT file</a> signature and was therefore not successfully processed.</p>
      <li>
       <p>If <var>line</var> is more than six characters long but the first six characters do not
     exactly equal "<code>WEBVTT</code>", or the seventh character is neither a U+0020 SPACE
     character nor a U+0009 CHARACTER TABULATION (tab) character, then abort these steps. The file
     does not start with the correct <a data-link-type="dfn" href="#webvtt-file">WebVTT file</a> signature and was therefore not successfully
     processed.</p>
      <li>
       <p>If <var>position</var> is past the end of <var>input</var>, then abort these steps. The
     file was successfully processed, but it contains no useful data and so no <a data-link-type="dfn" href="#webvtt-cue">WebVTT cues</a> were added to <var>output</var>.</p>
      <li>
       <p>The character indicated by <var>position</var> is a U+000A LINE FEED (LF) character.
     Advance <var>position</var> to the next character in <var>input</var>.</p>
      <li>
       <p><i>Header</i>: <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <em>not</em> U+000A LINE FEED (LF) characters. Let <var>line</var> be those characters, if any.</p>
      <li>
       <p>Let <var>regions</var> be a <a data-link-type="dfn" href="#text-track-list-of-regions">text track list of regions</a>.</p>
      <li>
        <i>Metadata header loop</i>: If <var>line</var> is not the empty string, run the following
      substeps: 
       <ol>
        <li>
         <p><i>Metadata header creation</i>: Let <var>metadata</var> be a new <a data-link-type="dfn" href="#webvtt-metadata-header">WebVTT metadata
       header</a>.</p>
        <li>
         <p>Let <a data-link-type="dfn" href="#webvtt-metadata-header-name">metadata’s name</a> be the empty
       string.</p>
        <li>
         <p>Let <a data-link-type="dfn" href="#webvtt-metadata-header-value">metadata’s value</a> be the empty
       string.</p>
        <li>
         <p>If <var>line</var> contains the character ":" (A U+003A COLON), then set <a data-link-type="dfn" href="#webvtt-metadata-header-name">metadata’s name</a> to the substring of <var>line</var> before the first ":" character and <a data-link-type="dfn" href="#webvtt-metadata-header-value">metadata’s
       value</a> to the substring after this character.</p>
        <li>
         <p>If <a data-link-type="dfn" href="#webvtt-metadata-header-name">metadata’s name</a> equals "Region":</p>
         <ol>
          <li><i>Region creation</i>: Let <var>region</var> be a new <a data-link-type="dfn" href="#webvtt-region">WebVTT region</a>.
          <li>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-identifier">identifier</a> be the empty
         string.
          <li>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-width">width</a> be 100.
          <li>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-lines">lines</a> be 3.
          <li>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-anchor">anchor point</a> be
         (0,100).
          <li>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-viewport-anchor">viewport anchor
         point</a> be (0,100).
          <li>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-scroll">scroll value</a> be <a data-link-type="dfn" href="#webvtt-region-scroll-none">NONE</a>.
          <li><a data-link-type="dfn" href="#collect-webvtt-region-settings">Collect WebVTT region settings</a> from <a data-link-type="dfn" href="#webvtt-metadata-header-value">metadata’s value</a> using <var>region</var> for the results.
          <li><i>Region processing</i>: Construct a <a data-link-type="dfn" href="#webvtt-region-object">WebVTT Region Object</a> from <var>region</var>.
          <li>Append <var>region</var> to the <a data-link-type="dfn" href="#text-track-list-of-regions">text track list of regions</a> <var>regions</var>.
         </ol>
       </ol>
      <li>
       <p>If <var>position</var> is past the end of <var>input</var>, then jump to the step
     labeled <i>end</i>.</p>
      <li>
       <p>The character indicated by <var>position</var> is a U+000A LINE FEED (LF) character.
     Advance <var>position</var> to the next character in <var>input</var>.</p>
      <li>
       <p>If <var>line</var> contains the three-character substring "<code>--></code>" (U+002D
     HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E GREATER-THAN SIGN), then set the <var>already
     collected line</var> flag and jump to the step labeled <i>cue loop</i>.</p>
      <li>
       <p>If <var>line</var> is not the empty string, then jump back to the step labeled <i>header</i>.</p>
      <li>
       <p><i>Cue loop</i>: If the <var>already collected line</var> flag is set, then jump to the
     step labeled <var>cue creation</var>.</p>
      <li>
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#collect-a-sequence-of-characters">Collect a sequence of characters</a> that are U+000A LINE FEED (LF)
     characters.</p>
      <li>
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <em>not</em> U+000A LINE FEED
     (LF) characters. Let <var>line</var> be those characters, if any.</p>
      <li>
       <p>If <var>line</var> is the empty string, then jump to the step labeled <i>end</i>. (In
     such a case, <var>position</var> is also forcibly past the end of <var>input</var>.)</p>
      <li>
       <p><i>Cue creation</i>: Let <var>cue</var> be a new <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> and initialize it as
      follows:</p>
       <ol>
        <li>
         <p>Let <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-identifier">text track cue identifier</a> be the empty string.</p>
        <li>
         <p>Let <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-pause-on-exit-flag">text track cue pause-on-exit flag</a> be false.</p>
        <li>
         <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-region">WebVTT cue region</a> be null.</p>
        <li>
         <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> be <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a>.</p>
        <li>
         <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines flag</a> be true.</p>
        <li>
         <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-line">WebVTT cue line</a> be <a data-link-type="dfn" href="#webvtt-cue-line-automatic">auto</a>.</p>
        <li>
         <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-line-alignment">WebVTT cue line alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-line-start-alignment">start alignment</a>.</p>
        <li>
         <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-position">WebVTT cue position</a> be <a data-link-type="dfn" href="#webvtt-cue-automatic-position">auto</a>.</p>
        <li>
         <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-position-alignment">WebVTT cue position alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-position-automatic-alignment">auto</a>.</p>
        <li>
         <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-size">WebVTT cue size</a> be 100.</p>
        <li>
         <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-middle-alignment">middle alignment</a>.</p>
        <li>
         <p>Let <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-text">text track cue text</a> be the empty string.</p>
       </ol>
      <li>
       <p>If <var>line</var> contains the three-character substring "<code>--></code>" (U+002D
     HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E GREATER-THAN SIGN), then jump to the step labeled <i>timings</i> below.</p>
      <li>
       <p>Let <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-identifier">text track cue identifier</a> be <var>line</var>.</p>
      <li>
       <p>If <var>position</var> is past the end of <var>input</var>, then discard <var>cue</var> and jump to the step labeled <i>end</i>.</p>
      <li>
       <p>If the character indicated by <var>position</var> is a U+000A LINE FEED (LF) character,
     advance <var>position</var> to the next character in <var>input</var>.</p>
      <li>
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <em>not</em> U+000A LINE FEED
     (LF) characters. Let <var>line</var> be those characters, if any.</p>
      <li>
       <p>If <var>line</var> is the empty string, then discard <var>cue</var> and jump to the step
     labeled <i>cue loop</i>.</p>
      <li>
       <p><i>Timings</i>: Unset the <var>already collected line</var> flag.</p>
      <li>
       <p><a data-link-type="dfn" href="#collect-webvtt-cue-timings-and-settings">Collect WebVTT cue timings and settings</a> from <var>line</var> using <var>regions</var> for <var>cue</var>. If that fails, jump to the step labeled <i>bad
     cue</i>.</p>
      <li>
       <p>Let <var>cue text</var> be the empty string.</p>
      <li>
       <p><i>Cue text loop</i>: If <var>position</var> is past the end of <var>input</var>, then
     jump to the step labeled <i>cue text processing</i>.</p>
      <li>
       <p>If the character indicated by <var>position</var> is a U+000A LINE FEED (LF) character,
     advance <var>position</var> to the next character in <var>input</var>.</p>
      <li>
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <em>not</em> U+000A LINE FEED
     (LF) characters. Let <var>line</var> be those characters, if any.</p>
      <li>
       <p>If <var>line</var> is the empty string, then jump to the step labeled <i>cue text
     processing</i>.</p>
      <li>
       <p>If <var>line</var> contains the three-character substring "<code>--></code>" (U+002D
     HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E GREATER-THAN SIGN), then set the <var>already
     collected line</var> flag and jump to the step labeled <i>cue text processing</i>.</p>
      <li>
       <p>If <var>cue text</var> is not empty, append a U+000A LINE FEED (LF) character to <var>cue text</var>.</p>
      <li>
       <p>Let <var>cue text</var> be the concatenation of <var>cue text</var> and <var>line</var>.</p>
      <li>
       <p>Return to the step labeled <i>cue text loop</i>.</p>
      <li>
       <p><i>Cue text processing</i>: Let the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-text">text track cue text</a> of <var>cue</var> be <var>cue text</var>, and let the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#rules-for-extracting-the-chapter-title">rules for extracting the chapter title</a> be the <a data-link-type="dfn" href="#webvtt-rules-for-extracting-the-chapter-title0">WebVTT
     rules for extracting the chapter title</a>.</p>
      <li>
       <p>Add <var>cue</var> to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-list-of-cues">text track list of cues</a> <var>output</var>.</p>
      <li>
       <p>Jump to the step labeled <i>cue loop</i>.</p>
      <li>
       <p><i>Bad cue</i>: Discard <var>cue</var>.</p>
      <li>
       <p><i>Bad cue loop</i>: If <var>position</var> is past the end of <var>input</var>, then
     jump to the step labeled <i>end</i>.</p>
      <li>
       <p>If the character indicated by <var>position</var> is a U+000A LINE FEED (LF) character,
     advance <var>position</var> to the next character in <var>input</var>.</p>
      <li>
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <em>not</em> U+000A LINE FEED
     (LF) characters. Let <var>line</var> be those characters, if any.</p>
      <li>
       <p>If <var>line</var> contains the three-character substring "<code>--></code>" (U+002D
     HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E GREATER-THAN SIGN), then set the <var>already
     collected line</var> flag and jump to the step labeled <i>cue loop</i>.</p>
      <li>
       <p>If <var>line</var> is the empty string, then jump to the step labeled <i>cue
     loop</i>.</p>
      <li>
       <p>Otherwise, jump to the step labeled <i>bad cue loop</i>.</p>
      <li>
       <p><i>End</i>: The file has ended. Abort these steps. The <a data-link-type="dfn" href="#webvtt-parser">WebVTT parser</a> has
     finished. The file was successfully processed.</p>
     </ol>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.2" id="webvtt-region-settings-parsing"><span class="secno">5.2. </span><span class="content">WebVTT region settings parsing</span><a class="self-link" href="#webvtt-region-settings-parsing"></a></h3>
     <p>When the <a data-link-type="dfn" href="#webvtt-parser">WebVTT parser</a> requires that the user agent <dfn data-dfn-type="dfn" data-noexport="" id="collect-webvtt-region-settings">collect WebVTT region
    settings<a class="self-link" href="#collect-webvtt-region-settings"></a></dfn> from a string <var>input</var> for a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track">text track</a>, the user agent must run
    the following algorithm.</p>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-region-object">WebVTT region object<a class="self-link" href="#webvtt-region-object"></a></dfn> is a conceptual construct to represent a <a data-link-type="dfn" href="#webvtt-region">WebVTT
    region</a> that is used as a root node for <a data-link-type="dfn" href="#list-of-webvtt-node-objects">lists of
    WebVTT node objects</a>. This algorithm returns a list of <a data-link-type="dfn" href="#webvtt-region-object">WebVTT
    Region Objects</a>.</p>
     <ol>
      <li>
       <p>Let <var>settings</var> be the result of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#split-a-string-on-spaces">splitting <var>input</var> on spaces</a>.</p>
      <li>
        For each token <var>setting</var> in the list <var>settings</var>, run the following substeps: 
       <ol>
        <li>
         <p>If <var>setting</var> does not contain a U+003D EQUALS SIGN character (=), or if the
       first U+003D EQUALS SIGN character (=) in <var>setting</var> is either the first or last
       character of <var>setting</var>, then jump to the step labeled <i>next setting</i>.</p>
        <li>
         <p>Let <var>name</var> be the leading substring of <var>setting</var> up to and excluding
       the first U+003D EQUALS SIGN character (=) in that string.</p>
        <li>
         <p>Let <var>value</var> be the trailing substring of <var>setting</var> starting from the
       character immediately after the first U+003D EQUALS SIGN character (=) in that
       string.</p>
        <li>
         <p>Run the appropriate substeps that apply for the value of <var>name</var>, as follows:</p>
         <dl>
          <dt>
           <p>If <var>name</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for "<code>id</code>"</p>
          <dd>
           <p>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-identifier">identifier</a> be <var>value</var>.</p>
          <dt>
           <p>Otherwise if <var>name</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for
         "<code>width</code>"</p>
          <dd>
           <p>If <a data-link-type="dfn" href="#parse-a-percentage-string">parse a percentage string</a> from <var>value</var> returns a <var>percentage</var>, let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-width">WebVTT region width</a> be <var>percentage</var>.</p>
          <dt>Otherwise if <var>name</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for
         "<code>lines</code>"
          <dd>
           <ol>
            <li>
             <p>If <var>value</var> contains any characters other than <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII digits</a>, then
           jump to the step labeled <i>next setting</i>.</p>
            <li>
             <p>Interpret <var>value</var> as an integer, and let <var>number</var> be that
           number.</p>
            <li>
             <p>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-lines">WebVTT region lines</a> be <var>number</var>.</p>
           </ol>
          <dt>Otherwise if <var>name</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for
         "<code>regionanchor</code>"
          <dd>
           <ol>
            <li>
             <p>If <var>value</var> does not contain a U+002C COMMA character (,), then jump to
           the step labeled <i>next setting</i>.</p>
            <li>
             <p>Let <var>anchorX</var> be the leading substring of <var>value</var> up to and
           excluding the first U+002C COMMA character (,) in that string.</p>
            <li>
             <p>Let <var>anchorY</var> be the trailing substring of <var>value</var> starting from
           the character immediately after the first U+002C COMMA character (,) in that
           string.</p>
            <li>
             <p>If <a data-link-type="dfn" href="#parse-a-percentage-string">parse a percentage string</a> from <var>anchorX</var> or <a data-link-type="dfn" href="#parse-a-percentage-string">parse a
           percentage string</a> from <var>anchorY</var> don’t return a <var>percentage</var>, then
           jump to the step labeled <i>next setting</i>.</p>
            <li>
             <p>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-anchor">WebVTT region anchor
           point</a> be the tuple of the <var>percentage</var> values calculated from <var>anchorX</var> and <var>anchorY</var>.</p>
           </ol>
          <dt>Otherwise if <var>name</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for
         "<code>viewportanchor</code>"
          <dd>
           <ol>
            <li>
             <p>If <var>value</var> does not contain a U+002C COMMA character (,), then jump to
           the step labeled <i>next setting</i>.</p>
            <li>
             <p>Let <var>viewportanchorX</var> be the leading substring of <var>value</var> up to
           and excluding the first U+002C COMMA character (,) in that string.</p>
            <li>
             <p>Let <var>viewportanchorY</var> be the trailing substring of <var>value</var> starting from the character immediately after the first U+002C COMMA character (,) in
           that string.</p>
            <li>
             <p>If <a data-link-type="dfn" href="#parse-a-percentage-string">parse a percentage string</a> from <var>viewportanchorX</var> or <a data-link-type="dfn" href="#parse-a-percentage-string">parse a
           percentage string</a> from <var>viewportanchorY</var> don’t return a <var>percentage</var>, then jump to the step labeled <i>next setting</i>.</p>
            <li>
             <p>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-viewport-anchor">WebVTT region
           anchor point</a> be the tuple of the <var>percentage</var> values calculated from <var>viewportanchorX</var> and <var>viewportanchorY</var>.</p>
           </ol>
          <dt>Otherwise if <var>name</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for
         "<code>scroll</code>"
          <dd>
           <ol>
            <li>
             <p>If <var>value</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the string
           "<code>up</code>", then let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-scroll">scroll
           value</a> be "<a data-link-type="dfn" href="#webvtt-region-scroll-up">scroll up</a>".</p>
           </ol>
         </dl>
        <li><i>Next setting</i>: Continue to the next setting, if any.
       </ol>
     </ol>
     <p>The rules to <dfn data-dfn-type="dfn" data-noexport="" id="parse-a-percentage-string">parse a percentage string<a class="self-link" href="#parse-a-percentage-string"></a></dfn> are as follows. This will return either a
    number in the range 0..100, or nothing. If at any point the algorithm says that it "fails", this
    means that it is aborted at that point and returns nothing.</p>
     <ol>
      <li>
       <p>Let <var>input</var> be the string being parsed.</p>
      <li>
       <p>If <var>input</var> contains any characters other than U+0025 PERCENT SIGN characters
     (%), U+002E DOT characters (.) and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII digits</a>, then fail.</p>
      <li>
       <p>If <var>input</var> does not contain at least one <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII
     digit</a>, then fail.</p>
      <li>
       <p>If <var>input</var> contains more than one U+002E DOT character (.), then fail.</p>
      <li>
       <p>If any character in <var>input</var> other than the last character is a U+0025 PERCENT
     SIGN character (%), then fail.</p>
      <li>
       <p>If the last character in <var>input</var> is not a U+0025 PERCENT SIGN character (%),
     then fail.</p>
      <li>
       <p>Ignoring the trailing percent sign, interpret <var>input</var> as a real number. Let
     that number be the <var>percentage</var>.</p>
      <li>
       <p>If <var>percentage</var> is outside the range 0..100, then fail.</p>
      <li>
       <p>Return <var>percentage</var>.</p>
     </ol>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.3" id="webvtt-cue-timings-and-settings-parsing"><span class="secno">5.3. </span><span class="content">WebVTT cue timings and settings parsing</span><a class="self-link" href="#webvtt-cue-timings-and-settings-parsing"></a></h3>
     <p>When the algorithm above requires that the user agent <dfn data-dfn-type="dfn" data-noexport="" id="collect-webvtt-cue-timings-and-settings">collect WebVTT cue timings and
    settings<a class="self-link" href="#collect-webvtt-cue-timings-and-settings"></a></dfn> from a string <var>input</var> using a <a data-link-type="dfn" href="#text-track-list-of-regions">text track list of regions</a> <var>regions</var> for a <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> <var>cue</var>, the user agent must run the following
    algorithm.</p>
     <ol>
      <li>
       <p>Let <var>input</var> be the string being parsed.</p>
      <li>
       <p>Let <var>position</var> be a pointer into <var>input</var>, initially pointing at the
     start of the string.</p>
      <li>
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#skip-whitespace">Skip whitespace</a>.</p>
      <li>
       <p><a data-link-type="dfn" href="#collect-a-webvtt-timestamp">Collect a WebVTT timestamp</a>. If that algorithm fails, then abort these steps and
     return failure. Otherwise, let <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-start-time">text track cue start time</a> be the
     collected time.</p>
      <li>
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#skip-whitespace">Skip whitespace</a>.</p>
      <li>
       <p>If  the character
     at <var>position</var> is not a U+002D HYPHEN-MINUS character (-) then abort these steps and
     return failure. Otherwise, move <var>position</var> forwards one character.</p>
      <li>
       <p>If  the character
     at <var>position</var> is not a U+002D HYPHEN-MINUS character (-) then abort these steps and
     return failure. Otherwise, move <var>position</var> forwards one character.</p>
      <li>
       <p>If  the character
     at <var>position</var> is not a U+003E GREATER-THAN SIGN character (>) then abort these steps
     and return failure. Otherwise, move <var>position</var> forwards one character.</p>
      <li>
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#skip-whitespace">Skip whitespace</a>.</p>
      <li>
       <p><a data-link-type="dfn" href="#collect-a-webvtt-timestamp">Collect a WebVTT timestamp</a>. If that algorithm fails, then abort these steps and
     return failure. Otherwise, let <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-end-time">text track cue end time</a> be the collected
     time.</p>
      <li>
       <p>Let <var>remainder</var> be the trailing substring of <var>input</var> starting at <var>position</var>.</p>
      <li>
       <p><a data-link-type="dfn" href="#parse-the-webvtt-cue-settings">Parse the WebVTT cue settings</a> from <var>remainder</var> using <var>regions</var> for <var>cue</var>.</p>
     </ol>
     <p>When the user agent is to <dfn data-dfn-type="dfn" data-noexport="" id="parse-the-webvtt-cue-settings">parse the WebVTT cue settings<a class="self-link" href="#parse-the-webvtt-cue-settings"></a></dfn> from a string <var>input</var> using a <a data-link-type="dfn" href="#text-track-list-of-regions">text track list of regions</a> <var>regions</var> for a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue">text
    track cue</a> <var>cue</var>, the user agent must run the following steps:</p>
     <ol>
      <li>
       <p>Let <var>settings</var> be the result of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#split-a-string-on-spaces">splitting <var>input</var> on spaces</a>.</p>
      <li>
       <p>For each token <var>setting</var> in the list <var>settings</var>, run the following
      substeps:</p>
       <ol>
        <li>
         <p>If <var>setting</var> does not contain a U+003A COLON character (:), or if the first
       U+003A COLON character (:) in <var>setting</var> is either the first or last character of <var>setting</var>, then jump to the step labeled <i>next setting</i>.</p>
        <li>
         <p>Let <var>name</var> be the leading substring of <var>setting</var> up to and excluding
       the first U+003A COLON character (:) in that string.</p>
        <li>
         <p>Let <var>value</var> be the trailing substring of <var>setting</var> starting from the
       character immediately after the first U+003A COLON character (:) in that string.</p>
        <li>
         <p>Run the appropriate substeps that apply for the value of <var>name</var>, as follows:</p>
         <dl>
          <dt>If <var>name</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for "<code>region</code>"
          <dd>
           <ol>
            <li>
             <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-region">WebVTT cue region</a> be the last <a data-link-type="dfn" href="#webvtt-region">WebVTT region</a> in <var>regions</var> whose <a data-link-type="dfn" href="#webvtt-region-identifier">WebVTT region identifier</a> is <var>value</var>, if any, or
           null otherwise.</p>
           </ol>
          <dt>If <var>name</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for "<code>vertical</code>"
          <dd>
           <ol>
            <li>
             <p>If <var>value</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the string
           "<code>rl</code>", then let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> be <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-left-writing-direction">vertical growing
           left</a>.</p>
            <li>
             <p>Otherwise, if <var>value</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the string
           "<code>lr</code>", then let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> be <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-right-writing-direction">vertical growing
           right</a>.</p>
           </ol>
          <dt>If <var>name</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for "<code>line</code>"
          <dd>
           <ol>
            <li>
             <p>If <var>value</var> contains a U+002C COMMA character (,), then let <var>linepos</var> be the leading substring of <var>value</var> up to and excluding the
           first U+002C COMMA character (,) in that string and let <var>linealign</var> be the
           trailing substring of <var>value</var> starting from the character immediately after the
           first U+002C COMMA character (,) in that string.</p>
            <li>
             <p>Otherwise let <var>linepos</var> be the full <var>value</var> string and <var>linealign</var> be the empty string.</p>
            <li>
             <p>If <var>linepos</var> does not contain at least one <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII
           digit</a>, then jump to the step labeled <i>next setting</i>.</p>
            <li>
             <dl>
              <dt>
               <p>If the last character in <var>linepos</var> is a U+0025 PERCENT SIGN character
             (%)</p>
              <dd>
               <p>If <a data-link-type="dfn" href="#parse-a-percentage-string">parse a percentage string</a> from <var>linepos</var> doesn’t fail, let <var>number</var> be the returned <var>percentage</var>, otherwise jump to the step
             labeled <i>next setting</i>.</p>
              <dt>
               <p>Otherwise</p>
              <dd>
               <ol>
                <li>
                 <p>If <var>linepos</var> contains any characters other than U+002D HYPHEN-MINUS
               characters (-) and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII digits</a>, then jump to the step labeled <i>next
               setting</i>.</p>
                <li>
                 <p>If any character in <var>linepos</var> other than the first character is a
               U+002D HYPHEN-MINUS character (-), then jump to the step labeled <i>next
               setting</i>.</p>
                <li>
                 <p>Interpret <var>linepos</var> as a (potentially signed) integer, and let <var>number</var> be that number.</p>
               </ol>
             </dl>
            <li>
             <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-line">WebVTT cue line</a> be <var>number</var>.</p>
            <li>
             <p>If the last character in <var>linepos</var> is a U+0025 PERCENT SIGN character
           (%), then let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines flag</a> be false. Otherwise,
           let it be true.</p>
            <li>
             <p>If <var>linealign</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the string
           "<code>start</code>", then let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-line-alignment">WebVTT cue line alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-line-start-alignment">start alignment</a>.</p>
            <li>
             <p>If <var>linealign</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the string
           "<code>middle</code>", then let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-line-alignment">WebVTT cue line alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-line-middle-alignment">middle alignment</a>.</p>
            <li>
             <p>If <var>linealign</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the string
           "<code>end</code>", then let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-line-alignment">WebVTT cue line alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-line-end-alignment">end alignment</a>.</p>
           </ol>
          <dt>If <var>name</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for "<code>position</code>"
          <dd>
           <ol>
            <li>
             <p>If <var>value</var> contains a U+002C COMMA character (,), then let <var>colpos</var> be the leading substring of <var>value</var> up to and excluding the
           first U+002C COMMA character (,) in that string and let <var>colalign</var> be the
           trailing substring of <var>value</var> starting from the character immediately after the
           first U+002C COMMA character (,) in that string.</p>
            <li>
             <p>Otherwise let <var>colpos</var> be the full <var>value</var> string and <var>colalign</var> be the empty string.</p>
            <li>
             <p>If <a data-link-type="dfn" href="#parse-a-percentage-string">parse a percentage string</a> from <var>colpos</var> doesn’t fail, let <var>number</var> be the returned <var>percentage</var>, otherwise jump to the step
           labeled <i>next setting</i> (<a data-link-type="dfn" href="#webvtt-cue-position">position</a>’s value remains
           the special value <a data-link-type="dfn" href="#webvtt-cue-automatic-position">auto</a>).</p>
            <li>
             <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-position">position</a> be <var>number</var>.</p>
            <li>
             <p>If <var>colalign</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the string
           "<code>start</code>", then let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-position-alignment">WebVTT cue position alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-position-start-alignment">start alignment</a>.</p>
            <li>
             <p>If <var>colalign</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the string
           "<code>middle</code>", then let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-position-alignment">WebVTT cue position alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-position-middle-alignment">middle alignment</a>.</p>
            <li>
             <p>If <var>colalign</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the string
           "<code>end</code>", then let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-position-alignment">WebVTT cue position alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-position-end-alignment">end alignment</a>.</p>
           </ol>
          <dt>If <var>name</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for "<code>size</code>"
          <dd>
           <ol>
            <li>
             <p>If <a data-link-type="dfn" href="#parse-a-percentage-string">parse a percentage string</a> from <var>value</var> doesn’t fail, let <var>number</var> be the returned <var>percentage</var>, otherwise jump to the step
           labeled <i>next setting</i>.</p>
            <li>
             <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-size">WebVTT cue size</a> be <var>number</var>.</p>
           </ol>
          <dt>If <var>name</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for "<code>align</code>"
          <dd>
           <ol>
            <li>
             <p>If <var>value</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the string
           "<code>start</code>", then let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-start-alignment">start alignment</a>.</p>
            <li>
             <p>If <var>value</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the string
           "<code>middle</code>", then let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-middle-alignment">middle alignment</a>.</p>
            <li>
             <p>If <var>value</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the string
           "<code>end</code>", then let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-end-alignment">end alignment</a>.</p>
            <li>
             <p>If <var>value</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the string
           "<code>left</code>", then let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-left-alignment">left alignment</a>.</p>
            <li>
             <p>If <var>value</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the string
           "<code>right</code>", then let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-right-alignment">right alignment</a>.</p>
           </ol>
         </dl>
        <li>
         <p><i>Next setting</i>: Continue to the next token, if any.</p>
       </ol>
     </ol>
     <p>When this specification says that a user agent is to <dfn data-dfn-type="dfn" data-noexport="" id="collect-a-webvtt-timestamp">collect a WebVTT timestamp<a class="self-link" href="#collect-a-webvtt-timestamp"></a></dfn>,
    the user agent must run the following steps:</p>
     <ol>
      <li>
       <p>Let <var>input</var> and <var>position</var> be the same variables as those of the same
     name in the algorithm that invoked these steps.</p>
      <li>
       <p>Let <var>most significant units</var> be <i>minutes</i>.</p>
      <li>
       <p>If <var>position</var> is past the end of <var>input</var>, return an error and abort
     these steps.</p>
      <li>
       <p>If the character indicated by <var>position</var> is not an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII
     digit</a>, then return an error and abort these steps.</p>
      <li>
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII
     digits</a>, and let <var>string</var> be the collected substring.</p>
      <li>
       <p>Interpret <var>string</var> as a base-ten integer. Let <var>value<sub>1</sub></var> be
     that integer.</p>
      <li>
       <p>If <var>string</var> is not exactly two characters in length, or if <var>value<sub>1</sub></var> is greater than 59, let <var>most significant units</var> be <i>hours</i>.</p>
      <li>
       <p>If <var>position</var> is beyond the end of <var>input</var> or if the character at <var>position</var> is not a U+003A COLON character (:), then return an error and abort these
     steps. Otherwise, move <var>position</var> forwards one character.</p>
      <li>
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII
     digits</a>, and let <var>string</var> be the collected substring.</p>
      <li>
       <p>If <var>string</var> is not exactly two characters in length, return an error and abort
     these steps.</p>
      <li>
       <p>Interpret <var>string</var> as a base-ten integer. Let <var>value<sub>2</sub></var> be
     that integer.</p>
      <li>
       <p>If <var>most significant units</var> is <i>hours</i>, or if <var>position</var> is not
      beyond the end of <var>input</var> and the character at <var>position</var> is a U+003A COLON
      character (:), run these substeps:</p>
       <ol>
        <li>
         <p>If <var>position</var> is beyond the end of <var>input</var> or if the character at <var>position</var> is not a U+003A COLON character (:), then return an error and abort these
       steps. Otherwise, move <var>position</var> forwards one character.</p>
        <li>
         <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII
       digits</a>, and let <var>string</var> be the collected substring.</p>
        <li>
         <p>If <var>string</var> is not exactly two characters in length, return an error and
       abort these steps.</p>
        <li>
         <p>Interpret <var>string</var> as a base-ten integer. Let <var>value<sub>3</sub></var> be
       that integer.</p>
       </ol>
       <p>Otherwise (if <var>most significant units</var> is not <i>hours</i>, and either <var>position</var> is beyond the end of <var>input</var>, or the character at <var>position</var> is not a U+003A COLON character (:)), let <var>value<sub>3</sub></var> have the value of <var>value<sub>2</sub></var>, then <var>value<sub>2</sub></var> have the
      value of <var>value<sub>1</sub></var>, then let <var>value<sub>1</sub></var> equal zero.</p>
      <li>
       <p>If <var>position</var> is beyond the end of <var>input</var> or if the character at <var>position</var> is not a U+002E FULL STOP character (.), then return an error and abort
     these steps. Otherwise, move <var>position</var> forwards one character.</p>
      <li>
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII
     digits</a>, and let <var>string</var> be the collected substring.</p>
      <li>
       <p>If <var>string</var> is not exactly three characters in length, return an error and
     abort these steps.</p>
      <li>
       <p>Interpret <var>string</var> as a base-ten integer. Let <var>value<sub>4</sub></var> be
     that integer.</p>
      <li>
       <p>If <var>value<sub>2</sub></var> is greater than 59 or if <var>value<sub>3</sub></var> is
     greater than 59, return an error and abort these steps.</p>
      <li>
       <p>Let <var>result</var> be <var>value<sub>1</sub></var>×60×60 + <var>value<sub>2</sub></var>×60 + <var>value<sub>3</sub></var> + <var>value<sub>4</sub></var>∕1000. </p>
      <li>
       <p>Return <var>result</var>.</p>
     </ol>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.4" id="webvtt-cue-text-parsing-rules"><span class="secno">5.4. </span><span class="content"><dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-text-parsing-rules0">WebVTT cue text parsing rules<a class="self-link" href="#webvtt-cue-text-parsing-rules0"></a></dfn></span><a class="self-link" href="#webvtt-cue-text-parsing-rules"></a></h3>
     <p>A <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-node-object">WebVTT Node Object<a class="self-link" href="#webvtt-node-object"></a></dfn> is a conceptual construct used to represent components of <a data-link-type="dfn" href="#webvtt-cue-text0">WebVTT cue text</a> so that its processing can be described without reference to the
    underlying syntax.</p>
     <p>There are two broad classes of <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Objects</a>: <a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal Node Objects</a> and <a data-link-type="dfn" href="#webvtt-leaf-node-object">WebVTT Leaf Node Objects</a>.</p>
     <p><dfn data-dfn-type="dfn" data-lt="WebVTT Internal Node Object" data-noexport="" id="webvtt-internal-node-object">WebVTT Internal Node Objects<a class="self-link" href="#webvtt-internal-node-object"></a></dfn> are those that
    can contain further <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Objects</a>. They are conceptually
    similar to elements in HTML or the DOM. <a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal
    Node Objects</a> have an ordered list of child <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node
    Objects</a>. The <a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal Node Object</a> is said to be the <i>parent</i> of the
    children. Cycles do not occur; the parent-child relationships so constructed form a tree
    structure. <a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal Node Objects</a> also have an
    ordered list of class names, known as their <dfn data-dfn-type="dfn" data-lt="WebVTT Node Object’s applicable
    classes" data-noexport="" id="webvtt-node-objects-applicable-classes">applicable classes<a class="self-link" href="#webvtt-node-objects-applicable-classes"></a></dfn>, and a language, known as their <dfn data-dfn-type="dfn" data-lt="WebVTT Node
    Object’s applicable language" data-noexport="" id="webvtt-node-objects-applicable-language">applicable language<a class="self-link" href="#webvtt-node-objects-applicable-language"></a></dfn>, which is to be interpreted as a BCP 47
    language code. <a data-link-type="biblio" href="#biblio-bcp47">[BCP47]</a></p>
     <p>There are several concrete classes of <a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal
    Node Objects</a>:</p>
     <dl>
      <dt><dfn data-dfn-type="dfn" data-lt="List of WebVTT Node Objects" data-noexport="" id="list-of-webvtt-node-objects">Lists of WebVTT Node Objects<a class="self-link" href="#list-of-webvtt-node-objects"></a></dfn>
      <dd>
       <p>These are used as root nodes for trees of <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node
      Objects</a>.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT Class Object" data-noexport="" id="webvtt-class-object">WebVTT Class Objects<a class="self-link" href="#webvtt-class-object"></a></dfn>
      <dd>
       <p>These represent spans of text (a <a data-link-type="dfn" href="#webvtt-cue-class-span">WebVTT cue class span</a>) in <a data-link-type="dfn" href="#webvtt-cue-text0">WebVTT cue text</a>,
      and are used to annotate parts of the cue with <a data-link-type="dfn" href="#webvtt-node-objects-applicable-classes">applicable classes</a> without implying further meaning (such as italics or
      bold).</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT Italic Object" data-noexport="" id="webvtt-italic-object">WebVTT Italic Objects<a class="self-link" href="#webvtt-italic-object"></a></dfn>
      <dd>
       <p>These represent spans of italic text (a <a data-link-type="dfn" href="#webvtt-cue-italics-span">WebVTT cue italics span</a>) in <a data-link-type="dfn" href="#webvtt-cue-text0">WebVTT cue
      text</a>.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT Bold Object" data-noexport="" id="webvtt-bold-object">WebVTT Bold Objects<a class="self-link" href="#webvtt-bold-object"></a></dfn>
      <dd>
       <p>These represent spans of bold text (a <a data-link-type="dfn" href="#webvtt-cue-bold-span">WebVTT cue bold span</a>) in <a data-link-type="dfn" href="#webvtt-cue-text0">WebVTT cue
      text</a>.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT Underline Object" data-noexport="" id="webvtt-underline-object">WebVTT Underline Objects<a class="self-link" href="#webvtt-underline-object"></a></dfn>
      <dd>
       <p>These represent spans of underline text (a <a data-link-type="dfn" href="#webvtt-cue-underline-span">WebVTT cue underline span</a>) in <a data-link-type="dfn" href="#webvtt-cue-text0">WebVTT
      cue text</a>.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT Ruby Object" data-noexport="" id="webvtt-ruby-object">WebVTT Ruby Objects<a class="self-link" href="#webvtt-ruby-object"></a></dfn>
      <dd>
       <p>These represent spans of ruby (a <a data-link-type="dfn" href="#webvtt-cue-ruby-span">WebVTT cue ruby span</a>) in <a data-link-type="dfn" href="#webvtt-cue-text0">WebVTT cue
      text</a>.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT Ruby Text Object" data-noexport="" id="webvtt-ruby-text-object">WebVTT Ruby Text Objects<a class="self-link" href="#webvtt-ruby-text-object"></a></dfn>
      <dd>
       <p>These represent spans of ruby text (a <a data-link-type="dfn" href="#webvtt-cue-ruby-text-span">WebVTT cue ruby text span</a>) in <a data-link-type="dfn" href="#webvtt-cue-text0">WebVTT cue
      text</a>.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT Voice Object" data-noexport="" id="webvtt-voice-object">WebVTT Voice Objects<a class="self-link" href="#webvtt-voice-object"></a></dfn>
      <dd>
       <p>These represent spans of text associated with a specific voice (a <a data-link-type="dfn" href="#webvtt-cue-voice-span">WebVTT cue voice
      span</a>) in <a data-link-type="dfn" href="#webvtt-cue-text0">WebVTT cue text</a>. A <a data-link-type="dfn" href="#webvtt-voice-object">WebVTT Voice Object</a> has a value, which is the
      name of the voice.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT Language Object" data-noexport="" id="webvtt-language-object">WebVTT Language Objects<a class="self-link" href="#webvtt-language-object"></a></dfn>
      <dd>
       <p>These represent spans of text (a <a data-link-type="dfn" href="#webvtt-cue-language-span">WebVTT cue language span</a>) in <a data-link-type="dfn" href="#webvtt-cue-text0">WebVTT cue
      text</a>, and are used to annotate parts of the cue where the <a data-link-type="dfn" href="#webvtt-node-objects-applicable-language">applicable language</a> might be different than the surrounding text’s,
      without implying further meaning (such as italics or bold).</p>
     </dl>
     <p><dfn data-dfn-type="dfn" data-lt="WebVTT Leaf Node Object" data-noexport="" id="webvtt-leaf-node-object">WebVTT Leaf Node Objects<a class="self-link" href="#webvtt-leaf-node-object"></a></dfn> are those that contain
    data, such as text, and cannot contain child <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node
    Objects</a>.</p>
     <p>There are two concrete classes of <a data-link-type="dfn" href="#webvtt-leaf-node-object">WebVTT Leaf Node
    Objects</a>:</p>
     <dl>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT Text Object" data-noexport="" id="webvtt-text-object">WebVTT Text Objects<a class="self-link" href="#webvtt-text-object"></a></dfn>
      <dd>
       <p>A fragment of text. A <a data-link-type="dfn" href="#webvtt-text-object">WebVTT Text Object</a> has a value, which is the text it
      represents.</p>
      <dt><dfn data-dfn-type="dfn" data-lt="WebVTT Timestamp Object" data-noexport="" id="webvtt-timestamp-object">WebVTT Timestamp Objects<a class="self-link" href="#webvtt-timestamp-object"></a></dfn>
      <dd>
       <p>A timestamp. A <a data-link-type="dfn" href="#webvtt-timestamp-object">WebVTT Timestamp Object</a> has a value, in seconds and fractions of a
      second, which is the time represented by the timestamp.</p>
     </dl>
     <p>To parse a string <var>input</var> supposedly containing <a data-link-type="dfn" href="#webvtt-cue-text0">WebVTT cue text</a>, user agents
    must use the following algorithm. This algorithm returns a <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node
    Objects</a>.</p>
     <ol>
      <li>
       <p>Let <var>input</var> be the string being parsed.</p>
      <li>
       <p>Let <var>position</var> be a pointer into <var>input</var>, initially pointing at the
     start of the string.</p>
      <li>
       <p>Let <var>result</var> be a <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a>, initially empty.</p>
      <li>
       <p>Let <var>current</var> be the <a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal Node Object</a> <var>result</var>.</p>
      <li>
       <p>Let <var>language stack</var> be a stack of language codes, initially empty.</p>
      <li>
       <p><i>Loop</i>: If <var>position</var> is past the end of <var>input</var>, return <var>result</var> and abort these steps.</p>
      <li>
       <p>Let <var>token</var> be the result of invoking the <a data-link-type="dfn" href="#webvtt-cue-text-tokenizer">WebVTT cue text
     tokenizer</a>.</p>
      <li>
       <p>Run the appropriate steps given the type of <var>token</var>:</p>
       <dl>
        <dt>If <var>token</var> is a string
        <dd>
         <ol>
          <li>
           <p>Create a <a data-link-type="dfn" href="#webvtt-text-object">WebVTT Text Object</a> whose value is the value of the string token <var>token</var>.</p>
          <li>
           <p>Append the newly created <a data-link-type="dfn" href="#webvtt-text-object">WebVTT Text Object</a> to <var>current</var>.</p>
         </ol>
        <dt>If <var>token</var> is a start tag
        <dd>
         <p>How the start tag token <var>token</var> is processed depends on its tag name, as
        follows:</p>
         <dl>
          <dt>If the tag name is "<code>c</code>"
          <dd>
           <p><a data-link-type="dfn" href="#attach-a-webvtt-internal-node-object">Attach</a> a <a data-link-type="dfn" href="#webvtt-class-object">WebVTT Class
          Object</a>.</p>
          <dt>If the tag name is "<code>i</code>"
          <dd>
           <p><a data-link-type="dfn" href="#attach-a-webvtt-internal-node-object">Attach</a> a <a data-link-type="dfn" href="#webvtt-italic-object">WebVTT Italic
          Object</a>.</p>
          <dt>If the tag name is "<code>b</code>"
          <dd>
           <p><a data-link-type="dfn" href="#attach-a-webvtt-internal-node-object">Attach</a> a <a data-link-type="dfn" href="#webvtt-bold-object">WebVTT Bold
          Object</a>.</p>
          <dt>If the tag name is "<code>u</code>"
          <dd>
           <p><a data-link-type="dfn" href="#attach-a-webvtt-internal-node-object">Attach</a> a <a data-link-type="dfn" href="#webvtt-underline-object">WebVTT Underline
          Object</a>.</p>
          <dt>If the tag name is "<code>ruby</code>"
          <dd>
           <p><a data-link-type="dfn" href="#attach-a-webvtt-internal-node-object">Attach</a> a <a data-link-type="dfn" href="#webvtt-ruby-object">WebVTT Ruby
          Object</a>.</p>
          <dt>If the tag name is "<code>rt</code>"
          <dd>
           <p>If <var>current</var> is a <a data-link-type="dfn" href="#webvtt-ruby-object">WebVTT Ruby Object</a>, then <a data-link-type="dfn" href="#attach-a-webvtt-internal-node-object">attach</a> a <a data-link-type="dfn" href="#webvtt-ruby-text-object">WebVTT Ruby Text Object</a>.</p>
          <dt>If the tag name is "<code>v</code>"
          <dd>
           <p><a data-link-type="dfn" href="#attach-a-webvtt-internal-node-object">Attach</a> a <a data-link-type="dfn" href="#webvtt-voice-object">WebVTT Voice
          Object</a>, and set its value to the token’s annotation string, or the empty string if
          there is no annotation string.</p>
          <dt>If the tag name is "<code>lang</code>"
          <dd>
           <p>Push the value of the token’s annotation string, or the empty string if there is no
          annotation string, onto the <var>language stack</var>; then <a data-link-type="dfn" href="#attach-a-webvtt-internal-node-object">attach</a> a <a data-link-type="dfn" href="#webvtt-language-object">WebVTT Language Object</a>.</p>
          <dt>Otherwise
          <dd>
           <p>Ignore the token.</p>
         </dl>
         <p>When the steps above say to <dfn data-dfn-type="dfn" data-noexport="" id="attach-a-webvtt-internal-node-object">attach a WebVTT Internal Node Object<a class="self-link" href="#attach-a-webvtt-internal-node-object"></a></dfn> of a
        particular concrete class, the user agent must run the following steps:</p>
         <ol>
          <li>
           <p>Create a new <a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal Node Object</a> of the specified concrete
         class.</p>
          <li>
           <p>Set the new object’s list of <a data-link-type="dfn" href="#webvtt-node-objects-applicable-classes">applicable classes</a> to the list of classes in the token, excluding any classes
         that are the empty string.</p>
          <li>
           <p>Set the new object’s <a data-link-type="dfn" href="#webvtt-node-objects-applicable-language">applicable
         language</a> to the top entry on the <var>language stack</var>, if the stack is not
         empty.</p>
          <li>
           <p>Append the newly created node object to <var>current</var>.</p>
          <li>
           <p>Let <var>current</var> be the newly created node object.</p>
         </ol>
        <dt>If <var>token</var> is an end tag
        <dd>
         <p>If any of the following conditions is true, then let <var>current</var> be the parent
        node of <var>current</var>.</p>
         <ul class="brief">
          <li>The tag name of the end tag token <var>token</var> is "<code>c</code>" and <var>current</var> is a <a data-link-type="dfn" href="#webvtt-class-object">WebVTT Class Object</a>.
          <li>The tag name of the end tag token <var>token</var> is "<code>i</code>" and <var>current</var> is a <a data-link-type="dfn" href="#webvtt-italic-object">WebVTT Italic Object</a>.
          <li>The tag name of the end tag token <var>token</var> is "<code>b</code>" and <var>current</var> is a <a data-link-type="dfn" href="#webvtt-bold-object">WebVTT Bold Object</a>.
          <li>The tag name of the end tag token <var>token</var> is "<code>u</code>" and <var>current</var> is a <a data-link-type="dfn" href="#webvtt-underline-object">WebVTT Underline Object</a>.
          <li>The tag name of the end tag token <var>token</var> is "<code>ruby</code>" and <var>current</var> is a <a data-link-type="dfn" href="#webvtt-ruby-object">WebVTT Ruby Object</a>.
          <li>The tag name of the end tag token <var>token</var> is "<code>rt</code>" and <var>current</var> is a <a data-link-type="dfn" href="#webvtt-ruby-text-object">WebVTT Ruby Text Object</a>.
          <li>The tag name of the end tag token <var>token</var> is "<code>v</code>" and <var>current</var> is a <a data-link-type="dfn" href="#webvtt-voice-object">WebVTT Voice Object</a>.
         </ul>
         <p>Otherwise, if the tag name of the end tag token <var>token</var> is "<code>lang</code>"
        and <var>current</var> is a <a data-link-type="dfn" href="#webvtt-language-object">WebVTT Language Object</a>, then let <var>current</var> be
        the parent node of <var>current</var>, and pop the top value from the <var>language
        stack</var>.</p>
         <p>Otherwise, if the tag name of the end tag token <var>token</var> is "<code>ruby</code>"
        and <var>current</var> is a <a data-link-type="dfn" href="#webvtt-ruby-text-object">WebVTT Ruby Text Object</a>, then let <var>current</var> be
        the parent node of the parent node of <var>current</var>.</p>
         <p>Otherwise, ignore the token.</p>
        <dt>If <var>token</var> is a timestamp tag
        <dd>
         <ol>
          <li>
           <p>Let <var>input</var> be the tag value.</p>
          <li>
           <p>Let <var>position</var> be a pointer into <var>input</var>, initially pointing at
         the start of the string.</p>
          <li>
           <p><a data-link-type="dfn" href="#collect-a-webvtt-timestamp">Collect a WebVTT timestamp</a>.</p>
          <li>
           <p>If that algorithm does not fail, and if <var>position</var> now points at the end of <var>input</var> (i.e. there are no trailing characters after the timestamp), then create
          a <a data-link-type="dfn" href="#webvtt-timestamp-object">WebVTT Timestamp Object</a> whose value is the collected time, then append it to <var>current</var>.</p>
           <p>Otherwise, ignore the token.</p>
         </ol>
       </dl>
      <li>
       <p>Jump to the step labeled <i>loop</i>.</p>
     </ol>
     <p>The <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-text-tokenizer">WebVTT cue text tokenizer<a class="self-link" href="#webvtt-cue-text-tokenizer"></a></dfn> is as follows. It emits a token, which is either a
    string (whose value is a sequence of characters), a start tag (with a tag name, a list of
    classes, and optionally an annotation), an end tag (with a tag name), or a timestamp tag (with a
    tag value).</p>
     <ol>
      <li>
       <p>Let <var>input</var> and <var>position</var> be the same variables as those of the same
     name in the algorithm that invoked these steps.</p>
      <li>
       <p>Let <var>tokenizer state</var> be <a data-link-type="dfn" href="#webvtt-data-state">WebVTT data state</a>.</p>
      <li>
       <p>Let <var>result</var> be the empty string.</p>
      <li>
       <p>Let <var>buffer</var> be the empty string.</p>
      <li>
       <p>Let <var>classes</var> be an empty list.</p>
      <li>
       <p><i>Loop</i>: If <var>position</var> is past the end of <var>input</var>, let <var>c</var> be an end-of-file marker. Otherwise, let <var>c</var> be the character in <var>input</var> pointed to by <var>position</var>.</p>
       <p class="note" role="note">An end-of-file marker is not a Unicode character, it is used to end the
      tokenizer.</p>
      <li>
       <p>Jump to the state given by <var>tokenizer state</var>:</p>
       <dl>
        <dt><dfn data-dfn-type="dfn" data-noexport="" id="webvtt-data-state">WebVTT data state<a class="self-link" href="#webvtt-data-state"></a></dfn>
        <dd>
         <p>Jump to the entry that matches the value of <var>c</var>:</p>
         <dl>
          <dt>U+0026 AMPERSAND (&amp;)
          <dd>
           <p>Set <var>buffer</var> to <var>c</var>, set <var>tokenizer state</var> to the <a data-link-type="dfn" href="#webvtt-escape-state">WebVTT
          escape state</a>, and jump to the step labeled <i>next</i>.</p>
          <dt>U+003C LESS-THAN SIGN (&lt;)
          <dd>
           <p>If <var>result</var> is the empty string, then set <var>tokenizer state</var> to the <a data-link-type="dfn" href="#webvtt-tag-state">WebVTT tag state</a> and jump to the step labeled <i>next</i>.</p>
           <p>Otherwise, return a string token whose value is <var>result</var> and abort these
          steps.</p>
          <dt>End-of-file marker
          <dd>
           <p>Return a string token whose value is <var>result</var> and abort these steps.</p>
          <dt>Anything else
          <dd>
           <p>Append <var>c</var> to <var>result</var> and jump to the step labeled <i>next</i>.</p>
         </dl>
        <dt><dfn data-dfn-type="dfn" data-noexport="" id="webvtt-escape-state">WebVTT escape state<a class="self-link" href="#webvtt-escape-state"></a></dfn>
        <dd>
         <p>Jump to the entry that matches the value of <var>c</var>:</p>
         <dl>
          <dt>U+0026 AMPERSAND (&amp;)
          <dd>
           <p>Append <var>buffer</var> to <var>result</var>, set <var>buffer</var> to <var>c</var>,
          and jump to the step labeled <i>next</i>.</p>
          <dt><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#alphanumeric-ascii-characters">Alphanumeric ASCII characters</a>
          <dd>
           <p>Append <var>c</var> to <var>buffer</var> and jump to the step labeled <i>next</i>.</p>
          <dt>U+003B SEMICOLON character (;)
          <dd>
           <p>First, examine the value of <var>buffer</var>:</p>
           <p>If <var>buffer</var> is the string "<code>&amp;amp</code>", then append a U+0026
          AMPERSAND character (&amp;) to <var>result</var>.</p>
           <p>If <var>buffer</var> is the string "<code>&amp;lt</code>", then append a U+003C
          LESS-THAN SIGN character (&lt;) to <var>result</var>.</p>
           <p>If <var>buffer</var> is the string "<code>&amp;gt</code>", then append a U+003E
          GREATER-THAN SIGN character (>) to <var>result</var>.</p>
           <p>If <var>buffer</var> is the string "<code>&amp;lrm</code>", then append a U+200E
          LEFT-TO-RIGHT MARK character to <var>result</var>.</p>
           <p>If <var>buffer</var> is the string "<code>&amp;rlm</code>", then append a U+200F
          RIGHT-TO-LEFT MARK character to <var>result</var>.</p>
           <p>If <var>buffer</var> is the string "<code>&amp;nbsp</code>", then append a U+00A0
          NO-BREAK SPACE character to <var>result</var>.</p>
           <p>Otherwise, append <var>buffer</var> followed by a U+003B SEMICOLON character (;) to <var>result</var>.</p>
           <p>Then, in any case, set <var>tokenizer state</var> to the <a data-link-type="dfn" href="#webvtt-data-state">WebVTT data state</a>, and
          jump to the step labeled <i>next</i>.</p>
          <dt>U+003C LESS-THAN SIGN (&lt;)
          <dt>End-of-file marker
          <dd>
           <p>Append <var>buffer</var> to <var>result</var>, return a string token whose value is <var>result</var>, and abort these steps.</p>
          <dt>Anything else
          <dd>
           <p>Append <var>buffer</var> to <var>result</var>, append <var>c</var> to <var>result</var>, set <var>tokenizer state</var> to the <a data-link-type="dfn" href="#webvtt-data-state">WebVTT data state</a>, and
          jump to the step labeled <i>next</i>.</p>
         </dl>
        <dt><dfn data-dfn-type="dfn" data-noexport="" id="webvtt-tag-state">WebVTT tag state<a class="self-link" href="#webvtt-tag-state"></a></dfn>
        <dd>
         <p>Jump to the entry that matches the value of <var>c</var>:</p>
         <dl>
          <dt>U+0009 CHARACTER TABULATION (tab) character
          <dt>U+000A LINE FEED (LF) character
          <dt>U+000C FORM FEED (FF) character
          <dt>U+0020 SPACE character
          <dd>
           <p>Set <var>tokenizer state</var> to the <a data-link-type="dfn" href="#webvtt-start-tag-annotation-state">WebVTT start tag annotation state</a>, and
          jump to the step labeled <i>next</i>.</p>
          <dt>U+002E FULL STOP character (.)
          <dd>
           <p>Set <var>tokenizer state</var> to the <a data-link-type="dfn" href="#webvtt-start-tag-class-state">WebVTT start tag class state</a>, and jump to
          the step labeled <i>next</i>.</p>
          <dt>U+002F SOLIDUS character (/)
          <dd>
           <p>Set <var>tokenizer state</var> to the <a data-link-type="dfn" href="#webvtt-end-tag-state">WebVTT end tag state</a>, and jump to the step
          labeled <i>next</i>.</p>
          <dt><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#ascii-digits">ASCII digits</a>
          <dd>
           <p>Set <var>result</var> to <var>c</var>, set <var>tokenizer state</var> to the <a data-link-type="dfn" href="#webvtt-timestamp-tag-state">WebVTT
          timestamp tag state</a>, and jump to the step labeled <i>next</i>.</p>
          <dt>U+003E GREATER-THAN SIGN character (>)
          <dd>
           <p>Advance <var>position</var> to the next character in <var>input</var>, then jump to the
          next "end-of-file marker" entry below.</p>
          <dt>End-of-file marker
          <dd>
           <p>Return a start tag whose tag name is the empty string, with no classes and no
          annotation, and abort these steps.</p>
          <dt>Anything else
          <dd>
           <p>Set <var>result</var> to <var>c</var>, set <var>tokenizer state</var> to the <a data-link-type="dfn" href="#webvtt-start-tag-state">WebVTT
          start tag state</a>, and jump to the step labeled <i>next</i>.</p>
         </dl>
        <dt><dfn data-dfn-type="dfn" data-noexport="" id="webvtt-start-tag-state">WebVTT start tag state<a class="self-link" href="#webvtt-start-tag-state"></a></dfn>
        <dd>
         <p>Jump to the entry that matches the value of <var>c</var>:</p>
         <dl>
          <dt>U+0009 CHARACTER TABULATION (tab) character
          <dt>U+000C FORM FEED (FF) character
          <dt>U+0020 SPACE character
          <dd>
           <p>Set <var>tokenizer state</var> to the <a data-link-type="dfn" href="#webvtt-start-tag-annotation-state">WebVTT start tag annotation state</a>, and
          jump to the step labeled <i>next</i>.</p>
          <dt>U+000A LINE FEED (LF) character
          <dd>
           <p>Set <var>buffer</var> to <var>c</var>, set <var>tokenizer state</var> to the <a data-link-type="dfn" href="#webvtt-start-tag-annotation-state">WebVTT
          start tag annotation state</a>, and jump to the step labeled <i>next</i>.</p>
          <dt>U+002E FULL STOP character (.)
          <dd>
           <p>Set <var>tokenizer state</var> to the <a data-link-type="dfn" href="#webvtt-start-tag-class-state">WebVTT start tag class state</a>, and jump to
          the step labeled <i>next</i>.</p>
          <dt>U+003E GREATER-THAN SIGN character (>)
          <dd>
           <p>Advance <var>position</var> to the next character in <var>input</var>, then jump to the
          next "end-of-file marker" entry below.</p>
          <dt>End-of-file marker
          <dd>
           <p>Return a start tag whose tag name is <var>result</var>, with no classes and no
          annotation, and abort these steps.</p>
          <dt>Anything else
          <dd>
           <p>Append <var>c</var> to <var>result</var> and jump to the step labeled <i>next</i>.</p>
         </dl>
        <dt><dfn data-dfn-type="dfn" data-noexport="" id="webvtt-start-tag-class-state">WebVTT start tag class state<a class="self-link" href="#webvtt-start-tag-class-state"></a></dfn>
        <dd>
         <p>Jump to the entry that matches the value of <var>c</var>:</p>
         <dl>
          <dt>U+0009 CHARACTER TABULATION (tab) character
          <dt>U+000C FORM FEED (FF) character
          <dt>U+0020 SPACE character
          <dd>
           <p>Append to <var>classes</var> an entry whose value is <var>buffer</var>, set <var>buffer</var> to the empty string, set <var>tokenizer state</var> to the <a data-link-type="dfn" href="#webvtt-start-tag-annotation-state">WebVTT
          start tag annotation state</a>, and jump to the step labeled <i>next</i>.</p>
          <dt>U+000A LINE FEED (LF) character
          <dd>
           <p>Append to <var>classes</var> an entry whose value is <var>buffer</var>, set <var>buffer</var> to <var>c</var>, set <var>tokenizer state</var> to the <a data-link-type="dfn" href="#webvtt-start-tag-annotation-state">WebVTT start
          tag annotation state</a>, and jump to the step labeled <i>next</i>.</p>
          <dt>U+002E FULL STOP character (.)
          <dd>
           <p>Append to <var>classes</var> an entry whose value is <var>buffer</var>, set <var>buffer</var> to the empty string, and jump to the step labeled <i>next</i>.</p>
          <dt>U+003E GREATER-THAN SIGN character (>)
          <dd>
           <p>Advance <var>position</var> to the next character in <var>input</var>, then jump to the
          next "end-of-file marker" entry below.</p>
          <dt>End-of-file marker
          <dd>
           <p>Append to <var>classes</var> an entry whose value is <var>buffer</var>, then return a
          start tag whose tag name is <var>result</var>, with the classes given in <var>classes</var> but no annotation, and abort these steps.</p>
          <dt>Anything else
          <dd>
           <p>Append <var>c</var> to <var>buffer</var> and jump to the step labeled <i>next</i>.</p>
         </dl>
        <dt><dfn data-dfn-type="dfn" data-noexport="" id="webvtt-start-tag-annotation-state">WebVTT start tag annotation state<a class="self-link" href="#webvtt-start-tag-annotation-state"></a></dfn>
        <dd>
         <p>Jump to the entry that matches the value of <var>c</var>:</p>
         <dl>
          <dt>U+003E GREATER-THAN SIGN character (>)
          <dd>
           <p>Advance <var>position</var> to the next character in <var>input</var>, then jump to the
          next "end-of-file marker" entry below.</p>
          <dt>End-of-file marker
          <dd>
           <p>Remove any leading or trailing <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#space-character">space characters</a> from <var>buffer</var>, and replace any sequence of one or more consecutive <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#space-character">space characters</a> in <var>buffer</var> with a single U+0020 SPACE character;
          then, return a start tag whose tag name is <var>result</var>, with the classes given in <var>classes</var>, and with <var>buffer</var> as the annotation, and abort these
          steps.</p>
          <dt>Anything else
          <dd>
           <p>Append <var>c</var> to <var>buffer</var> and jump to the step labeled <i>next</i>.</p>
         </dl>
        <dt><dfn data-dfn-type="dfn" data-noexport="" id="webvtt-end-tag-state">WebVTT end tag state<a class="self-link" href="#webvtt-end-tag-state"></a></dfn>
        <dd>
         <p>Jump to the entry that matches the value of <var>c</var>:</p>
         <dl>
          <dt>U+003E GREATER-THAN SIGN character (>)
          <dd>
           <p>Advance <var>position</var> to the next character in <var>input</var>, then jump to the
          next "end-of-file marker" entry below.</p>
          <dt>End-of-file marker
          <dd>
           <p>Return an end tag whose tag name is <var>result</var> and abort these steps.</p>
          <dt>Anything else
          <dd>
           <p>Append <var>c</var> to <var>result</var> and jump to the step labeled <i>next</i>.</p>
         </dl>
        <dt><dfn data-dfn-type="dfn" data-noexport="" id="webvtt-timestamp-tag-state">WebVTT timestamp tag state<a class="self-link" href="#webvtt-timestamp-tag-state"></a></dfn>
        <dd>
         <p>Jump to the entry that matches the value of <var>c</var>:</p>
         <dl>
          <dt>U+003E GREATER-THAN SIGN character (>)
          <dd>
           <p>Advance <var>position</var> to the next character in <var>input</var>, then jump to the
          next "end-of-file marker" entry below.</p>
          <dt>End-of-file marker
          <dd>
           <p>Return a timestamp tag whose tag name is <var>result</var> and abort these steps.</p>
          <dt>Anything else
          <dd>
           <p>Append <var>c</var> to <var>result</var> and jump to the step labeled <i>next</i>.</p>
         </dl>
       </dl>
      <li>
       <p><i>Next</i>: Advance <var>position</var> to the next character in <var>input</var>.</p>
      <li>
       <p>Jump to the step labeled <i>loop</i>.</p>
     </ol>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.5" id="webvtt-cue-text-dom-construction-rules"><span class="secno">5.5. </span><span class="content"><dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-text-dom-construction-rules0">WebVTT cue text DOM construction rules<a class="self-link" href="#webvtt-cue-text-dom-construction-rules0"></a></dfn></span><a class="self-link" href="#webvtt-cue-text-dom-construction-rules"></a></h3>
     <p class="note" role="note">For the purpose of retrieving a <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a>’s content via the <code class="idl"><a data-link-type="idl" href="#dom-vttcue-getcueashtml">getCueAsHTML()</a></code> method of the <code class="idl"><a data-link-type="idl" href="#vttcue">VTTCue</a></code> interface, it needs to be parsed to
    a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#documentfragment">DocumentFragment</a></code>. This section describes how.</p>
     <p>To convert a <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a> to a DOM tree for <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code> <var>owner</var>, user agents must create a tree of DOM nodes that
    is isomorphous to the tree of <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Objects</a>, with the
    following mapping of <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Objects</a> to DOM nodes:</p>
     <table>
      <thead>
       <tr>
        <th><a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Object</a>
        <th>DOM node
      <tbody>
       <tr>
        <td><a data-link-type="dfn" href="#list-of-webvtt-node-objects">List of WebVTT Node Objects</a>
        <td><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#documentfragment">DocumentFragment</a></code> node
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-region-object">WebVTT Region Object</a>
        <td><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#documentfragment">DocumentFragment</a></code> node
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-class-object">WebVTT Class Object</a>
        <td><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a></code> element node with <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-node-localname">localName</a></code> "<code>span</code>".
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-italic-object">WebVTT Italic Object</a>
        <td><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a></code> element node with <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-node-localname">localName</a></code> "<code>i</code>".
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-bold-object">WebVTT Bold Object</a>
        <td><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a></code> element node with <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-node-localname">localName</a></code> "<code>b</code>".
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-underline-object">WebVTT Underline Object</a>
        <td><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a></code> element node with <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-node-localname">localName</a></code> "<code>u</code>".
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-ruby-object">WebVTT Ruby Object</a>
        <td><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a></code> element node with <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-node-localname">localName</a></code> "<code>ruby</code>".
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-ruby-text-object">WebVTT Ruby Text Object</a>
        <td><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a></code> element node with <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-node-localname">localName</a></code> "<code>rt</code>".
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-voice-object">WebVTT Voice Object</a>
        <td><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a></code> element node with <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-node-localname">localName</a></code> "<code>span</code>", and a <a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/dom.html#attr-title">title</a> attribute set to the <a data-link-type="dfn" href="#webvtt-voice-object">WebVTT Voice Object</a>’s value.
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-language-object">WebVTT Language Object</a>
        <td><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a></code> element node with <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-node-localname">localName</a></code> "<code>span</code>", and a <a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/dom.html#attr-lang">lang</a> attribute set to the <a data-link-type="dfn" href="#webvtt-language-object">WebVTT Language Object</a>’s <a data-link-type="dfn" href="#webvtt-node-objects-applicable-language">applicable language</a>.
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-text-object">WebVTT Text Object</a>
        <td><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#text">Text</a></code> node whose <code class="idl"><a data-link-type="idl">data</a></code> is the value of the <a data-link-type="dfn" href="#webvtt-text-object">WebVTT Text Object</a>.
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-timestamp-object">WebVTT Timestamp Object</a>
        <td><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#processinginstruction">ProcessingInstruction</a></code> node whose <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-processinginstruction-target">target</a></code> is
       "<code>timestamp</code>" and whose <code class="idl"><a data-link-type="idl">data</a></code> is a <a data-link-type="dfn" href="#webvtt-timestamp">WebVTT
       timestamp</a> representing the value of the <a data-link-type="dfn" href="#webvtt-timestamp-object">WebVTT Timestamp Object</a>, with all optional
       components included, with one leading zero if the <var>hours</var> component is less than
       ten, and with no leading zeros otherwise.
     </table>
     <p><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a></code> nodes created as part of the mapping described above must
    have their <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-node-namespaceuri">namespaceURI</a></code> set to the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#html-namespace">HTML namespace</a>, and, if the
    corresponding <a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal Node Object</a> has any <a data-link-type="dfn" href="#webvtt-node-objects-applicable-classes">applicable classes</a>, must have a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-class"><code>class</code></a> attribute set to the string obtained by concatenating all those classes, each separated from the
    next by a single U+0020 SPACE character.</p>
     <p>The <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-node-ownerdocument">ownerDocument</a></code> attribute of all nodes in the DOM tree must be set to the given
    document <var>owner</var>.</p>
     <p>All characteristics of the DOM nodes that are not described above or dependent on
    characteristics defined above must be left at their initial values.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.6" id="webvtt-rules-for-extracting-the-chapter-title"><span class="secno">5.6. </span><span class="content">WebVTT rules for extracting the chapter title</span><a class="self-link" href="#webvtt-rules-for-extracting-the-chapter-title"></a></h3>
     <p>The <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-rules-for-extracting-the-chapter-title0">WebVTT rules for extracting the chapter title<a class="self-link" href="#webvtt-rules-for-extracting-the-chapter-title0"></a></dfn> are as follows:</p>
     <ol>
      <li>
       <p>Let <var>nodes</var> be the <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a> obtained by applying the <a data-link-type="dfn" href="#webvtt-cue-text-parsing-rules0">WebVTT cue text parsing rules</a> to the <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-text">text track cue
     text</a>.</p>
      <li>
       <p>Return the concatenation of the values of each <a data-link-type="dfn" href="#webvtt-text-object">WebVTT Text Object</a> in <var>nodes</var>, in a pre-order, depth-first traversal, excluding <a data-link-type="dfn" href="#webvtt-ruby-text-object">WebVTT Ruby Text Objects</a> and their descendants.</p>
     </ol>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="6" id="rendering"><span class="secno">6. </span><span class="content">Rendering</span><a class="self-link" href="#rendering"></a></h2>
    <p class="note" role="note">This section describes in some detail how to visually render WebVTT cues in a
   user agent. It also specifies extra CSS functionality made available to manipulate the visual
   rendering. The processing model is quite tightly linked to media elements in HTML. When
   supporting WebVTT in media players that don’t support CSS, equivalent visual rendering will need
   to be implemented.</p>
    <section>
     <h3 class="heading settled" data-level="6.1" id="processing-model"><span class="secno">6.1. </span><span class="content">Processing model</span><a class="self-link" href="#processing-model"></a></h3>
     <p>The <dfn data-dfn-type="dfn" data-noexport="" id="rules-for-updating-the-display-of-webvtt-text-tracks">rules for updating the display of WebVTT text tracks<a class="self-link" href="#rules-for-updating-the-display-of-webvtt-text-tracks"></a></dfn> render the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track">text tracks</a> of a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">media element</a> (specifically, a <a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#video">video</a> element), or of another playback mechanism, by applying the steps below. All the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track">text tracks</a> that use these rules for a given <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">media element</a>, or other playback
    mechanism, are rendered together, to avoid overlapping subtitles from multiple tracks.</p>
     <p class="note" role="note">In HTML, audio elements don’t have a visual rendering area and therefore, this
    algorithm will abort for audio elements. When authors do create WebVTT captions or subtitles for
    audio resources, they need to publish them in a video element for rendering by the user
    agent.</p>
     <p>The output of the steps below is a set of CSS boxes that covers the rendering area of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">media element</a> or other playback mechanism, which user agents are expected to render in a
    manner suiting the user.</p>
     <p>The rules are as follows:</p>
     <ol>
      <li>
       <p>If the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">media element</a> is an <a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#audio">audio</a> element, or is another
     playback mechanism with no rendering area, abort these steps.</p>
      <li>
       <p>Let <var>video</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">media element</a> or other playback mechanism.</p>
      <li>
       <p>Let <var>output</var> be an empty list of absolutely positioned CSS block
     boxes.</p>
      <li>
       <p>If the user agent is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#expose-a-user-interface-to-the-user">exposing a user
     interface</a> for <var>video</var>, add to <var>output</var> one or more completely transparent
     positioned CSS block boxes that cover the same region as the user interface.</p>
      <li>
       <p>If the last time these rules were run, the user agent was not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#expose-a-user-interface-to-the-user">exposing a user interface</a> for <var>video</var>, but now it is,
     optionally let <var>reset</var> be true. Otherwise, let <var>reset</var> be false.</p>
      <li>
       <p>Let <var>tracks</var> be the subset of <var>video</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#list-of-text-tracks">list of text tracks</a> that have as their <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#rules-for-updating-the-text-track-rendering">rules for updating the text track rendering</a> these <a data-link-type="dfn" href="#rules-for-updating-the-display-of-webvtt-text-tracks">rules for
     updating the display of WebVTT text tracks</a>, and whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-mode">text track mode</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-showing">showing</a>.</p>
      <li>
       <p>Let <var>cues</var> be an empty list of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue">text track
     cues</a>.</p>
      <li>
       <p>For each track <var>track</var> in <var>tracks</var>, append to <var>cues</var> all the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue">cues</a> from <var>track</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-list-of-cues">list of cues</a> that have their <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-active-flag">text track cue active flag</a> set.</p>
      <li>
       <p>Let <var>regions</var> be an empty list of <a data-link-type="dfn" href="#webvtt-region">WebVTT
     regions</a>.</p>
      <li>
       <p>For each track <var>track</var> in <var>tracks</var>, append to <var>regions</var> all
     the <a data-link-type="dfn" href="#webvtt-region">regions</a> from <var>track</var>’s <a data-link-type="dfn" href="#text-track-list-of-regions">list of regions</a>.</p>
      <li>
       <p>If <var>reset</var> is false, then, for each <a data-link-type="dfn" href="#webvtt-region">WebVTT region</a> <var>region</var> in <var>regions</var> let <var>regionNode</var> be a <a data-link-type="dfn" href="#webvtt-region-object">WebVTT region object</a>.</p>
      <li>
       <p>Apply the following steps for each <var>regionNode</var>:</p>
       <ol>
        <li>
         <p>Prepare some variables for the application of CSS properties to <var>regionNode</var> as
        follows:</p>
         <ul>
          <li>
           <p>Let <var>regionWidth</var> be the <a data-link-type="dfn" href="#webvtt-region-width">WebVTT region width</a>. Let <var>width</var> be '<var>regionWidth</var> vw' (<span class="css">vw</span> is a CSS unit). <a data-link-type="biblio" href="#biblio-css-values">[CSS-VALUES]</a></p>
          <li>
           <p>Let <var>lineHeight</var> be '5.33vh' (<span class="css">vh</span> is a CSS unit) <a data-link-type="biblio" href="#biblio-css-values">[CSS-VALUES]</a> and <var>regionHeight</var> be the <a data-link-type="dfn" href="#webvtt-region-lines">WebVTT region lines</a>. Let <var>lines</var> be
         '<var>lineHeight</var> multiplied by <var>regionHeight</var>.</p>
          <li>
           <p>Let <var>viewportAnchorX</var> be the x dimension of the <a data-link-type="dfn" href="#webvtt-region-anchor">WebVTT region anchor</a> and <var>regionAnchorX</var> be the x dimension of the <a data-link-type="dfn" href="#webvtt-region-anchor">WebVTT region anchor</a>. Let <var>leftOffset</var> be <var>regionAnchorX</var> multiplied by <var>width</var> divided by
         100.0. Let <var>left</var> be <var>leftOffset</var> subtracted from
         '<var>viewportAnchorX</var> vw'.</p>
          <li>
           <p>Let <var>viewportAnchorY</var> be the y dimension of the <a data-link-type="dfn" href="#webvtt-region-anchor">WebVTT region anchor</a> and <var>regionAnchorY</var> be the y dimension of the <a data-link-type="dfn" href="#webvtt-region-anchor">WebVTT region anchor</a>. Let <var>topOffset</var> be <var>regionAnchorY</var> multiplied by <var>lines</var> divided by
         100.0. Let <var>top</var> be <var>topOffset</var> subtracted from
         '<var>viewportAnchorY</var> vh'.</p>
         </ul>
        <li>
         <p>Apply the terms of the CSS specifications to <var>regionNode</var> within the following
        constraints, thus obtaining a CSS box <var>box</var> positioned relative to an initial
        containing block:</p>
         <ol>
          <li>
           <p>No style sheets are associated with <var>regionNode</var>. (The regionNodes are
         subsequently restyled using style sheets after their boxes are generated, as described
         below.)</p>
          <li>
           <p>Properties on <var>regionNode</var> have their values set as defined in the next
         section. (That section uses some of the variables whose values were calculated earlier in
         this algorithm.)</p>
          <li>
           <p>The viewport (and initial containing block) is video’s rendering area.</p>
         </ol>
        <li>
         <p>Add the CSS box <var>box</var> to <var>output</var>.</p>
       </ol>
      <li>
       <p>If <var>reset</var> is false, then, for each <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> <var>cue</var> in <var>cues</var>: if <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-display-state">text track cue display state</a> has a set of CSS
      boxes, then:</p>
       <ul>
        <li>
         <p>If <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-region">WebVTT cue region</a> is not null, add those boxes to that
       region’s <var>box</var> and remove <var>cue</var> from <var>cues</var>.</p>
        <li>
         <p>Otherwise, add those boxes to <var>output</var> and remove <var>cue</var> from <var>cues</var>.</p>
       </ul>
      <li>
       <p>For each <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> <var>cue</var> in <var>cues</var> that has not yet had
      corresponding CSS boxes added to <var>output</var>, in <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-order">text track cue order</a>, run the
      following substeps:</p>
       <ol>
        <li>
         <p>Let <var>nodes</var> be the <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a> obtained by applying
       the <a data-link-type="dfn" href="#webvtt-cue-text-parsing-rules0">WebVTT cue text parsing rules</a> to the <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-text">text track cue
       text</a>.</p>
        <li>
         <p>If <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-region">WebVTT cue region</a> is null, run the following substeps:</p>
         <ol>
          <li><a data-link-type="dfn" href="#apply-webvtt-cue-settings">Apply WebVTT cue settings</a> to obtain CSS boxes <var>boxes</var> from <var>nodes</var>.
          <li>
           <p>Let <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-display-state">text track cue display state</a> have the CSS boxes in <var>boxes</var>.</p>
          <li>
           <p>Add the CSS boxes in <var>boxes</var> to <var>output</var>.</p>
         </ol>
        <li>
         <p>Otherwise, run the following substeps:</p>
         <ol>
          <li>
           <p>Let <var>region</var> be <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-region">WebVTT cue region</a>.</p>
          <li>
           <p>If <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-scroll">WebVTT region scroll</a> setting is '<code>up</code>' and <var>region</var> already has one child, set <var>region</var>’s <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-transitions-1/#propdef-transition-property">transition-property</a> to <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-position-3/#propdef-top">top</a> and <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-transitions-1/#propdef-transition-duration">transition-duration</a> to '0.433s'.</p>
          <li>
           <p>Apply the Unicode Bidirectional Algorithm’s Paragraph Level steps to the concatenation
          of the values of each <a data-link-type="dfn" href="#webvtt-text-object">WebVTT Text Object</a> in <var>nodes</var>, in a pre-order,
          depth-first traversal, excluding <a data-link-type="dfn" href="#webvtt-ruby-text-object">WebVTT Ruby Text
          Objects</a> and their descendants, to determine the <i>paragraph embedding level</i> of
          the first Unicode paragraph of the cue. <a data-link-type="biblio" href="#biblio-bidi">[BIDI]</a></p>
           <p class="note" role="note">Within a cue, paragraph boundaries are only denoted by Type B characters,
          such as U+000A LINE FEED (LF), U+0085 NEXT LINE (NEL), and U+2029 PARAGRAPH SEPARATOR.
          (This means each line of the cue is reordered as if it was a separate paragraph.)</p>
          <li>
           <p>If the <i>paragraph embedding level</i> determined in the previous step is even (the <i>paragraph direction</i> is left-to-right), let <var>direction</var> be "ltr", otherwise,
         let it be "rtl".</p>
          <li>
           <p>Let <var>offset</var> be <var>cue</var>’s <a data-link-type="dfn" href="#cue-computed-position">computed
         position</a> multiplied by <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-width">WebVTT region width</a> and divided by
         100 (i.e. interpret it as a percentage of the region width).</p>
          <li>
           <p>Adjust <var>offset</var> using <var>cue</var>’s <a data-link-type="dfn" href="#cue-computed-position-alignment">computed position alignment</a> as follows:</p>
           <dl class="switch">
            <dt>If the <a data-link-type="dfn" href="#cue-computed-position-alignment">computed position alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-middle-alignment">middle alignment</a>
            <dd>
             <p>Subtract half of <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-width">WebVTT region width</a> from <var>offset</var>.</p>
            <dt>If the <a data-link-type="dfn" href="#cue-computed-position-alignment">computed position alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-end-alignment">end alignment</a>
            <dd>
             <p>Subtract <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-width">WebVTT region width</a> from <var>offset</var>.</p>
           </dl>
          <li>
           <p>Let <var>left</var> be '<var>offset</var> %'. ('%' is a CSS unit.) <a data-link-type="biblio" href="#biblio-css-values">[CSS-VALUES]</a></p>
          <li>
           <p>Apply the terms of the CSS specifications to <var>nodes</var> with the same constraints
          that are used when they are applied to <var>nodes</var> of a <var>cue</var> that is not
          part of a region.</p>
           <p>Let <var>boxes</var> be the boxes generated as descendants of the initial containing
          block, along with their positions.</p>
          <li>
           <p>If there are no line boxes in <var>boxes</var>, skip the remainder of these substeps
         for <var>cue</var>. The cue is ignored.</p>
          <li>
           <p>Let <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-display-state">text track cue display state</a> have the CSS boxes in <var>boxes</var>.</p>
          <li>
           <p>Add the CSS boxes in <var>boxes</var> to <var>region</var>.</p>
          <li>
           <p>If the CSS boxes <var>boxes</var> together have a height less than the height of the <var>region</var> box, let <var>diff</var> be the absolute difference between the two
         height values. Increase <var>top</var> by <var>diff</var> and re-apply it to <var>regionNode</var>.</p>
         </ol>
       </ol>
      <li>
       <p>Return <var>output</var>.</p>
     </ol>
     <p>User agents may allow the user to override the above algorithm’s positioning of cues, e.g. by
    dragging them to another location on the <a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#video">video</a>, or even off the <a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#video">video</a> entirely.</p>
     <p>When the algorithm above requires that the user agent <dfn data-dfn-type="dfn" data-noexport="" id="apply-webvtt-cue-settings">apply WebVTT cue settings<a class="self-link" href="#apply-webvtt-cue-settings"></a></dfn> to
    obtain CSS boxes from a <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a> <var>nodes</var>, the user agent must
    run the following algorithm.</p>
     <ol>
      <li>
       <p>Apply the Unicode Bidirectional Algorithm’s Paragraph Level steps to the concatenation of
      the values of each <a data-link-type="dfn" href="#webvtt-text-object">WebVTT Text Object</a> in <var>nodes</var>, in a pre-order, depth-first
      traversal, excluding <a data-link-type="dfn" href="#webvtt-ruby-text-object">WebVTT Ruby Text Objects</a> and their
      descendants, to determine the <i>paragraph embedding level</i> of the first Unicode paragraph
      of the cue. <a data-link-type="biblio" href="#biblio-bidi">[BIDI]</a></p>
       <p class="note" role="note">Within a cue, paragraph boundaries are only denoted by Type B characters, such
      as U+000A LINE FEED (LF), U+0085 NEXT LINE (NEL), and U+2029 PARAGRAPH SEPARATOR. (This means
      each line of the cue is reordered as if it was a separate paragraph.)</p>
      <li>
       <p>If the <i>paragraph embedding level</i> determined in the previous step is even (the <i>paragraph direction</i> is left-to-right), let <var>direction</var> be "ltr", otherwise,
      let it be "rtl".</p>
      <li>
       <p>If the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a>, then let <var>writing-mode</var> be "horizontal-tb". Otherwise, if
     the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-left-writing-direction">vertical growing left</a>, then let <var>writing-mode</var> be "vertical-rl".
     Otherwise, the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-right-writing-direction">vertical growing right</a>; let <var>writing-mode</var> be
     "vertical-lr".</p>
      <li>
       <p>Determine the value of <var>maximum size</var> for <var>cue</var> as per the appropriate
      rules from the following list:</p>
       <dl class="switch">
        <dt>If the <a data-link-type="dfn" href="#cue-computed-position-alignment">computed position alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-start-alignment">start</a>
        <dd>
         <p>Let <var>maximum size</var> be the <a data-link-type="dfn" href="#cue-computed-position">computed position</a> subtracted from 100.</p>
        <dt>If the <a data-link-type="dfn" href="#cue-computed-position-alignment">computed position alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-end-alignment">end</a>
        <dd>
         <p>Let <var>maximum size</var> be the <a data-link-type="dfn" href="#cue-computed-position">computed
        position</a>.</p>
        <dt>If the <a data-link-type="dfn" href="#cue-computed-position-alignment">computed position alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-middle-alignment">middle</a>, and the <a data-link-type="dfn" href="#cue-computed-position">computed position</a> is less than or equal to 50
        <dd>
         <p>Let <var>maximum size</var> be the <a data-link-type="dfn" href="#cue-computed-position">computed position</a> multiplied by two.</p>
        <dt>If the <a data-link-type="dfn" href="#cue-computed-position-alignment">computed position alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-middle-alignment">middle</a>, and the <a data-link-type="dfn" href="#cue-computed-position">computed position</a> is greater than  50
        <dd>
         <p>Let <var>maximum size</var> be the result of subtracting <a data-link-type="dfn" href="#cue-computed-position">computed position</a> from 100 and then multiplying the result by two.</p>
       </dl>
      <li>
       <p>If the <a data-link-type="dfn" href="#webvtt-cue-size">WebVTT cue size</a> is less than <var>maximum size</var>, then let <var>size</var> be <a data-link-type="dfn" href="#webvtt-cue-size">WebVTT cue size</a>. Otherwise, let <var>size</var> be <var>maximum
     size</var>.</p>
      <li>
       <p>If the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a>, then let <var>width</var> be '<var>size</var> vw' and <var>height</var> be <span class="css">auto</span>. Otherwise, let <var>width</var> be <span class="css">auto</span> and <var>height</var> be '<var>size</var> vh'. (These are CSS values used by the next
     section to set CSS properties for the rendering; <span class="css">vw</span> and <span class="css">vh</span> are CSS units.) <a data-link-type="biblio" href="#biblio-css-values">[CSS-VALUES]</a></p>
      <li>
       <p>Determine the value of <var>x-position</var> or <var>y-position</var> for <var>cue</var> as
      per the appropriate rules from the following list:</p>
       <dl class="switch">
        <dt>If the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a>
        <dd>
         <dl class="switch">
          <dt>If the <a data-link-type="dfn" href="#cue-computed-position-alignment">computed position alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-start-alignment">start alignment</a>
          <dd>
           <p>Let <var>x-position</var> be the <a data-link-type="dfn" href="#cue-computed-position">computed
         position</a>.</p>
          <dt>If the <a data-link-type="dfn" href="#cue-computed-position-alignment">computed position alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-middle-alignment">middle alignment</a>
          <dd>
           <p>Let <var>x-position</var> be the <a data-link-type="dfn" href="#cue-computed-position">computed
         position</a> minus half of <var>size</var>.</p>
          <dt>If the <a data-link-type="dfn" href="#cue-computed-position-alignment">computed position alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-end-alignment">end alignment</a>
          <dd>
           <p>Let <var>x-position</var> be the <a data-link-type="dfn" href="#cue-computed-position">computed
         position</a> minus <var>size</var>.</p>
         </dl>
        <dt>If the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-left-writing-direction">vertical growing left</a> or <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-right-writing-direction">vertical growing right</a>
        <dd>
         <dl class="switch">
          <dt>If the <a data-link-type="dfn" href="#cue-computed-position-alignment">computed position alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-start-alignment">start alignment</a>
          <dd>
           <p>Let <var>y-position</var> be the <a data-link-type="dfn" href="#cue-computed-position">computed
         position</a>.</p>
          <dt>If the <a data-link-type="dfn" href="#cue-computed-position-alignment">computed position alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-middle-alignment">middle alignment</a>
          <dd>
           <p>Let <var>y-position</var> be the <a data-link-type="dfn" href="#cue-computed-position">computed
         position</a> minus half of <var>size</var>.</p>
          <dt>If the <a data-link-type="dfn" href="#cue-computed-position-alignment">computed position alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-end-alignment">end alignment</a>
          <dd>
           <p>Let <var>y-position</var> be the <a data-link-type="dfn" href="#cue-computed-position">computed
         position</a> minus <var>size</var>.</p>
         </dl>
       </dl>
      <li>
       <p>Determine the value of whichever of <var>x-position</var> or <var>y-position</var> is not
      yet calculated for <var>cue</var> as per the appropriate rules from the following list:</p>
       <dl class="switch">
        <dt>If the <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines flag</a> is not set
        <dd>
         <dl class="switch">
          <dt>If the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a>
          <dd>
           <p>Let <var>y-position</var> be the <a data-link-type="dfn" href="#cue-computed-line">computed
         line</a>.</p>
          <dt>If the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-left-writing-direction">vertical growing left</a> or <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-right-writing-direction">vertical growing right</a>
          <dd>
           <p>Let <var>x-position</var> be the <a data-link-type="dfn" href="#cue-computed-line">computed
         line</a>.</p>
         </dl>
        <dt>If the <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines flag</a> is set
        <dd>
         <dl class="switch">
          <dt>If the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a>
          <dd>
           <p>Let <var>y-position</var> be 0.</p>
          <dt>If the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-left-writing-direction">vertical growing left</a> or <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-right-writing-direction">vertical growing right</a>
          <dd>
           <p>Let <var>x-position</var> be 0.</p>
         </dl>
       </dl>
       <p class="note" role="note">These are not final positions, they are merely temporary positions used to
      calculate box dimensions below.</p>
      <li>
       <p>If the <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines flag</a> is set, then run the appropriate steps from the
      following list:</p>
       <dl class="switch">
        <dt>If the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a>
        <dd>
         <ol>
          <li>
           <p>Let <var>edge margin</var> be a user-agent-defined horizontal length, expressed as a
         percentage of the width of the <var>video</var>’s rendering area, which will be used to
         define a margin at the left and right edges of the video into which this cue will not be
         placed. In situations with overscan, this margin should be sufficient to place the cue
         within the title-safe area. In the absence of overscan, this value should be picked for
         aesthetics (to avoid text being aligned precisely on the left or right edge of the video,
         which can be ugly).</p>
          <li>
           <p>If <var>x-position</var> is less than <var>edge margin</var> and the sum of <var>x-position</var> and <var>size</var> is more than <var>edge margin</var>, then
         increase <var>x-position</var> by <var>edge margin</var> and decrease <var>size</var> by
         the same amount.</p>
          <li>
           <p>Let <var>right margin edge</var> be 100 minus <var>edge margin</var>.</p>
          <li>
           <p>If <var>x-position</var> is less than <var>right margin edge</var>, and the sum of <var>x-position</var> and <var>size</var> is more than <var>right margin edge</var>, then
         decrease <var>size</var> by <var>edge margin</var>.</p>
         </ol>
        <dt>If the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-left-writing-direction">vertical growing left</a> or <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-right-writing-direction">vertical growing right</a>
        <dd>
         <ol>
          <li>
           <p>Let <var>edge margin</var> be a user-agent-defined vertical length, expressed as a
         percentage of the height of the <var>video</var>’s rendering area, which will be used to
         define a margin at the top and bottom edges of the video into which this cue will not be
         placed. In situations with overscan, this margin should be sufficient to place the cue
         within the title-safe area. In the absence of overscan, this value should be picked for
         aesthetics (to avoid text being aligned precisely on the top or bottom edge of the video,
         which can be ugly).</p>
          <li>
           <p>If <var>y-position</var> is less than <var>edge margin</var> and the sum of <var>y-position</var> and <var>size</var> is more than <var>edge margin</var>, then
         increase <var>y-position</var> by <var>edge margin</var> and decrease <var>size</var> by
         the same amount.</p>
          <li>
           <p>Let <var>bottom margin edge</var> be 100 minus <var>edge margin</var>.</p>
          <li>
           <p>If <var>y-position</var> is less than <var>bottom margin edge</var>, and the sum of <var>y-position</var> and <var>size</var> is more than <var>right margin edge</var>, then
         decrease <var>size</var> by <var>edge margin</var>.</p>
         </ol>
       </dl>
      <li>
       <p>Let <var>left</var> be '<var>x-position</var> vw' and <var>top</var> be
     '<var>y-position</var> vh'. (These are CSS values used by the next section to set CSS
     properties for the rendering; <span class="css">vw</span> and <span class="css">vh</span> are CSS units.) <a data-link-type="biblio" href="#biblio-css-values">[CSS-VALUES]</a></p>
      <li>
       <p>Apply the terms of the CSS specifications to <var>nodes</var> within the following
      constraints, thus obtaining a set of CSS boxes positioned relative to an initial containing
      block: <a data-link-type="biblio" href="#biblio-css21">[CSS21]</a></p>
       <ul>
        <li>
         <p>The <i>document tree</i> is the tree of <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node
       Objects</a> rooted at <var>nodes</var>.</p>
        <li>
         <p>For the purposes of processing by the CSS specification, <a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal Node Objects</a> are equivalent to elements with the same
       contents.</p>
        <li>For the purposes of processing by the CSS specification, <a data-link-type="dfn" href="#webvtt-text-object">WebVTT Text Objects</a> are equivalent to <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#text">Text</a></code> nodes.
        <li>No style sheets are associated with <var>nodes</var>. (The nodes are subsequently
       restyled using style sheets after their boxes are generated, as described below.)
        <li>The children of the <var>nodes</var> must be wrapped in an anonymous box whose <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visuren.html#propdef-display">display</a> property has the value <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-display-3/#valdef-display-inline">inline</a>. This is the <dfn data-dfn-type="dfn" data-noexport="" id="webvtt-cue-background-box">WebVTT cue background
       box<a class="self-link" href="#webvtt-cue-background-box"></a></dfn>.
        <li>Runs of children of <a data-link-type="dfn" href="#webvtt-ruby-object">WebVTT Ruby Objects</a> that are not <a data-link-type="dfn" href="#webvtt-ruby-text-object">WebVTT Ruby Text Objects</a> must be wrapped in anonymous
       boxes whose <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visuren.html#propdef-display">display</a> property has the value <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-display-3/#valdef-display-ruby-base">ruby-base</a>. <a data-link-type="biblio" href="#biblio-css3-ruby">[CSS3-RUBY]</a>
        <li>Properties on <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Objects</a> have their values set
       as defined in the next section. (That section uses some of the variables whose values were
       calculated earlier in this algorithm.)
        <li>
          Text runs must be wrapped according to the CSS
        line-wrapping rules, with the following additional constraints: 
         <ul>
          <li>Regardless of the value of the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-3/#propdef-white-space">white-space</a> property, lines must be wrapped at the
         edge of their containing blocks, even if doing so requires splitting a word where there is
         no line breaking opportunity. (Thus, normally text wraps as needed, but if there is a
         particularly long word, it does not overflow as it normally would in CSS, it is instead
         forcibly wrapped at the box’s edge.)
          <li>Regardless of the value of the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-3/#propdef-white-space">white-space</a> property, any line breaks inserted by the
         user agent for the purposes of line wrapping must be placed so as to minimize Δ
         across each run of consecutive lines between preserved newlines in the source. Δ for
         a set of lines is defined as the sum over each line of the absolute of the difference
         between the line’s length and the mean line length of the set.
         </ul>
        <li>The viewport (and initial containing block) is <var>video</var>’s rendering area.
       </ul>
       <p>Let <var>boxes</var> be the boxes generated as descendants of the initial containing block,
      along with their positions.</p>
      <li>
       <p>If there are no line boxes in <var>boxes</var>, skip the remainder of these substeps for <var>cue</var>. The cue is ignored.</p>
      <li>
       <p>Adjust the positions of <var>boxes</var> according to the appropriate steps from the
      following list:</p>
       <dl class="switch">
        <dt>If <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines flag</a> is set
        <dd>
         <p>Many of the steps in this algorithm vary according to the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing
        direction</a>. Steps labeled "<strong>Horizontal</strong>" must be followed only when the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a>, steps labeled "<strong>Vertical</strong>" must be followed when
        the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is either <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-left-writing-direction">vertical growing left</a> or <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-right-writing-direction">vertical growing right</a>, steps labeled "<strong>Vertical Growing
        Left</strong>" must be followed only when the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-left-writing-direction">vertical growing left</a>, and
        steps labeled "<strong>Vertical Growing Right</strong>" must be followed only when the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-right-writing-direction">vertical growing right</a>.</p>
         <ol>
          <li>
           <p><strong>Horizontal</strong>: Let <var>margin</var> be a user-agent-defined vertical
          length which will be used to define a margin at the top and bottom edges of the video into
          which cues will not be placed. In situations with overscan, this margin should be
          sufficient to place all cues within the title-safe area. In the absence of overscan, this
          value should be picked for aesthetics (to avoid text being aligned precisely on the bottom
          edge of the video, which can be ugly).</p>
           <p><strong>Vertical</strong>: Let <var>margin</var> be a user-agent-defined horizontal
          length which will be used to define a margin at the left and right edges of the video into
          which cues will not be placed. In situations with overscan, this margin should be
          sufficient to place all cues within the title-safe area. In the absence of overscan, this
          value should be picked for aesthetics (to avoid text being aligned precisely on the left
          or right edges of the video, which can be ugly).</p>
          <li>
           <p><strong>Horizontal</strong>: Let <var>full dimension</var> be the height of <var>video</var>’s rendering area.</p>
           <p><strong>Vertical</strong>: Let <var>full dimension</var> be the width of <var>video</var>’s rendering area.</p>
           <p>These dimensions must not be adjusted for overscan. (The algorithm does that
          separately.)</p>
          <li>
           <p>Let <var>max dimension</var> be <var>full dimension</var> - (2 ×  <var>margin</var>).</p>
          <li>
           <p><strong>Horizontal</strong>: Let <var>step</var> be the height of the first line box in <var>boxes</var>.</p>
           <p><strong>Vertical</strong>: Let <var>step</var> be the width of the first line box in <var>boxes</var>.</p>
          <li>
           <p>If <var>step</var> is zero, then jump to the step labeled <i>done positioning</i> below.</p>
          <li>
           <p>Let <var>line</var> be <var>cue</var>’s <a data-link-type="dfn" href="#cue-computed-line">computed
         line</a>.</p>
          <li>
           <p>Round <var>line</var> to an integer by adding 0.5 and then flooring it.</p>
          <li>
           <p><strong>Vertical Growing Left</strong>: Add one to <var>line</var> then negate
         it.</p>
          <li>
           <p>Let <var>position</var> be the result of multiplying <var>step</var> and <var>line
         offset</var>.</p>
          <li>
           <p><strong>Vertical Growing Left</strong>: Decrease <var>position</var> by the width of
         the bounding box of the boxes in <var>boxes</var>, then increase <var>position</var> by <var>step</var>.</p>
          <li>
           <p>If <var>line</var> is less than zero then increase <var>position</var> by <var>max
          dimension</var>, and negate <var>step</var>.</p>
           <p>Otherwise, increase <var>position</var> by <var>margin</var>.</p>
          <li>
           <p><strong>Horizontal</strong>: Move all the boxes in <var>boxes</var> down by the
          distance given by <var>position</var>.</p>
           <p><strong>Vertical</strong>: Move all the boxes in <var>boxes</var> right by the distance
          given by <var>position</var>.</p>
          <li>
           <p>Remember the position of all the boxes in <var>boxes</var> as their <var>specified
         position</var>.</p>
          <li>
           <p><strong>Horizontal</strong>: Let <var>title area</var> be a box that covers all of the <var>video</var>’s rendering area except for a height of <var>margin</var> at the top of
          the rendering area and a height of <var>margin</var> at the bottom of the rendering
          area.</p>
           <p><strong>Vertical</strong>: Let <var>title area</var> be a box that covers all of the <var>video</var>’s rendering area except for a width of <var>margin</var> at the left of
          the rendering area and a width of <var>margin</var> at the right of the rendering
          area.</p>
          <li>
           <p><i>Step loop</i>: If none of the boxes in <var>boxes</var> would overlap any of the
         boxes in <var>output</var>, and all of the boxes in <var>boxes</var> are entirely within
         the <var>title area</var> box, then jump to the step labeled <i>done positioning</i> below.</p>
          <li>
           <p>Let <var>current position score</var> be the percentage of the area of the bounding
         box of the boxes in <var>boxes</var> that  is outside the <var>title area</var> box.</p>
          <li>
           <p><strong>Horizontal</strong>: If <var>step</var> is negative and the top of the first
          line box in <var>boxes</var> is now above the top of the <var>title area</var>, or if <var>step</var> is positive and the bottom of the first line box in <var>boxes</var> is
          now below the bottom of the <var>title area</var>, jump to the step labeled <i>switch
          direction</i>.</p>
           <p><strong>Vertical</strong>: If <var>step</var> is negative and the left edge of the
          first line box in <var>boxes</var> is now to the left of the left edge of the <var>title
          area</var>, or if <var>step</var> is positive and the right edge of the first line box in <var>boxes</var> is now to the right of the right edge of the <var>title area</var>, jump
          to the step labeled <i>switch direction</i>.</p>
          <li>
           <p><strong>Horizontal</strong>: Move all the boxes in <var>boxes</var> down by the
          distance given by <var>step</var>. (If <var>step</var> is negative, then this will
          actually result in an upwards movement of the boxes in absolute terms.)</p>
           <p><strong>Vertical</strong>: Move all the boxes in <var>boxes</var> right by the distance
          given by <var>step</var>. (If <var>step</var> is negative, then this will actually result
          in a leftwards movement of the boxes in absolute terms.)</p>
          <li>
           <p>Jump back to the step labeled <i>step loop</i>.</p>
          <li>
           <p><i>Switch direction</i>: If <var>switched</var> is true, then remove all the boxes
         in <var>boxes</var>, and jump to the step labeled <i>done positioning</i> below.</p>
          <li>
           <p>Otherwise, move all the boxes in <var>boxes</var> back to their <var>specified
         position</var> as determined in the earlier step.</p>
          <li>
           <p>Negate <var>step</var>.</p>
          <li>
           <p>Set <var>switched</var> to true.</p>
          <li>
           <p>Jump back to the step labeled <i>step loop</i>.</p>
         </ol>
        <dt>If <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines flag</a> is not set
        <dd>
         <ol>
          <li>
           <p>Let <var>bounding box</var> be the bounding box of the boxes in <var>boxes</var>.</p>
          <li>
           <p>Run the appropriate steps from the following list:</p>
           <dl class="switch">
            <dt>If the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a>
            <dd>
             <dl class="switch">
              <dt>If the <a data-link-type="dfn" href="#webvtt-cue-line-alignment">WebVTT cue line alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-middle-alignment">middle alignment</a>
              <dd>
               <p>Move all the boxes in <var>boxes</var> up by half of the height of <var>bounding
             box</var>.</p>
              <dt>If the <a data-link-type="dfn" href="#webvtt-cue-line-alignment">WebVTT cue line alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-end-alignment">end alignment</a>
              <dd>
               <p>Move all the boxes in <var>boxes</var> up by the height of <var>bounding
             box</var>.</p>
             </dl>
            <dt>If the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> is <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-left-writing-direction">vertical growing left</a> or <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-right-writing-direction">vertical growing right</a>
            <dd>
             <dl class="switch">
              <dt>If the <a data-link-type="dfn" href="#webvtt-cue-line-alignment">WebVTT cue line alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-middle-alignment">middle alignment</a>
              <dd>
               <p>Move all the boxes in <var>boxes</var> left by half of the width of <var>bounding box</var>.</p>
              <dt>If the <a data-link-type="dfn" href="#webvtt-cue-line-alignment">WebVTT cue line alignment</a> is <a data-link-type="dfn" href="#webvtt-cue-position-end-alignment">end alignment</a>
              <dd>
               <p>Move all the boxes in <var>boxes</var> left by the width of <var>bounding
             box</var>.</p>
             </dl>
           </dl>
          <li>
           <p>If none of the boxes in <var>boxes</var> would overlap any of the boxes in <var>output</var>, and all the boxes in <var>boxes</var> are within the <var>video</var>’s
         rendering area, then jump to the step labeled <i>done positioning</i> below.</p>
          <li>
           <p>If there is a position to which the boxes in <var>boxes</var> can be moved while
         maintaining the relative positions of the boxes in <var>boxes</var> to each other such that
         none of the boxes in <var>boxes</var> would overlap any of the boxes in <var>output</var>,
         and all the boxes in <var>boxes</var> would be within the <var>video</var>’s rendering
         area, then move the boxes in <var>boxes</var> to the closest such position to their current
         position, and then jump to the step labeled <i>done positioning</i> below. If there are
         multiple such positions that are equidistant from their current position, use the highest
         one amongst them; if there are several at that height, then use the leftmost one amongst
         them.</p>
          <li>
           <p>Otherwise, jump to the step labeled <i>done positioning</i> below. (The boxes will
         unfortunately overlap.)</p>
         </ol>
       </dl>
      <li>
       <p><i>Done positioning</i>: Return <var>boxes</var>.</p>
     </ol>
    </section>
    <section>
     <h4 class="heading settled" data-level="6.1.1" id="applying-css-properties-to-webvtt-node-objects"><span class="secno">6.1.1. </span><span class="content">Applying CSS properties to <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Objects</a></span><a class="self-link" href="#applying-css-properties-to-webvtt-node-objects"></a></h4>
     <p>When following the <a data-link-type="dfn" href="#rules-for-updating-the-display-of-webvtt-text-tracks">rules for updating the display of WebVTT text tracks</a>, user agents
    must set properties of <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Objects</a> at the CSS user
    agent cascade layer as defined in this section. <a data-link-type="biblio" href="#biblio-css21">[CSS21]</a></p>
     <p>Initialize the (root) <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a> with the following CSS settings:</p>
     <ul>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-position-3/#propdef-position">position</a> property must be set to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-position-3/#valdef-position-absolute">absolute</a>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-unicode-bidi">unicode-bidi</a> property must be set to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-writing-modes-3/#valdef-unicode-bidi-plaintext">plaintext</a>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-direction">direction</a> property must be set to <var>direction</var>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-writing-mode">writing-mode</a> property must be set to <var>writing-mode</var>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-position-3/#propdef-top">top</a> property must be set to <var>top</var>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-position-3/#propdef-left">left</a> property must be set to <var>left</var>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visudet.html#propdef-width">width</a> property must be set to <var>width</var>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visudet.html#propdef-height">height</a> property must be set to <var>height</var>
     </ul>
     <p>The variables <var>direction</var>, <var>writing-mode</var>, <var>top</var>, <var>left</var>, <var>width</var>, and <var>height</var> are the values with those names determined by the <a data-link-type="dfn" href="#rules-for-updating-the-display-of-webvtt-text-tracks">rules for updating the display of WebVTT text tracks</a> for the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> from whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-text">text</a> the <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a> was
    constructed.</p>
     <p>The <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-3/#propdef-text-align">text-align</a> property on the (root) <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a> must be set to the
    value in the second cell of the row of the table below whose first cell is the value of the
    corresponding <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue">cue</a>’s <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a>:</p>
     <table>
      <thead>
       <tr>
        <th><a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a>
        <th><a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-3/#propdef-text-align">text-align</a> value
      <tbody>
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-start-alignment">Start alignment</a>
        <td><a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-text-3/#valdef-text-align-start">start</a>
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-middle-alignment">Middle alignment</a>
        <td><a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-text-3/#valdef-text-align-center">center</a>
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-end-alignment">End alignment</a>
        <td><a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-text-3/#valdef-text-align-end">end</a>
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-left-alignment">Left alignment</a>
        <td><a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-text-3/#valdef-text-align-left">left</a>
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-right-alignment">Right alignment</a>
        <td><a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-text-3/#valdef-text-align-right">right</a>
     </table>
     <p>The <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font">font</a> shorthand property on the (root) <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a> must be set to
    '5vh sans-serif'. <a data-link-type="biblio" href="#biblio-css3-ruby">[CSS3-RUBY]</a> <a data-link-type="biblio" href="#biblio-css-values">[CSS-VALUES]</a></p>
     <p>The <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-color-3/#color0">color</a> property on the (root) <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a> must be set to
    'rgba(255,255,255,1)'. <a data-link-type="biblio" href="#biblio-css3-color">[CSS3-COLOR]</a></p>
     <p>The <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#background">background</a> shorthand property on the <a data-link-type="dfn" href="#webvtt-cue-background-box">WebVTT cue background box</a> must be set to
    'rgba(0,0,0,0.8)'. <a data-link-type="biblio" href="#biblio-css3-color">[CSS3-COLOR]</a></p>
     <p>The <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-3/#propdef-white-space">white-space</a> property on the (root) <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a> must be set to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-text-3/#valdef-white-space-pre-line">pre-line</a>. <a data-link-type="biblio" href="#biblio-css21">[CSS21]</a></p>
     <p>The <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font-style">font-style</a> property on <a data-link-type="dfn" href="#webvtt-italic-object">WebVTT Italic Objects</a> must
    be set to <span class="css">italic</span>.</p>
     <p>The <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font-weight">font-weight</a> property on <a data-link-type="dfn" href="#webvtt-bold-object">WebVTT Bold Objects</a> must be
    set to <span class="css">bold</span>.</p>
     <p>The <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-decor-3/#propdef-text-decoration">text-decoration</a> property on <a data-link-type="dfn" href="#webvtt-underline-object">WebVTT Underline
    Objects</a> must be set to <span class="css">underline</span>.</p>
     <p>The <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visuren.html#propdef-display">display</a> property on <a data-link-type="dfn" href="#webvtt-ruby-object">WebVTT Ruby Objects</a> must be set
    to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-display-3/#valdef-display-ruby">ruby</a>. <a data-link-type="biblio" href="#biblio-css3-ruby">[CSS3-RUBY]</a></p>
     <p>The <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visuren.html#propdef-display">display</a> property on <a data-link-type="dfn" href="#webvtt-ruby-text-object">WebVTT Ruby Text Objects</a> must be set to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-display-3/#valdef-display-ruby-text">ruby-text</a>. <a data-link-type="biblio" href="#biblio-css3-ruby">[CSS3-RUBY]</a></p>
     <p>Every <a data-link-type="dfn" href="#webvtt-region-object">WebVTT region object</a> is initialized with the following CSS settings:</p>
     <ul>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-position-3/#propdef-position">position</a> property must be set to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-position-3/#valdef-position-absolute">absolute</a>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-writing-mode">writing-mode</a> property must be set to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-writing-modes-3/#valdef-writing-mode-horizontal-tb">horizontal-tb</a>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#background">background</a> shorthand property must be set to 'rgba(0,0,0,0.8)'
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-3/#propdef-word-wrap">word-wrap</a> property must be set to <span class="css">break-word</span>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-3/#propdef-overflow-wrap">overflow-wrap</a> property must be set to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-text-3/#valdef-overflow-wrap-break-word">break-word</a>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font">font</a> shorthand property must be set to 'calc(5.33vh/1.3) sans-serif'
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visudet.html#propdef-line-height">line-height</a> shorthand property must be set to '5.33vh'
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-color-3/#color0">color</a> property must be set to 'rgba(255,255,255,1)'
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-overflow-3/#propdef-overflow">overflow</a> property must be set to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-overflow-3/#valdef-overflow-hidden">hidden</a>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visudet.html#propdef-width">width</a> property must be set to <var>width</var>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visudet.html#propdef-min-height">min-height</a> property must be set to <span class="css">0px</span>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visudet.html#propdef-max-height">max-height</a> property must be set to <var>height</var>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-position-3/#propdef-left">left</a> property must be set to <var>left</var>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-position-3/#propdef-top">top</a> property must be set to <var>top</var>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visuren.html#propdef-display">display</a> property must be set to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-display-3/#valdef-display-inline-flex">inline-flex</a>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-flexbox-1/#propdef-flex-flow">flex-flow</a> property must be set to <span class="css">column</span>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-align-3/#propdef-justify-content">justify-content</a> property must be set to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-flexbox-1/#valdef-justify-content-flex-end">flex-end</a>
     </ul>
     <p>The variables <var>width</var>, <var>height</var>, <var>top</var>, and <var>left</var> are
    the values with those names determined by the <a data-link-type="dfn" href="#rules-for-updating-the-display-of-webvtt-text-tracks">rules for updating the display of WebVTT text
    tracks</a> for the <a data-link-type="dfn" href="#webvtt-region">WebVTT region</a> from which the <a data-link-type="dfn" href="#webvtt-region-object">WebVTT region object</a> was
    constructed.</p>
     <p>The children of every <a data-link-type="dfn" href="#webvtt-region-object">WebVTT region object</a> are further initialized with these CSS
    settings:</p>
     <ul>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-position-3/#propdef-position">position</a> property must be set to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-position-3/#valdef-position-relative">relative</a>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-writing-modes-3/#propdef-unicode-bidi">unicode-bidi</a> property must be set to <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-writing-modes-3/#valdef-unicode-bidi-plaintext">plaintext</a>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visudet.html#propdef-width">width</a> property must be set to <span class="css">auto</span>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visudet.html#propdef-height">height</a> property must be set to <var>height</var>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-position-3/#propdef-left">left</a> property must be set to <var>left</var>
      <li>the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-3/#propdef-text-align">text-align</a> property must be set as described for the root <a data-link-type="dfn" href="#list-of-webvtt-node-objects">List of WebVTT Node
     Objects</a> not part of a region
     </ul>
     <p>All other non-inherited properties must be set to their initial values; inherited properties
    on the root <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a> must inherit their values from the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">media
    element</a> for which the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> is being rendered, if any. If there is no <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">media
    element</a> (i.e. if the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track">text track</a> is being rendered for another media playback
    mechanism), then inherited properties on the root <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a> and the <a data-link-type="dfn" href="#webvtt-region-object">WebVTT region objects</a> must take their initial values.</p>
     <p>If there are style sheets that apply to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">media element</a> or other playback mechanism,
    then they must be interpreted as defined in the next section.</p>
    </section>
    <section>
     <h4 class="heading settled" data-level="6.1.2" id="css-extensions"><span class="secno">6.1.2. </span><span class="content">CSS extensions</span><a class="self-link" href="#css-extensions"></a></h4>
     <p>When a user agent is rendering one or more <a data-link-type="dfn" href="#webvtt-cue">WebVTT cues</a> according to
    the <a data-link-type="dfn" href="#rules-for-updating-the-display-of-webvtt-text-tracks">rules for updating the display of WebVTT text tracks</a>, <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Objects</a> in the <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a> used in the rendering
    can be matched by certain pseudo-selectors as defined below. These selectors can begin or stop
    matching individual <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Objects</a> while a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue">cue</a> is being rendered, even in between applications of the <a data-link-type="dfn" href="#rules-for-updating-the-display-of-webvtt-text-tracks">rules for updating
    the display of WebVTT text tracks</a> (which are only run when the set of active cues changes).
    User agents that support the pseudo-element described below must dynamically update renderings
    accordingly. When either <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-3/#propdef-white-space">white-space</a> or one of the properties corresponding to the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font">font</a> shorthand (including <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visudet.html#propdef-line-height">line-height</a>) changes value, then the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-display-state">text track
    cue display state</a> must be emptied and the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track">text track</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#rules-for-updating-the-text-track-rendering">rules for updating the text
    track rendering</a> must be immediately rerun.</p>
     <p>Pseudo-elements apply to elements that are matched by selectors. For the purpose of this
    section, that element is the <i>matched element</i>. The pseudo-elements defined in the
    following sections affect the styling of parts of <a data-link-type="dfn" href="#webvtt-cue">WebVTT cues</a> that are
    being rendered for the <i>matched element</i>.</p>
     <p class="note" role="note">If the <i>matched element</i> is not a <a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#video">video</a> element, the
    pseudo-elements defined below won’t have any effect according to this specification.</p>
     <p>A CSS user agent that implements the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track">text tracks</a> model must
    implement the <span class="css">::cue</span> and <span class="css">::cue(selector)</span> pseudo-elements, and the <a data-link-type="dfn" href="#past-pseudo-class">':past'</a> and <a data-link-type="dfn" href="#future-pseudo-class">':future'</a> pseudo-classes.</p>
     <section>
      <h5 class="heading settled" data-level="6.1.2.1" id="the-cue-pseudo-element"><span class="secno">6.1.2.1. </span><span class="content">The <span class="css">::cue</span> pseudo-element</span><a class="self-link" href="#the-cue-pseudo-element"></a></h5>
      <p>The '<dfn class="css" data-dfn-type="selector" data-export="" data-lt="pseudo-cue" id="selectordef-pseudo-cue">::cue<a class="self-link" href="#selectordef-pseudo-cue"></a></dfn>' pseudo-element (with no argument) matches any <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a> constructed for the <i>matched element</i>, with the
     exception that the properties corresponding to the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#background">background</a> shorthand must be applied to
     the <a data-link-type="dfn" href="#webvtt-cue-background-box">WebVTT cue background box</a> rather than the <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a>.</p>
      <p>The following properties apply to the <span class="css">::cue</span> pseudo-element with no argument; other
     properties set on the pseudo-element must be ignored:</p>
      <ul class="brief">
       <li><a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-color-3/#color0">color</a>
       <li><a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-color-4/#propdef-opacity">opacity</a>
       <li><a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visufx.html#propdef-visibility">visibility</a>
       <li><a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-decor-3/#propdef-text-decoration">text-decoration</a>
       <li><a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-decor-3/#propdef-text-shadow">text-shadow</a>
       <li>the properties corresponding to the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#background">background</a> shorthand
       <li>the properties corresponding to the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-ui-3/#propdef-outline">outline</a> shorthand
       <li>the properties corresponding to the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font">font</a> shorthand, including <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visudet.html#propdef-line-height">line-height</a>
       <li><a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-3/#propdef-white-space">white-space</a>
      </ul>
      <p>The '<dfn class="css" data-dfn-type="selector" data-export="" data-lt="pseudo-cue-selector" id="selectordef-pseudo-cue-selector">::cue(<var>selector</var>)<a class="self-link" href="#selectordef-pseudo-cue-selector"></a></dfn>' pseudo-element with
     an argument must have an argument that consists of a CSS selector <a data-link-type="biblio" href="#biblio-selectors4">[SELECTORS4]</a>. It matches
     any <a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal Node Object</a> constructed for the <i>matched element</i> that also
     matches the given CSS selector, with the nodes being treated as follows:</p>
      <ul>
       <li>
        <p>The <i>document tree</i> against which the selectors are matched is the tree of <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Objects</a> rooted at the <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node
      Objects</a> for the cue.</p>
       <li>
        <p><a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal Node Objects</a> are elements in
      the tree.</p>
       <li><a data-link-type="dfn" href="#webvtt-leaf-node-object">WebVTT Leaf Node Objects</a> cannot be matched.
       <li>
        <p>For the purposes of element type selectors, the names of <a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal Node Objects</a> are as given by the following table, where objects
       having the concrete class given in a cell in the first column have the name given by the
       second column of the same row:</p>
        <table>
         <thead>
          <tr>
           <th>Concrete class
           <th>Name
         <tbody>
          <tr>
           <td><a data-link-type="dfn" href="#webvtt-class-object">WebVTT Class Objects</a>
           <td><code>c</code>
          <tr>
           <td><a data-link-type="dfn" href="#webvtt-italic-object">WebVTT Italic Objects</a>
           <td><code>i</code>
          <tr>
           <td><a data-link-type="dfn" href="#webvtt-bold-object">WebVTT Bold Objects</a>
           <td><code>b</code>
          <tr>
           <td><a data-link-type="dfn" href="#webvtt-underline-object">WebVTT Underline Objects</a>
           <td><code>u</code>
          <tr>
           <td><a data-link-type="dfn" href="#webvtt-ruby-object">WebVTT Ruby Objects</a>
           <td><code>ruby</code>
          <tr>
           <td><a data-link-type="dfn" href="#webvtt-ruby-text-object">WebVTT Ruby Text Objects</a>
           <td><code>rt</code>
          <tr>
           <td><a data-link-type="dfn" href="#webvtt-voice-object">WebVTT Voice Objects</a>
           <td><code>v</code>
          <tr>
           <td><a data-link-type="dfn" href="#webvtt-language-object">WebVTT Language Objects</a>
           <td><code>lang</code>
          <tr>
           <td>Other elements (specifically, <a data-link-type="dfn" href="#list-of-webvtt-node-objects">lists of WebVTT
          Node Objects</a>)
           <td>No explicit name.
        </table>
       <li>
        <p>For the purposes of element type and universal selectors, <a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal Node Objects</a> are considered as being in the namespace
      expressed as the empty string.</p>
       <li>
        <p>For the purposes of attribute selector matching, <a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal Node Objects</a> have no attributes, except for <a data-link-type="dfn" href="#webvtt-voice-object">WebVTT Voice Objects</a>, which have a single attribute named "<code>voice</code>"
      whose value is the value of the <a data-link-type="dfn" href="#webvtt-voice-object">WebVTT Voice Object</a>, and <a data-link-type="dfn" href="#webvtt-language-object">WebVTT Language Objects</a>, which have a single attribute named "<code>lang</code>"
      whose value is the object’s <a data-link-type="dfn" href="#webvtt-node-objects-applicable-language">applicable
      language</a>.</p>
       <li>
        <p>For the purposes of class selector matching, <a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal Node Objects</a> have the classes described as the <a data-link-type="dfn" href="#webvtt-node-objects-applicable-classes">WebVTT Node
      Object’s applicable classes</a>.</p>
       <li>
        <p>For the purposes of the <code data-lt="selector-lang">:lang()</code> pseudo-class, <a data-link-type="dfn" href="#webvtt-internal-node-object">WebVTT Internal Node Objects</a> have the language
      described as the <a data-link-type="dfn" href="#webvtt-node-objects-applicable-language">WebVTT Node Object’s applicable language</a>.</p>
       <li>
        <p>For the purposes of ID selector matching, <a data-link-type="dfn" href="#list-of-webvtt-node-objects">lists
      of WebVTT Node Objects</a> have the ID given by the cue’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-identifier">text track cue identifier</a>, if
      any.</p>
      </ul>
      <p>The following properties apply to the <span class="css">::cue()</span> pseudo-element with an argument:</p>
      <ul class="brief">
       <li><a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-color-3/#color0">color</a>
       <li><a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-color-4/#propdef-opacity">opacity</a>
       <li><a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visufx.html#propdef-visibility">visibility</a>
       <li><a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-decor-3/#propdef-text-decoration">text-decoration</a>
       <li><a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-decor-3/#propdef-text-shadow">text-shadow</a>
       <li>the properties corresponding to the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#background">background</a> shorthand
       <li>the properties corresponding to the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-ui-3/#propdef-outline">outline</a> shorthand
       <li>properties relating to the transition and animation features
      </ul>
      <p>In addition, the following properties apply to the <span class="css">::cue()</span> pseudo-element with an
     argument when the selector does not contain the <a data-link-type="dfn" href="#past-pseudo-class">':past'</a> and <a data-link-type="dfn" href="#future-pseudo-class">':future'</a> pseudo-classes:</p>
      <ul class="brief">
       <li>the properties corresponding to the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font">font</a> shorthand, including <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visudet.html#propdef-line-height">line-height</a>
       <li><a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-3/#propdef-white-space">white-space</a>
      </ul>
      <p>Properties that do not apply must be ignored.</p>
      <p>As a special exception, the properties corresponding to the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#background">background</a> shorthand, when
     they would have been applied to the <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a>, must instead be applied
     to the <a data-link-type="dfn" href="#webvtt-cue-background-box">WebVTT cue background box</a>.</p>
     </section>
     <section>
      <h5 class="heading settled" data-level="6.1.2.2" id="the-past-and-future-pseudo-classes"><span class="secno">6.1.2.2. </span><span class="content">The <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/selectors-4/#past-pseudo">:past</a> and <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/selectors-4/#future-pseudo">:future</a> pseudo-classes</span><a class="self-link" href="#the-past-and-future-pseudo-classes"></a></h5>
      <p>The <a data-link-type="dfn" href="#past-pseudo-class">':past'</a> and <a data-link-type="dfn" href="#future-pseudo-class">':future'</a> pseudo-classes sometimes match <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Objects</a>. <a data-link-type="biblio" href="#biblio-selectors4">[SELECTORS4]</a></p>
      <p>The <dfn data-dfn-type="dfn" data-lt="past-pseudo-class" data-noexport="" id="past-pseudo-class">':past'<a class="self-link" href="#past-pseudo-class"></a></dfn> pseudo-class only matches <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Objects</a> that are <i>in the past</i>.</p>
      <p>A <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Object</a> <var>c</var> is <dfn data-dfn-type="dfn" data-noexport="" id="in-the-past">in the past<a class="self-link" href="#in-the-past"></a></dfn> if, in a pre-order,
     depth-first traversal of the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a>’s <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a>, there
     exists a <a data-link-type="dfn" href="#webvtt-timestamp-object">WebVTT Timestamp Object</a> whose value is less than the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#current-playback-position">current playback
     position</a> of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">media element</a> that is the <i>matched element</i>, entirely after the <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Object</a> <var>c</var>.</p>
      <p>The <dfn data-dfn-type="dfn" data-lt="future-pseudo-class" data-noexport="" id="future-pseudo-class">':future'<a class="self-link" href="#future-pseudo-class"></a></dfn> pseudo-class only matches <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Objects</a> that are <i>in the future</i>.</p>
      <p>A <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Object</a> <var>c</var> is <dfn data-dfn-type="dfn" data-noexport="" id="in-the-future">in the future<a class="self-link" href="#in-the-future"></a></dfn> if, in a pre-order,
     depth-first traversal of the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a>’s <a data-link-type="dfn" href="#list-of-webvtt-node-objects">list of WebVTT Node Objects</a>, there
     exists a <a data-link-type="dfn" href="#webvtt-timestamp-object">WebVTT Timestamp Object</a> whose value is greater than the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#current-playback-position">current playback
     position</a> of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">media element</a> that is the <i>matched element</i>, entirely before
     the <a data-link-type="dfn" href="#webvtt-node-object">WebVTT Node Object</a> <var>c</var>.</p>
     </section>
     <section>
      <h3 class="heading settled" data-level="6.2" id="the-cue-region-pseudo-element"><span class="secno">6.2. </span><span class="content">The <span class="css">::cue-region</span> pseudo-element</span><a class="self-link" href="#the-cue-region-pseudo-element"></a></h3>
      <p>Pseudo-elements apply to elements that are matched by selectors. For the purpose of this
     section, that element is the matched element. The pseudo-element defined below affects the
     styling of text track regions that are being rendered for the matched element.</p>
      <p class="note" role="note">If the matched element is not a video element, the pseudo-element defined below
     won’t have any effect according to this specification.</p>
      <p>The '<dfn class="css" data-dfn-type="selector" data-export="" data-lt="pseudo-region" id="selectordef-pseudo-region">::cue-region<a class="self-link" href="#selectordef-pseudo-region"></a></dfn>' pseudo-element (with no argument)
     matches any list of <a data-link-type="dfn" href="#webvtt-region-object">WebVTT region objects</a> constructed for
     the <i>matched element</i>.</p>
      <p>The <a class="css" data-link-type="selector" href="#selectordef-pseudo-cue">same properties that apply to '::cue'</a> apply to the <span class="css">::cue-region</span> pseudo-element with no argument; other properties set on the pseudo-element
     must be ignored.</p>
      <p>When a user agent is rendering one or more text track regions according to the <a data-link-type="dfn" href="#rules-for-updating-the-display-of-webvtt-text-tracks">rules for
     updating the display of WebVTT text tracks</a>, <a data-link-type="dfn" href="#webvtt-region-object">WebVTT region
     objects</a> used in the rendering can be matched by the above pseudo-element. User agents that
     support the pseudo-element must dynamically update renderings accordingly. When either <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-text-3/#propdef-white-space">white-space</a> or one of the properties corresponding to the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font">font</a> shorthand (including <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css2/visudet.html#propdef-line-height">line-height</a>) changes value, then the text track cue display state of all the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cues</a> in the region must be emptied and the text track’s rules for updating the
     text track rendering must be immediately rerun.</p>
      <p>A CSS user agent that implements the text tracks model must implement the <span class="css">::cue-region</span> pseudo-element.</p>
     </section>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="7" id="api"><span class="secno">7. </span><span class="content">API</span><a class="self-link" href="#api"></a></h2>
    <section>
     <h3 class="heading settled" data-level="7.1" id="the-vttcue-interface"><span class="secno">7.1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#vttcue">VTTCue</a></code> interface</span><a class="self-link" href="#the-vttcue-interface"></a></h3>
     <p>The following interface is used to expose WebVTT cues in the DOM API:</p>
<pre class="idl">enum <dfn class="idl-code" data-dfn-type="enum" data-export="" id="enumdef-autokeyword">AutoKeyword<a class="self-link" href="#enumdef-autokeyword"></a></dfn> { "auto" };enum <dfn class="idl-code" data-dfn-type="enum" data-export="" id="enumdef-directionsetting">DirectionSetting<a class="self-link" href="#enumdef-directionsetting"></a></dfn> { "" /* horizontal */, "rl", "lr" };
enum <dfn class="idl-code" data-dfn-type="enum" data-export="" id="enumdef-linealignsetting">LineAlignSetting<a class="self-link" href="#enumdef-linealignsetting"></a></dfn> { "start", "middle", "end" };
enum <dfn class="idl-code" data-dfn-type="enum" data-export="" id="enumdef-positionalignsetting">PositionAlignSetting<a class="self-link" href="#enumdef-positionalignsetting"></a></dfn> { "start", "middle", "end", "auto" };
enum <dfn class="idl-code" data-dfn-type="enum" data-export="" id="enumdef-alignsetting">AlignSetting<a class="self-link" href="#enumdef-alignsetting"></a></dfn> { "start", "middle", "end", "left", "right" };
[<dfn class="idl-code" data-dfn-for="VTTCue" data-dfn-type="constructor" data-export="" data-lt="VTTCue(startTime, endTime, text)" id="dom-vttcue-vttcue">Constructor<a class="self-link" href="#dom-vttcue-vttcue"></a></dfn>(double <dfn class="idl-code" data-dfn-for="VTTCue/VTTCue(startTime, endTime, text)" data-dfn-type="argument" data-export="" id="dom-vttcue-vttcue-starttime-endtime-text-starttime">startTime<a class="self-link" href="#dom-vttcue-vttcue-starttime-endtime-text-starttime"></a></dfn>, double <dfn class="idl-code" data-dfn-for="VTTCue/VTTCue(startTime, endTime, text)" data-dfn-type="argument" data-export="" id="dom-vttcue-vttcue-starttime-endtime-text-endtime">endTime<a class="self-link" href="#dom-vttcue-vttcue-starttime-endtime-text-endtime"></a></dfn>, DOMString <dfn class="idl-code" data-dfn-for="VTTCue/VTTCue(startTime, endTime, text)" data-dfn-type="argument" data-export="" id="dom-vttcue-vttcue-starttime-endtime-text-text">text<a class="self-link" href="#dom-vttcue-vttcue-starttime-endtime-text-text"></a></dfn>)]
interface <dfn class="idl-code" data-dfn-type="interface" data-export="" id="vttcue">VTTCue<a class="self-link" href="#vttcue"></a></dfn> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackcue">TextTrackCue</a> {
  attribute <a data-link-type="idl-name" href="#vttregion">VTTRegion</a>? <a class="idl-code" data-link-type="attribute" data-type="VTTRegion? " href="#dom-vttcue-region">region</a>;
  attribute <a data-link-type="idl-name" href="#enumdef-directionsetting">DirectionSetting</a> <a class="idl-code" data-link-type="attribute" data-type="DirectionSetting " href="#dom-vttcue-vertical">vertical</a>;
  attribute boolean <a class="idl-code" data-link-type="attribute" data-type="boolean " href="#dom-vttcue-snaptolines">snapToLines</a>;
  attribute (double or <a data-link-type="idl-name" href="#enumdef-autokeyword">AutoKeyword</a>) <a class="idl-code" data-link-type="attribute" data-type="(double or AutoKeyword) " href="#dom-vttcue-line">line</a>;
  attribute <a data-link-type="idl-name" href="#enumdef-linealignsetting">LineAlignSetting</a> <a class="idl-code" data-link-type="attribute" data-type="LineAlignSetting " href="#dom-vttcue-linealign">lineAlign</a>;
  attribute (double or <a data-link-type="idl-name" href="#enumdef-autokeyword">AutoKeyword</a>) <dfn class="idl-code" data-dfn-for="VTTCue" data-dfn-type="attribute" data-export="" data-type="(double or AutoKeyword) " id="dom-vttcue-position">position<a class="self-link" href="#dom-vttcue-position"></a></dfn>;
  attribute <a data-link-type="idl-name" href="#enumdef-positionalignsetting">PositionAlignSetting</a> <a class="idl-code" data-link-type="attribute" data-type="PositionAlignSetting " href="#dom-vttcue-positionalign">positionAlign</a>;
  attribute double <a class="idl-code" data-link-type="attribute" data-type="double " href="#dom-vttcue-size">size</a>;
  attribute <a data-link-type="idl-name" href="#enumdef-alignsetting">AlignSetting</a> <a class="idl-code" data-link-type="attribute" data-type="AlignSetting " href="#dom-vttcue-align">align</a>;
  attribute DOMString <a class="idl-code" data-link-type="attribute" data-type="DOMString " href="#dom-vttcue-text">text</a>;
  <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#documentfragment">DocumentFragment</a> <a class="idl-code" data-link-type="method" href="#dom-vttcue-getcueashtml">getCueAsHTML</a>();
};</pre>
     <dl class="domintro">
      <dt><var>cue</var> = new <a class="idl-code" data-link-type="constructor" href="#dom-vttcue-vttcue">VTTCue</a>( <var>startTime</var>, <var>endTime</var>, <var>text</var> )
      <dd>
       <p>Returns a new <code class="idl"><a data-link-type="idl" href="#vttcue">VTTCue</a></code> object, for use with the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/embedded-content.html#dom-texttrack-addcue">addCue()</a></code> method.</p>
       <p>The <var>startTime</var> argument sets the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-start-time">text track cue start time</a>.</p>
       <p>The <var>endTime</var> argument sets the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-end-time">text track cue end time</a>.</p>
       <p>The <var>text</var> argument sets the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-text">text track cue text</a>.</p>
      <dt><var>cue</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttcue-region">region</a></code>
      <dd>
       <p>Returns the <code class="idl"><a data-link-type="idl" href="#vttregion">VTTRegion</a></code> object to which this cue belongs, if any, or null
      otherwise.</p>
       <p>Can be set.</p>
      <dt><var>cue</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttcue-vertical">vertical</a></code> [ = <var>value</var> ]
      <dd>
       <p>Returns a string representing the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a>, as follows:</p>
       <dl class="switch">
        <dt>If it is <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a>
        <dd>
         <p>The empty string.</p>
        <dt>If it is <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-left-writing-direction">vertical growing
       left</a>
        <dd>
         <p>The string "<code>rl</code>".</p>
        <dt>If it is <a data-link-type="dfn" href="#webvtt-cue-vertical-growing-right-writing-direction">vertical growing
       right</a>
        <dd>
         <p>The string "<code>lr</code>".</p>
       </dl>
       <p>Can be set.</p>
      <dt><var>cue</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttcue-snaptolines">snapToLines</a></code> [ = <var>value</var> ]
      <dd>
       <p>Returns true if the <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines flag</a> is set, false otherwise.</p>
       <p>Can be set.</p>
      <dt><var>cue</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttcue-line">line</a></code> [ = <var>value</var> ]
      <dd>
       <p>Returns the <a data-link-type="dfn" href="#webvtt-cue-line">WebVTT cue line</a>. In the case of the value being <a data-link-type="dfn" href="#webvtt-cue-line-automatic">auto</a>, the string "<code>auto</code>" is returned.</p>
       <p>Can be set.</p>
      <dt><var>cue</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttcue-linealign">lineAlign</a></code> [ = <var>value</var> ]
      <dd>
       <p>Returns a string representing the <a data-link-type="dfn" href="#webvtt-cue-line-alignment">WebVTT cue line alignment</a>, as follows:</p>
       <dl class="switch">
        <dt>If it is <a data-link-type="dfn" href="#webvtt-cue-line-start-alignment">start alignment</a>
        <dd>
         <p>The string "<code>start</code>".</p>
        <dt>If it is <a data-link-type="dfn" href="#webvtt-cue-line-middle-alignment">middle alignment</a>
        <dd>
         <p>The string "<code>middle</code>".</p>
        <dt>If it is <a data-link-type="dfn" href="#webvtt-cue-line-end-alignment">end alignment</a>
        <dd>
         <p>The string "<code>end</code>".</p>
       </dl>
       <p>Can be set.</p>
      <dt><var>cue</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttcue-position">position</a></code> [ = <var>value</var> ]
      <dd>
       <p>Returns the <a data-link-type="dfn" href="#webvtt-cue-position">WebVTT cue position</a>. In the case of the value being <a data-link-type="dfn" href="#webvtt-cue-automatic-position">auto</a>, the string "<code>auto</code>" is returned.</p>
       <p>Can be set.</p>
      <dt><var>cue</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttcue-positionalign">positionAlign</a></code> [ = <var>value</var> ]
      <dd>
       <p>Returns a string representing the <a data-link-type="dfn" href="#webvtt-cue-position-alignment">WebVTT cue position alignment</a>, as follows:</p>
       <dl class="switch">
        <dt>If it is <a data-link-type="dfn" href="#webvtt-cue-position-start-alignment">start alignment</a>
        <dd>
         <p>The string "<code>start</code>".</p>
        <dt>If it is <a data-link-type="dfn" href="#webvtt-cue-position-middle-alignment">middle alignment</a>
        <dd>
         <p>The string "<code>middle</code>".</p>
        <dt>If it is <a data-link-type="dfn" href="#webvtt-cue-position-end-alignment">end alignment</a>
        <dd>
         <p>The string "<code>end</code>".</p>
        <dt>If it is <a data-link-type="dfn" href="#webvtt-cue-position-automatic-alignment">automatic alignment</a>
        <dd>
         <p>The string "<code>auto</code>".</p>
       </dl>
       <p>Can be set.</p>
      <dt><var>cue</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttcue-size">size</a></code> [ = <var>value</var> ]
      <dd>
       <p>Returns the <a data-link-type="dfn" href="#webvtt-cue-size">WebVTT cue size</a>.</p>
       <p>Can be set.</p>
      <dt><var>cue</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttcue-align">align</a></code> [ = <var>value</var> ]
      <dd>
       <p>Returns a string representing the <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a>, as follows:</p>
       <dl class="switch">
        <dt>If it is <a data-link-type="dfn" href="#webvtt-cue-start-alignment">start alignment</a>
        <dd>
         <p>The string "<code>start</code>".</p>
        <dt>If it is <a data-link-type="dfn" href="#webvtt-cue-middle-alignment">middle alignment</a>
        <dd>
         <p>The string "<code>middle</code>".</p>
        <dt>If it is <a data-link-type="dfn" href="#webvtt-cue-end-alignment">end alignment</a>
        <dd>
         <p>The string "<code>end</code>".</p>
        <dt>If it is <a data-link-type="dfn" href="#webvtt-cue-left-alignment">left alignment</a>
        <dd>
         <p>The string "<code>left</code>".</p>
        <dt>If it is <a data-link-type="dfn" href="#webvtt-cue-right-alignment">right alignment</a>
        <dd>
         <p>The string "<code>right</code>".</p>
       </dl>
       <p>Can be set.</p>
      <dt><var>cue</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttcue-text">text</a></code> [ = <var>value</var> ]
      <dd>
       <p>Returns the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-text">text track cue text</a> in raw unparsed form.</p>
       <p>Can be set.</p>
      <dt><var>fragment</var> = <var>cue</var> . <a class="idl-code" data-link-type="method" href="#dom-vttcue-getcueashtml">getCueAsHTML</a>()
      <dd>
       <p>Returns the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-text">text track cue text</a> as a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#documentfragment">DocumentFragment</a></code> of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#html-elements">HTML
      elements</a> and other DOM nodes.</p>
     </dl>
     <p>The <dfn class="idl-code" data-dfn-for="VTTCue" data-dfn-type="constructor" data-export="" data-lt="VTTCue()" id="dom-vttcue-vttcue">VTTCue(<var>startTime</var>, <var>endTime</var>, <var>text</var>)<a class="self-link" href="#dom-vttcue-vttcue"></a></dfn> constructor, when invoked, must run the following
    steps:</p>
     <ol>
      <li>
       <p>Create a new <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a>. Let <var>cue</var> be that <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a>.</p>
      <li>
       <p>Let <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-start-time">text track cue start time</a> be the value of the <var>startTime</var> argument, interpreted as a time in seconds.</p>
      <li>
       <p>Let <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-end-time">text track cue end time</a> be the value of the <var>endTime</var> argument, interpreted as a time in seconds.</p>
      <li>
       <p>Let <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-text">text track cue text</a> be the value of the <var>text</var> argument, and let the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#rules-for-extracting-the-chapter-title">rules for extracting the chapter title</a> be the <a data-link-type="dfn" href="#webvtt-rules-for-extracting-the-chapter-title0">WebVTT rules for
     extracting the chapter title</a>.</p>
      <li>
       <p>Let <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-identifier">text track cue identifier</a> be the empty string.</p>
      <li>
       <p>Let <var>cue</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-pause-on-exit-flag">text track cue pause-on-exit flag</a> be false.</p>
      <li>
       <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-region">WebVTT cue region</a> be null.</p>
      <li>
       <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> be <a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">horizontal</a>.</p>
      <li>
       <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines flag</a> be true.</p>
      <li>
       <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-line">WebVTT cue line</a> be <a data-link-type="dfn" href="#webvtt-cue-line-automatic">auto</a>.</p>
      <li>
       <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-line-alignment">WebVTT cue line alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-line-start-alignment">start alignment</a>.</p>
      <li>
       <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-position">WebVTT cue position</a> be <a data-link-type="dfn" href="#webvtt-cue-automatic-position">auto</a>.</p>
      <li>
       <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-position-alignment">WebVTT cue position alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-position-automatic-alignment">auto</a>.</p>
      <li>
       <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-size">WebVTT cue size</a> be 100.</p>
      <li>
       <p>Let <var>cue</var>’s <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a> be <a data-link-type="dfn" href="#webvtt-cue-middle-alignment">middle alignment</a>.</p>
      <li>
       <p>Return the <code class="idl"><a data-link-type="idl" href="#vttcue">VTTCue</a></code> object representing <var>cue</var>.</p>
     </ol>
     <p>The <dfn class="idl-code" data-dfn-for="VTTCue" data-dfn-type="attribute" data-export="" id="dom-vttcue-region">region<a class="self-link" href="#dom-vttcue-region"></a></dfn> attribute, on getting, must return
    the <code class="idl"><a data-link-type="idl" href="#vttregion">VTTRegion</a></code> object representing the <a data-link-type="dfn" href="#webvtt-cue-region">WebVTT cue region</a> of the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> that the <code class="idl"><a data-link-type="idl" href="#vttcue">VTTCue</a></code> object represents, if any; or null
    otherwise. On setting, the <a data-link-type="dfn" href="#webvtt-cue-region">WebVTT cue region</a> must be set to the new value.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTCue" data-dfn-type="attribute" data-export="" id="dom-vttcue-vertical">vertical<a class="self-link" href="#dom-vttcue-vertical"></a></dfn> attribute, on getting, must
    return the string from the second cell of the row in the table below whose first cell is the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> of the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> that the <code class="idl"><a data-link-type="idl" href="#vttcue">VTTCue</a></code> object represents:</p>
     <table>
      <thead>
       <tr>
        <th><a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a>
        <th><code class="idl"><a data-link-type="idl" href="#dom-vttcue-vertical">vertical</a></code> value
      <tbody>
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-horizontal-writing-direction">Horizontal</a>
        <td>"<code data-lt=""></code>" (the empty string)
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-vertical-growing-left-writing-direction">Vertical growing
       left</a>
        <td>"<code data-lt="">rl</code>"
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-vertical-growing-right-writing-direction">Vertical growing
       right</a>
        <td>"<code data-lt="">lr</code>"
     </table>
     <p>On setting, the <a data-link-type="dfn" href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a> must be set to the value given in the
    first cell of the row in the table above whose second cell is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for
    the new value.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTCue" data-dfn-type="attribute" data-export="" id="dom-vttcue-snaptolines">snapToLines<a class="self-link" href="#dom-vttcue-snaptolines"></a></dfn> attribute, on getting,
    must return true if the <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines flag</a> of the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> that the <code class="idl"><a data-link-type="idl" href="#vttcue">VTTCue</a></code> object represents is set; or false otherwise. On setting, the <a data-link-type="dfn" href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines flag</a> must be set if the new value is true, and must be unset
    otherwise.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTCue" data-dfn-type="attribute" data-export="" id="dom-vttcue-line">line<a class="self-link" href="#dom-vttcue-line"></a></dfn> attribute, on getting, must return the <a data-link-type="dfn" href="#webvtt-cue-line">WebVTT cue line</a> of the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> that the <code class="idl"><a data-link-type="idl" href="#vttcue">VTTCue</a></code> object
    represents. The special value <a data-link-type="dfn" href="#webvtt-cue-line-automatic">auto</a> must be represented
    as the string "<code>auto</code>". On setting, the <a data-link-type="dfn" href="#webvtt-cue-line">WebVTT cue line</a> must be set to the new
    value; if the new value is the string "<code data-lt="">auto</code>", then it must be interpreted as the
    special value <a data-link-type="dfn" href="#webvtt-cue-line-automatic">auto</a>.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTCue" data-dfn-type="attribute" data-export="" id="dom-vttcue-linealign">lineAlign<a class="self-link" href="#dom-vttcue-linealign"></a></dfn> attribute, on getting, must
    return the string from the second cell of the row in the table below whose first cell is the <a data-link-type="dfn" href="#webvtt-cue-line-alignment">WebVTT cue line alignment</a> of the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> that the <code class="idl"><a data-link-type="idl" href="#vttcue">VTTCue</a></code> object represents:</p>
     <table>
      <thead>
       <tr>
        <th><a data-link-type="dfn" href="#webvtt-cue-line-alignment">WebVTT cue line alignment</a>
        <th><code class="idl"><a data-link-type="idl" href="#dom-vttcue-linealign">lineAlign</a></code> value
      <tbody>
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-line-start-alignment">Start alignment</a>
        <td>"<code data-lt="">start</code>"
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-line-middle-alignment">Middle alignment</a>
        <td>"<code data-lt="">middle</code>"
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-line-end-alignment">End alignment</a>
        <td>"<code data-lt="">end</code>"
     </table>
     <p>On setting, the <a data-link-type="dfn" href="#webvtt-cue-line-alignment">WebVTT cue line alignment</a> must be set to the value given in the first
    cell of the row in the table above whose second cell is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the
    new value.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTCue" data-dfn-type="attribute" data-export="" id="dom-vttcue-position0">>position<a class="self-link" href="#dom-vttcue-position0"></a></dfn> attribute, on getting, must
    return the <a data-link-type="dfn" href="#webvtt-cue-position">WebVTT cue position</a> of the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> that the <code class="idl"><a data-link-type="idl" href="#vttcue">VTTCue</a></code> object represents. The special value <a data-link-type="dfn" href="#webvtt-cue-automatic-position">auto</a> must be represented as the string "<code data-lt="">auto</code>". On setting, if the new
    value is negative or greater than 100, then an <code class="idl"><a data-link-type="idl">IndexSizeError</a></code> exception must
    be thrown. Otherwise, the <a data-link-type="dfn" href="#webvtt-cue-position">WebVTT cue position</a> must be set to the new value; if the new
    value is the string "<code data-lt="">auto</code>", then it must be interpreted as the special value <a data-link-type="dfn" href="#webvtt-cue-automatic-position">auto</a>.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTCue" data-dfn-type="attribute" data-export="" id="dom-vttcue-positionalign">positionAlign<a class="self-link" href="#dom-vttcue-positionalign"></a></dfn> attribute, on getting,
    must return the string from the second cell of the row in the table below whose first cell is
    the <a data-link-type="dfn" href="#webvtt-cue-position-alignment">WebVTT cue position alignment</a> of the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> that the <code class="idl"><a data-link-type="idl" href="#vttcue">VTTCue</a></code> object represents:</p>
     <table>
      <thead>
       <tr>
        <th><a data-link-type="dfn" href="#webvtt-cue-position-alignment">WebVTT cue position alignment</a>
        <th><code class="idl"><a data-link-type="idl" href="#dom-vttcue-positionalign">positionAlign</a></code> value
      <tbody>
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-position-start-alignment">Start alignment</a>
        <td>"<code data-lt="">start</code>"
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-position-middle-alignment">Middle alignment</a>
        <td>"<code data-lt="">middle</code>"
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-position-end-alignment">End alignment</a>
        <td>"<code data-lt="">end</code>"
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-position-automatic-alignment">Automatic alignment</a>
        <td>"<code data-lt="">auto</code>"
     </table>
     <p>On setting, the <a data-link-type="dfn" href="#webvtt-cue-position-alignment">WebVTT cue position alignment</a> must be set to the value given in the
    first cell of the row in the table above whose second cell is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for
    the new value.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTCue" data-dfn-type="attribute" data-export="" id="dom-vttcue-size">size<a class="self-link" href="#dom-vttcue-size"></a></dfn> attribute, on getting, must return the <a data-link-type="dfn" href="#webvtt-cue-size">WebVTT cue size</a> of the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> that the <code class="idl"><a data-link-type="idl" href="#vttcue">VTTCue</a></code> object
    represents. On setting, if the new value is negative or greater than 100, then an <code class="idl"><a data-link-type="idl">IndexSizeError</a></code> exception must be thrown. Otherwise, the <a data-link-type="dfn" href="#webvtt-cue-size">WebVTT cue
    size</a> must be set to the new value.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTCue" data-dfn-type="attribute" data-export="" id="dom-vttcue-align">align<a class="self-link" href="#dom-vttcue-align"></a></dfn> attribute, on getting, must return the
    string from the second cell of the row in the table below whose first cell is the <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue
    text alignment</a> of the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> that the <code class="idl"><a data-link-type="idl" href="#vttcue">VTTCue</a></code> object
    represents:</p>
     <table>
      <thead>
       <tr>
        <th><a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a>
        <th><code class="idl"><a data-link-type="idl" href="#dom-vttcue-align">align</a></code> value
      <tbody>
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-start-alignment">Start alignment</a>
        <td>"<code data-lt="">start</code>"
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-middle-alignment">Middle alignment</a>
        <td>"<code data-lt="">middle</code>"
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-end-alignment">End alignment</a>
        <td>"<code data-lt="">end</code>"
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-left-alignment">Left alignment</a>
        <td>"<code data-lt="">left</code>"
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-cue-right-alignment">Right alignment</a>
        <td>"<code data-lt="">right</code>"
     </table>
     <p>On setting, the <a data-link-type="dfn" href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a> must be set to the value given in the first
    cell of the row in the table above whose second cell is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the
    new value.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTCue" data-dfn-type="attribute" data-export="" id="dom-vttcue-text">text<a class="self-link" href="#dom-vttcue-text"></a></dfn> attribute, on getting, must return the
    raw <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-text">text track cue text</a> of the <a data-link-type="dfn" href="#webvtt-cue">WebVTT cue</a> that the <code class="idl"><a data-link-type="idl" href="#vttcue">VTTCue</a></code> object represents. On setting, the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-text">text track cue text</a> must be set to the new value.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTCue" data-dfn-type="method" data-export="" id="dom-vttcue-getcueashtml">getCueAsHTML()<a class="self-link" href="#dom-vttcue-getcueashtml"></a></dfn> method must convert
    the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-text">text track cue text</a> to a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#documentfragment">DocumentFragment</a></code> for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-document">responsible
    document</a> specified by the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#entry-settings-object">entry settings object</a> by applying the <a data-link-type="dfn" href="#webvtt-cue-text-dom-construction-rules0">WebVTT
    cue text DOM construction rules</a> to the result of applying the <a data-link-type="dfn" href="#webvtt-cue-text-parsing-rules0">WebVTT cue text parsing
    rules</a> to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/embedded-content.html#text-track-cue-text">text track cue text</a>.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="7.2" id="the-vttregion-interface"><span class="secno">7.2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#vttregion">VTTRegion</a></code> interface</span><a class="self-link" href="#the-vttregion-interface"></a></h3>
     <p>The following interface is used to expose WebVTT regions in the DOM API:</p>
<pre class="idl">enum <dfn class="idl-code" data-dfn-type="enum" data-export="" id="enumdef-scrollsetting">ScrollSetting<a class="self-link" href="#enumdef-scrollsetting"></a></dfn> { "" /* none */, "up" };
[<a class="idl-code" data-link-type="constructor" href="#dom-vttregion-vttregion">Constructor</a>]
interface <dfn class="idl-code" data-dfn-type="interface" data-export="" id="vttregion">VTTRegion<a class="self-link" href="#vttregion"></a></dfn> {
  attribute double <a class="idl-code" data-link-type="attribute" data-type="double " href="#dom-vttregion-width">width</a>;
  attribute long <a class="idl-code" data-link-type="attribute" data-type="long " href="#dom-vttregion-lines">lines</a>;
  attribute double <a class="idl-code" data-link-type="attribute" data-type="double " href="#dom-vttregion-regionanchorx">regionAnchorX</a>;
  attribute double <a class="idl-code" data-link-type="attribute" data-type="double " href="#dom-vttregion-regionanchory">regionAnchorY</a>;
  attribute double <a class="idl-code" data-link-type="attribute" data-type="double " href="#dom-vttregion-viewportanchorx">viewportAnchorX</a>;
  attribute double <a class="idl-code" data-link-type="attribute" data-type="double " href="#dom-vttregion-viewportanchory">viewportAnchorY</a>;
  attribute <a data-link-type="idl-name" href="#enumdef-scrollsetting">ScrollSetting</a> <a class="idl-code" data-link-type="attribute" data-type="ScrollSetting " href="#dom-vttregion-scroll">scroll</a>;
};</pre>
     <dl class="domintro">
      <dt><var>region</var> = new <a class="idl-code" data-link-type="constructor" href="#dom-vttregion-vttregion">VTTRegion</a>()
      <dd>
       <p>Returns a new <code class="idl"><a data-link-type="idl" href="#vttregion">VTTRegion</a></code> object.</p>
      <dt><var>region</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttregion-width">width</a></code>
      <dd>
       <p>Returns the WebVTT region width as a percentage of the video width. Can be set. Throws an <code class="idl"><a data-link-type="idl">IndexSizeError</a></code> if the new value is not in the range 0..100.</p>
      <dt><var>region</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttregion-lines">lines</a></code>
      <dd>
       <p>Returns the text track region height as a number of lines. Can be set.</p>
      <dt><var>region</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttregion-regionanchorx">regionAnchorX</a></code>
      <dd>
       <p>Returns the WebVTT region anchor X offset as a percentage of the region width. Can be set.
      Throws an <code class="idl"><a data-link-type="idl">IndexSizeError</a></code> if the new value is not in the range 0..100.</p>
      <dt><var>region</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttregion-regionanchorx">regionAnchorX</a></code>
      <dd>
       <p>Returns the WebVTT region anchor Y offset as a percentage of the region height. Can be set.
      Throws an <code class="idl"><a data-link-type="idl">IndexSizeError</a></code> if the new value is not in the range 0..100.</p>
      <dt><var>region</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttregion-viewportanchorx">viewportAnchorX</a></code>
      <dd>
       <p>Returns the WebVTT region viewport anchor X offset as a percentage of the video width. Can
      be set. Throws an <code class="idl"><a data-link-type="idl">IndexSizeError</a></code> if the new value is not in the range
      0..100.</p>
      <dt><var>region</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttregion-viewportanchory">viewportAnchorY</a></code>
      <dd>
       <p>Returns the WebVTT region viewport anchor Y offset as a percentage of the video height. Can
      be set. Throws an <code class="idl"><a data-link-type="idl">IndexSizeError</a></code> if the new value is not in the range
      0..100.</p>
      <dt><var>region</var> . <code class="idl"><a data-link-type="idl" href="#dom-vttregion-scroll">scroll</a></code>
      <dd>
       <p>Returns a string representing the <a data-link-type="dfn" href="#webvtt-region-scroll">WebVTT region scroll</a> as follows:</p>
       <dl class="switch">
        <dt>If it is unset
        <dd>
         <p>The empty string.</p>
        <dt>If it is up
        <dd>
         <p>The string "<code data-lt="">up</code>".</p>
       </dl>
       <p>Can be set.</p>
     </dl>
     <p>The <dfn class="idl-code" data-dfn-for="VTTRegion" data-dfn-type="constructor" data-export="" id="dom-vttregion-vttregion">VTTRegion()<a class="self-link" href="#dom-vttregion-vttregion"></a></dfn> constructor, when
    invoked, must run the following steps:</p>
     <ol>
      <li>
       <p>Create a new <a data-link-type="dfn" href="#webvtt-region">WebVTT region</a>. Let <var>region</var> be that <a data-link-type="dfn" href="#webvtt-region">WebVTT
     region</a>.</p>
      <li>
       <p>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-identifier">WebVTT region identifier</a> be the empty string.</p>
      <li>
       <p>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-width">WebVTT region width</a> be 100.</p>
      <li>
       <p>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-lines">WebVTT region lines</a> be 3.</p>
      <li>
       <p>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-anchor">text track region
     regionAnchorX</a> be 0.</p>
      <li>
       <p>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-anchor">text track region
     regionAnchorY</a> be 100.</p>
      <li>
       <p>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-viewport-anchor">text track region
     viewportAnchorX</a> be 0.</p>
      <li>
       <p>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-viewport-anchor">text track region
     viewportAnchorY</a> be 100.</p>
      <li>
       <p>Let <var>region</var>’s <a data-link-type="dfn" href="#webvtt-region-scroll">WebVTT region scroll</a> be the empty string.</p>
      <li>
       <p>Return the <code class="idl"><a data-link-type="idl" href="#vttregion">VTTRegion</a></code> object representing <var>region</var>.</p>
     </ol>
     <p>The <dfn class="idl-code" data-dfn-for="VTTRegion" data-dfn-type="attribute" data-export="" id="dom-vttregion-width">width<a class="self-link" href="#dom-vttregion-width"></a></dfn> attribute, on getting, must return
    the <a data-link-type="dfn" href="#webvtt-region-width">WebVTT region width</a> of the <a data-link-type="dfn" href="#webvtt-region">WebVTT region</a> that the <code class="idl"><a data-link-type="idl" href="#vttregion">VTTRegion</a></code> object represents, in percent of video width. On setting, the <a data-link-type="dfn" href="#webvtt-region-width">WebVTT region width</a> must be set to the new value, interpreted as a percentage.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTRegion" data-dfn-type="attribute" data-export="" id="dom-vttregion-lines">lines<a class="self-link" href="#dom-vttregion-lines"></a></dfn> attribute, on getting, must return
    the <a data-link-type="dfn" href="#webvtt-region-lines">WebVTT region lines</a> of the <a data-link-type="dfn" href="#webvtt-region">WebVTT region</a> that the <code class="idl"><a data-link-type="idl" href="#vttregion">VTTRegion</a></code> object represents, as number of lines. On setting, the <a data-link-type="dfn" href="#webvtt-region-lines">WebVTT
    region lines</a> must be set to the new value, interpreted as a number of lines.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTRegion" data-dfn-type="attribute" data-export="" id="dom-vttregion-regionanchorx">regionAnchorX<a class="self-link" href="#dom-vttregion-regionanchorx"></a></dfn> attribute, on
    getting, must return the <a data-link-type="dfn" href="#webvtt-region-anchor">WebVTT region anchor</a> X offset of the <a data-link-type="dfn" href="#webvtt-region">WebVTT region</a> that
    the <code class="idl"><a data-link-type="idl" href="#vttregion">VTTRegion</a></code> object represents, in percent of region width. On setting, the <a data-link-type="dfn" href="#webvtt-region-anchor">WebVTT region anchor</a> X distance must be set to the new value, interpreted as a
    percentage.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTRegion" data-dfn-type="attribute" data-export="" id="dom-vttregion-regionanchory">regionAnchorY<a class="self-link" href="#dom-vttregion-regionanchory"></a></dfn> attribute, on
    getting, must return the <a data-link-type="dfn" href="#webvtt-region-anchor">WebVTT region anchor</a> Y offset of the <a data-link-type="dfn" href="#webvtt-region">WebVTT region</a> that
    the <code class="idl"><a data-link-type="idl" href="#vttregion">VTTRegion</a></code> object represents, in percent of region height. On setting,
    the <a data-link-type="dfn" href="#webvtt-region-anchor">WebVTT region anchor</a> Y distance must be set to the new value, interpreted as a
    percentage.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTRegion" data-dfn-type="attribute" data-export="" id="dom-vttregion-viewportanchorx">viewportAnchorX<a class="self-link" href="#dom-vttregion-viewportanchorx"></a></dfn> attribute, on
    getting, must return the <a data-link-type="dfn" href="#webvtt-region-viewport-anchor">WebVTT region viewport anchor</a> X offset of the <a data-link-type="dfn" href="#webvtt-region">WebVTT
    region</a> that the <code class="idl"><a data-link-type="idl" href="#vttregion">VTTRegion</a></code> object represents, in percent of video width.
    On setting, the <a data-link-type="dfn" href="#webvtt-region-viewport-anchor">WebVTT region viewport anchor</a> X distance must be set to the new value,
    interpreted as a percentage.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTRegion" data-dfn-type="attribute" data-export="" id="dom-vttregion-viewportanchory">viewportAnchorY<a class="self-link" href="#dom-vttregion-viewportanchory"></a></dfn> attribute, on
    getting, must return the <a data-link-type="dfn" href="#webvtt-region-viewport-anchor">WebVTT region viewport anchor</a> Y offset of the <a data-link-type="dfn" href="#webvtt-region">WebVTT
    region</a> that the <code class="idl"><a data-link-type="idl" href="#vttregion">VTTRegion</a></code> object represents, in percent of video height.
    On setting, the <a data-link-type="dfn" href="#webvtt-region-viewport-anchor">WebVTT region viewport anchor</a> Y distance must be set to the new value,
    interpreted as a percentage.</p>
     <p>The <dfn class="idl-code" data-dfn-for="VTTRegion" data-dfn-type="attribute" data-export="" id="dom-vttregion-scroll">scroll<a class="self-link" href="#dom-vttregion-scroll"></a></dfn> attribute, on getting, must
    return the string from the second cell of the row in the table below whose first cell is the <a data-link-type="dfn" href="#webvtt-region-scroll">WebVTT region scroll</a> setting of the <a data-link-type="dfn" href="#webvtt-region">WebVTT region</a> that the <code class="idl"><a data-link-type="idl" href="#vttregion">VTTRegion</a></code> object represents:</p>
     <table>
      <thead>
       <tr>
        <th><a data-link-type="dfn" href="#webvtt-region-scroll">WebVTT region scroll</a>
        <th><code class="idl"><a data-link-type="idl" href="#dom-vttregion-scroll">scroll</a></code> value
      <tbody>
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-region-scroll-none">None</a>
        <td>"<code data-lt=""></code>" (the empty string)
       <tr>
        <td><a data-link-type="dfn" href="#webvtt-region-scroll-up">Up</a>
        <td>"<code data-lt="">up</code>"
     </table>
     <p>On setting, the <a data-link-type="dfn" href="#webvtt-region-scroll">WebVTT region scroll</a> must be set to the value given on the first cell
    of the row in the table above whose second cell is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a> match for the new
    value.</p>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="8" id="iana"><span class="secno">8. </span><span class="content">IANA considerations</span><a class="self-link" href="#iana"></a></h2>
    <section>
     <h3 class="heading settled" data-level="8.1" id="text-vtt"><span class="secno">8.1. </span><span class="content"><dfn data-dfn-type="dfn" data-noexport="" id="text-vtt0"><code>text/vtt</code><a class="self-link" href="#text-vtt0"></a></dfn></span><a class="self-link" href="#text-vtt"></a></h3>
     <p>This registration is for community review and will be submitted to the IESG for review,
    approval, and registration with IANA.</p>
     <dl>
      <dt>Type name:
      <dd>text
      <dt>Subtype name:
      <dd>vtt
      <dt>Required parameters:
      <dd>No parameters
      <dt>Optional parameters:
      <dd>No parameters
      <dt>Encoding considerations:
      <dd>8bit (always UTF-8)
      <dt>Security considerations:
      <dd>
       <p>Text track files themselves pose no immediate risk unless sensitive information is included
      within the data. Implementations, however, are required to follow specific rules when
      processing text tracks, to ensure that certain origin-based restrictions are honored. Failure
      to correctly implement these rules can result in information leakage, cross-site scripting
      attacks, and the like.</p>
      <dt>Interoperability considerations:
      <dd>
       <p>Rules for processing both conforming and non-conforming content are defined in this
      specification.</p>
      <dt>Published specification:
      <dd> This document is the relevant specification. 
      <dt>Applications that use this media type:
      <dd> Web browsers and other video players. 
      <dt>Additional information:
      <dd>
       <dl>
        <dt>Magic number(s):
        <dd>
         <p>WebVTT files all begin with one of the following byte sequences (where "EOF" means the
        end of the file):</p>
         <ul class="brief">
          <li> EF BB BF 57 45 42 56 54 54 0A 
          <li> EF BB BF 57 45 42 56 54 54 0D 
          <li> EF BB BF 57 45 42 56 54 54 20 
          <li> EF BB BF 57 45 42 56 54 54 09 
          <li> EF BB BF 57 45 42 56 54 54 EOF 
          <li> 57 45 42 56 54 54 0A 
          <li> 57 45 42 56 54 54 0D 
          <li> 57 45 42 56 54 54 20 
          <li> 57 45 42 56 54 54 09 
          <li> 57 45 42 56 54 54 EOF 
         </ul>
         <p class="note" role="note">(An optional UTF-8 BOM, the ASCII string "<code data-lt="">WEBVTT</code>", and finally
        a space, tab, line break, or the end of the file.)</p>
        <dt>File extension(s):
        <dd>"<code data-lt="">vtt</code>"
        <dt>Macintosh file type code(s):
        <dd>No specific Macintosh file type codes are recommended for this type.
       </dl>
      <dt>Person &amp; email address to contact for further information:
      <dd>Silvia Pfeiffer &lt;silviapfeiffer1@gmail.com>
      <dt>Intended usage:
      <dd>Common
      <dt>Restrictions on usage:
      <dd>No restrictions apply.
      <dt>Authors:
      <dd>Silvia Pfeiffer &lt;silviapfeiffer1@gmail.com>, Simon Pieters &lt;simonp@opera.com>, Philip
     Jägenstedt &lt;philipj@opera.com>, Ian Hickson &lt;ian@hixie.ch>
      <dt>Change controller:
      <dd>W3C
     </dl>
     <p>Fragment identifiers have no meaning with <code>text/vtt</code> resources.</p>
    </section>
   </section>
   <section>
    <h2 class="no-num heading settled" id="acknowledgements"><span class="content">Acknowledgements</span><a class="self-link" href="#acknowledgements"></a></h2>
    <p>Thanks to the SubRip community, including in particular Zuggy and ai4spam, for their work on
   the SubRip software program whose SRT file format was used as the basis for the WebVTT text track
   file format.</p>
    <p>Thanks to Ian Hickson and many others for their work on the HTML standard, where WebVTT was
   originally specified. <a data-link-type="biblio" href="#biblio-html">[HTML]</a></p>
    <p> Further thanks to:
    Glenn Adams,
    Victor Cărbune,
    Eric Carlson,
    Anna Cavender,
    Cyril Concolato,
    Rick Eyre,
    fantasai,
    John Foliot,
    Lawrence Forooghian,
    Ralph Giles,
    Loretta Guarino Reid,
    Kyle Huey,
    Anne van Kesteren,
    Glenn Maynard,
    Ronny Mennerich,
    Ms2ger,
    Frank Olivier,
    Giuseppe Pascale,
    Caitlin Potter,
    Brian Quass,
    David Singer,
    Andreas Tai. </p>
   </section>
  </main>
  <h2 class="no-num heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="indexlist">
   <li><a href="#dom-vttcue-align">align</a><span>, in §7.1</span>
   <li><a href="#enumdef-alignsetting">AlignSetting</a><span>, in §7.1</span>
   <li><a href="#apply-webvtt-cue-settings">apply WebVTT cue settings</a><span>, in §6.1</span>
   <li><a href="#attach-a-webvtt-internal-node-object">attach a WebVTT Internal Node Object</a><span>, in §5.4</span>
   <li><a href="#enumdef-autokeyword">AutoKeyword</a><span>, in §7.1</span>
   <li><a href="#collect-a-webvtt-timestamp">collect a WebVTT timestamp</a><span>, in §5.3</span>
   <li><a href="#collect-webvtt-cue-timings-and-settings">collect WebVTT cue timings and
    settings</a><span>, in §5.3</span>
   <li><a href="#collect-webvtt-region-settings">collect WebVTT region
    settings</a><span>, in §5.2</span>
   <li><a href="#cue-computed-line">cue computed line</a><span>, in §3.1</span>
   <li><a href="#cue-computed-position">cue computed position</a><span>, in §3.1</span>
   <li><a href="#cue-computed-position-alignment">cue computed position alignment</a><span>, in §3.1</span>
   <li><a href="#cue-payload">cue payload</a><span>, in §4.1</span>
   <li><a href="#enumdef-directionsetting">DirectionSetting</a><span>, in §7.1</span>
   <li><a href="#dom-vttcue-vttcue-starttime-endtime-text-endtime">endTime</a><span>, in §7.1</span>
   <li><a href="#future-pseudo-class">future-pseudo-class</a><span>, in §6.1.2.2</span>
   <li><a href="#dom-vttcue-getcueashtml">getCueAsHTML()</a><span>, in §7.1</span>
   <li><a href="#incremental-webvtt-parser">incremental WebVTT parser</a><span>, in §5.1</span>
   <li><a href="#in-the-future">in the future</a><span>, in §6.1.2.2</span>
   <li><a href="#in-the-past">in the past</a><span>, in §6.1.2.2</span>
   <li><a href="#dom-vttcue-line">line</a><span>, in §7.1</span>
   <li><a href="#dom-vttcue-linealign">lineAlign</a><span>, in §7.1</span>
   <li><a href="#enumdef-linealignsetting">LineAlignSetting</a><span>, in §7.1</span>
   <li><a href="#dom-vttregion-lines">lines</a><span>, in §7.2</span>
   <li><a href="#list-of-webvtt-node-objects">List of WebVTT Node Objects</a><span>, in §5.4</span>
   <li><a href="#parse-a-percentage-string">parse a percentage string</a><span>, in §5.2</span>
   <li><a href="#parse-the-webvtt-cue-settings">parse the WebVTT cue settings</a><span>, in §5.3</span>
   <li><a href="#past-pseudo-class">past-pseudo-class</a><span>, in §6.1.2.2</span>
   <li><a href="#dom-vttcue-position0">>position</a><span>, in §7.1</span>
   <li><a href="#dom-vttcue-position">position</a><span>, in §7.1</span>
   <li><a href="#dom-vttcue-positionalign">positionAlign</a><span>, in §7.1</span>
   <li><a href="#enumdef-positionalignsetting">PositionAlignSetting</a><span>, in §7.1</span>
   <li><a href="#selectordef-pseudo-cue">pseudo-cue</a><span>, in §6.1.2.1</span>
   <li><a href="#selectordef-pseudo-cue-selector">pseudo-cue-selector</a><span>, in §6.1.2.1</span>
   <li><a href="#selectordef-pseudo-region">pseudo-region</a><span>, in §6.2</span>
   <li><a href="#dom-vttcue-region">region</a><span>, in §7.1</span>
   <li><a href="#dom-vttregion-regionanchorx">regionAnchorX</a><span>, in §7.2</span>
   <li><a href="#dom-vttregion-regionanchory">regionAnchorY</a><span>, in §7.2</span>
   <li><a href="#rules-for-updating-the-display-of-webvtt-text-tracks">rules for updating the display of WebVTT text tracks</a><span>, in §6.1</span>
   <li><a href="#dom-vttregion-scroll">scroll</a><span>, in §7.2</span>
   <li><a href="#enumdef-scrollsetting">ScrollSetting</a><span>, in §7.2</span>
   <li><a href="#dom-vttcue-size">size</a><span>, in §7.1</span>
   <li><a href="#dom-vttcue-snaptolines">snapToLines</a><span>, in §7.1</span>
   <li><a href="#dom-vttcue-vttcue-starttime-endtime-text-starttime">startTime</a><span>, in §7.1</span>
   <li>
    text
    <ul>
     <li><a href="#dom-vttcue-vttcue-starttime-endtime-text-text">argument for VTTCue/VTTCue(startTime, endTime, text)</a><span>, in §7.1</span>
     <li><a href="#dom-vttcue-text">attribute for VTTCue</a><span>, in §7.1</span>
    </ul>
   <li><a href="#text-track-list-of-regions">text track list of regions</a><span>, in §3.2</span>
   <li><a href="#text-vtt0">text/vtt</a><span>, in §8.1</span>
   <li><a href="#dom-vttcue-vertical">vertical</a><span>, in §7.1</span>
   <li><a href="#dom-vttregion-viewportanchorx">viewportAnchorX</a><span>, in §7.2</span>
   <li><a href="#dom-vttregion-viewportanchory">viewportAnchorY</a><span>, in §7.2</span>
   <li><a href="#dom-vttcue-vttcue">VTTCue()</a><span>, in §7.1</span>
   <li><a href="#vttcue">VTTCue</a><span>, in §7.1</span>
   <li><a href="#dom-vttcue-vttcue">VTTCue(startTime, endTime, text)</a><span>, in §7.1</span>
   <li><a href="#vttregion">VTTRegion</a><span>, in §7.2</span>
   <li><a href="#dom-vttregion-vttregion">VTTRegion()</a><span>, in §7.2</span>
   <li><a href="#webvtt">WebVTT</a><span>, in §1</span>
   <li><a href="#webvtt-alignment-cue-setting">WebVTT alignment cue setting</a><span>, in §4.4</span>
   <li><a href="#webvtt-bold-object">WebVTT Bold Object</a><span>, in §5.4</span>
   <li><a href="#webvtt-chapter-title-text">WebVTT chapter title text</a><span>, in §4.6.2</span>
   <li><a href="#webvtt-class-object">WebVTT Class Object</a><span>, in §5.4</span>
   <li><a href="#webvtt-comment-block">WebVTT comment block</a><span>, in §4.1</span>
   <li><a href="#webvtt-cue">WebVTT cue</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-amp-escape">WebVTT cue amp escape</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-automatic-position">WebVTT cue automatic position</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-background-box">WebVTT cue background
       box</a><span>, in §6.1</span>
   <li><a href="#webvtt-cue-block">WebVTT cue block</a><span>, in §4.1</span>
   <li><a href="#webvtt-cue-bold-span">WebVTT cue bold span</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-box">WebVTT cue box</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-class-span">WebVTT cue class span</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-components">WebVTT cue components</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-end-alignment">WebVTT cue end alignment</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-gt-escape">WebVTT cue gt escape</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-horizontal-writing-direction">WebVTT cue horizontal writing direction</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-identifier">WebVTT cue identifier</a><span>, in §4.1</span>
   <li><a href="#webvtt-cue-internal-text">WebVTT cue internal text</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-italics-span">WebVTT cue italics span</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-language-span">WebVTT cue language span</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-left-alignment">WebVTT cue left alignment</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-line">WebVTT cue line</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-line-alignment">WebVTT cue line alignment</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-line-automatic">WebVTT cue line
      automatic</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-line-end-alignment">WebVTT cue line end alignment</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-line-middle-alignment">WebVTT cue line middle alignment</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-line-start-alignment">WebVTT cue line start alignment</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-lrm-escape">WebVTT cue lrm escape</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-lt-escape">WebVTT cue lt escape</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-middle-alignment">WebVTT cue middle alignment</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-nbsp-escape">WebVTT cue nbsp escape</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-position">WebVTT cue position</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-position-alignment">WebVTT cue position alignment</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-position-automatic-alignment">WebVTT cue position automatic alignment</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-position-end-alignment">WebVTT cue position end alignment</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-position-middle-alignment">WebVTT cue position middle alignment</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-position-start-alignment">WebVTT cue position start alignment</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-region">WebVTT cue region</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-right-alignment">WebVTT cue right alignment</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-rlm-escape">WebVTT cue rlm escape</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-ruby-span">WebVTT cue ruby span</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-ruby-text-span">WebVTT cue ruby text span</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-setting">WebVTT cue setting</a><span>, in §4.1</span>
   <li><a href="#webvtt-cue-setting-name">WebVTT cue setting name</a><span>, in §4.1</span>
   <li><a href="#webvtt-cue-settings-list">WebVTT cue settings list</a><span>, in §4.1</span>
   <li><a href="#webvtt-cue-setting-value">WebVTT cue setting value</a><span>, in §4.1</span>
   <li><a href="#webvtt-cue-size">WebVTT cue size</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-snap-to-lines-flag">WebVTT cue snap-to-lines flag</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-span-end-tag">WebVTT cue span end tag</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-span-start-tag">WebVTT cue span start tag</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-span-start-tag-annotation-text">WebVTT cue span start tag annotation text</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-start-alignment">WebVTT cue start alignment</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-text0">WebVTT cue text</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-text-alignment">WebVTT cue text alignment</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-text-dom-construction-rules0">WebVTT cue text DOM construction rules</a><span>, in §5.5</span>
   <li><a href="#webvtt-cue-text-parsing-rules0">WebVTT cue text parsing rules</a><span>, in §5.4</span>
   <li><a href="#webvtt-cue-text-span">WebVTT cue text span</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-text-tokenizer">WebVTT cue text tokenizer</a><span>, in §5.4</span>
   <li><a href="#webvtt-cue-timestamp">WebVTT cue timestamp</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-timings">WebVTT cue timings</a><span>, in §4.1</span>
   <li><a href="#webvtt-cue-underline-span">WebVTT cue underline span</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-vertical-growing-left-writing-direction">WebVTT cue vertical growing left writing direction</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-vertical-growing-right-writing-direction">WebVTT cue vertical growing right writing direction</a><span>, in §3.1</span>
   <li><a href="#webvtt-cue-voice-span">WebVTT cue voice span</a><span>, in §4.2.2</span>
   <li><a href="#webvtt-cue-writing-direction">WebVTT cue writing direction</a><span>, in §3.1</span>
   <li><a href="#webvtt-data-state">WebVTT data state</a><span>, in §5.4</span>
   <li><a href="#webvtt-end-tag-state">WebVTT end tag state</a><span>, in §5.4</span>
   <li><a href="#webvtt-escape-state">WebVTT escape state</a><span>, in §5.4</span>
   <li><a href="#webvtt-file">WebVTT file</a><span>, in §4.1</span>
   <li><a href="#webvtt-file-body">WebVTT file body</a><span>, in §4.1</span>
   <li><a href="#webvtt-file-using-chapter-title-text0">WebVTT file using chapter title text</a><span>, in §4.6.2</span>
   <li><a href="#webvtt-file-using-cue-text0">WebVTT file using cue text</a><span>, in §4.6.3</span>
   <li><a href="#webvtt-file-using-metadata-content0">WebVTT file using metadata content</a><span>, in §4.6.1</span>
   <li><a href="#webvtt-file-using-only-nested-cues0">WebVTT
     file using only nested cues</a><span>, in §4.5.1</span>
   <li><a href="#webvtt-internal-node-object">WebVTT Internal Node Object</a><span>, in §5.4</span>
   <li><a href="#webvtt-italic-object">WebVTT Italic Object</a><span>, in §5.4</span>
   <li><a href="#webvtt-language-object">WebVTT Language Object</a><span>, in §5.4</span>
   <li><a href="#webvtt-leaf-node-object">WebVTT Leaf Node Object</a><span>, in §5.4</span>
   <li><a href="#webvtt-line-cue-setting">WebVTT line cue setting</a><span>, in §4.4</span>
   <li><a href="#webvtt-line-terminator">WebVTT line terminator</a><span>, in §4.1</span>
   <li><a href="#webvtt-metadata-header">WebVTT metadata header</a><span>, in §4.1</span>
   <li><a href="#webvtt-metadata-header-name">WebVTT metadata header name</a><span>, in §4.1</span>
   <li><a href="#webvtt-metadata-header-value">WebVTT metadata header value</a><span>, in §4.1</span>
   <li><a href="#webvtt-metadata-text0">WebVTT metadata text</a><span>, in §4.2.1</span>
   <li><a href="#webvtt-node-object">WebVTT Node Object</a><span>, in §5.4</span>
   <li><a href="#webvtt-node-objects-applicable-classes">WebVTT Node Object’s applicable
    classes</a><span>, in §5.4</span>
   <li><a href="#webvtt-node-objects-applicable-language">WebVTT Node
    Object’s applicable language</a><span>, in §5.4</span>
   <li><a href="#webvtt-parser">WebVTT parser</a><span>, in §5.1</span>
   <li><a href="#webvtt-parser-algorithm">WebVTT parser algorithm</a><span>, in §5.1</span>
   <li><a href="#webvtt-percentage">WebVTT percentage</a><span>, in §4.1</span>
   <li><a href="#webvtt-position-cue-setting">WebVTT position cue setting</a><span>, in §4.4</span>
   <li><a href="#webvtt-region">WebVTT region</a><span>, in §3.2</span>
   <li><a href="#webvtt-region-anchor">WebVTT region anchor</a><span>, in §3.2</span>
   <li><a href="#webvtt-region-anchor-setting">WebVTT region anchor setting</a><span>, in §4.3</span>
   <li><a href="#webvtt-region-cue-setting">WebVTT region cue setting</a><span>, in §4.4</span>
   <li><a href="#webvtt-region-identifier">WebVTT region identifier</a><span>, in §3.2</span>
   <li><a href="#webvtt-region-identifier-setting">WebVTT region identifier setting</a><span>, in §4.3</span>
   <li><a href="#webvtt-region-lines">WebVTT region lines</a><span>, in §3.2</span>
   <li><a href="#webvtt-region-lines-setting">WebVTT region lines setting</a><span>, in §4.3</span>
   <li><a href="#webvtt-region-metadata-header">WebVTT region metadata header</a><span>, in §4.3</span>
   <li><a href="#webvtt-region-object">WebVTT region object</a><span>, in §5.2</span>
   <li><a href="#webvtt-region-scroll">WebVTT region scroll</a><span>, in §3.2</span>
   <li><a href="#webvtt-region-scroll-none">WebVTT region scroll none</a><span>, in §3.2</span>
   <li><a href="#webvtt-region-scroll-setting">WebVTT region scroll setting</a><span>, in §4.3</span>
   <li><a href="#webvtt-region-scroll-up">WebVTT region scroll up</a><span>, in §3.2</span>
   <li><a href="#webvtt-region-setting-list">WebVTT region setting list</a><span>, in §4.3</span>
   <li><a href="#webvtt-region-viewport-anchor">WebVTT region viewport anchor</a><span>, in §3.2</span>
   <li><a href="#webvtt-region-viewport-anchor-setting">WebVTT region viewport anchor setting</a><span>, in §4.3</span>
   <li><a href="#webvtt-region-width">WebVTT region width</a><span>, in §3.2</span>
   <li><a href="#webvtt-region-width-setting">WebVTT region width setting</a><span>, in §4.3</span>
   <li><a href="#webvtt-ruby-object">WebVTT Ruby Object</a><span>, in §5.4</span>
   <li><a href="#webvtt-ruby-text-object">WebVTT Ruby Text Object</a><span>, in §5.4</span>
   <li><a href="#webvtt-rules-for-extracting-the-chapter-title0">WebVTT rules for extracting the chapter title</a><span>, in §5.6</span>
   <li><a href="#webvtt-size-cue-setting">WebVTT size cue setting</a><span>, in §4.4</span>
   <li><a href="#webvtt-start-tag-annotation-state">WebVTT start tag annotation state</a><span>, in §5.4</span>
   <li><a href="#webvtt-start-tag-class-state">WebVTT start tag class state</a><span>, in §5.4</span>
   <li><a href="#webvtt-start-tag-state">WebVTT start tag state</a><span>, in §5.4</span>
   <li><a href="#webvtt-tag-state">WebVTT tag state</a><span>, in §5.4</span>
   <li><a href="#webvtt-text-object">WebVTT Text Object</a><span>, in §5.4</span>
   <li><a href="#webvtt-timestamp">WebVTT timestamp</a><span>, in §4.1</span>
   <li><a href="#webvtt-timestamp-object">WebVTT Timestamp Object</a><span>, in §5.4</span>
   <li><a href="#webvtt-timestamp-tag-state">WebVTT timestamp tag state</a><span>, in §5.4</span>
   <li><a href="#webvtt-underline-object">WebVTT Underline Object</a><span>, in §5.4</span>
   <li><a href="#webvtt-vertical-text-cue-setting">WebVTT vertical text cue setting</a><span>, in §4.4</span>
   <li><a href="#webvtt-voice-object">WebVTT Voice Object</a><span>, in §5.4</span>
   <li><a href="#dom-vttregion-width">width</a><span>, in §7.2</span>
  </ul>
  <h3 class="no-num heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="indexlist">
   <li>
    <a data-link-type="biblio" href="#biblio-css-align-3">[css-align-3]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-align-3/#propdef-justify-content">justify-content</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-css-backgrounds-3">[css-backgrounds-3]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-backgrounds-3/#background">background</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-css-color-3">[css-color-3]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-color-3/#color0">color</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-css-color-4">[css-color-4]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-color-4/#propdef-opacity">opacity</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-css-display-3">[css-display-3]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-display-3/#valdef-display-inline">inline</a>
     <li><a href="https://drafts.csswg.org/css-display-3/#valdef-display-inline-flex">inline-flex</a>
     <li><a href="https://drafts.csswg.org/css-display-3/#valdef-display-ruby">ruby</a>
     <li><a href="https://drafts.csswg.org/css-display-3/#valdef-display-ruby-base">ruby-base</a>
     <li><a href="https://drafts.csswg.org/css-display-3/#valdef-display-ruby-text">ruby-text</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-css-flexbox-1">[css-flexbox-1]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-flexbox-1/#valdef-justify-content-flex-end">flex-end</a>
     <li><a href="https://drafts.csswg.org/css-flexbox-1/#propdef-flex-flow">flex-flow</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-css-fonts-3">[css-fonts-3]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-fonts-3/#propdef-font">font</a>
     <li><a href="https://drafts.csswg.org/css-fonts-3/#propdef-font-style">font-style</a>
     <li><a href="https://drafts.csswg.org/css-fonts-3/#propdef-font-weight">font-weight</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-css-overflow-3">[css-overflow-3]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-overflow-3/#valdef-overflow-hidden">hidden</a>
     <li><a href="https://drafts.csswg.org/css-overflow-3/#propdef-overflow">overflow</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-css-position-3">[css-position-3]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-position-3/#valdef-position-absolute">absolute</a>
     <li><a href="https://drafts.csswg.org/css-position-3/#propdef-left">left</a>
     <li><a href="https://drafts.csswg.org/css-position-3/#propdef-position">position</a>
     <li><a href="https://drafts.csswg.org/css-position-3/#valdef-position-relative">relative</a>
     <li><a href="https://drafts.csswg.org/css-position-3/#propdef-top">top</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-css-text-3">[css-text-3]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-text-3/#valdef-overflow-wrap-break-word">break-word</a>
     <li><a href="https://drafts.csswg.org/css-text-3/#valdef-text-align-center">center</a>
     <li><a href="https://drafts.csswg.org/css-text-3/#valdef-text-align-end">end</a>
     <li><a href="https://drafts.csswg.org/css-text-3/#valdef-text-align-left">left</a>
     <li><a href="https://drafts.csswg.org/css-text-3/#propdef-overflow-wrap">overflow-wrap</a>
     <li><a href="https://drafts.csswg.org/css-text-3/#valdef-white-space-pre-line">pre-line</a>
     <li><a href="https://drafts.csswg.org/css-text-3/#valdef-text-align-right">right</a>
     <li><a href="https://drafts.csswg.org/css-text-3/#valdef-text-align-start">start</a>
     <li><a href="https://drafts.csswg.org/css-text-3/#propdef-text-align">text-align</a>
     <li><a href="https://drafts.csswg.org/css-text-3/#propdef-white-space">white-space</a>
     <li><a href="https://drafts.csswg.org/css-text-3/#propdef-word-wrap">word-wrap</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-css-text-decor-3">[css-text-decor-3]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-text-decor-3/#propdef-text-decoration">text-decoration</a>
     <li><a href="https://drafts.csswg.org/css-text-decor-3/#propdef-text-shadow">text-shadow</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-css-transitions-1">[css-transitions-1]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-transitions-1/#propdef-transition-duration">transition-duration</a>
     <li><a href="https://drafts.csswg.org/css-transitions-1/#propdef-transition-property">transition-property</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-css-ui-3">[css-ui-3]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-ui-3/#propdef-outline">outline</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-css-writing-modes-3">[css-writing-modes-3]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css-writing-modes-3/#propdef-direction">direction</a>
     <li><a href="https://drafts.csswg.org/css-writing-modes-3/#valdef-writing-mode-horizontal-tb">horizontal-tb</a>
     <li><a href="https://drafts.csswg.org/css-writing-modes-3/#valdef-unicode-bidi-plaintext">plaintext</a>
     <li><a href="https://drafts.csswg.org/css-writing-modes-3/#propdef-unicode-bidi">unicode-bidi</a>
     <li><a href="https://drafts.csswg.org/css-writing-modes-3/#propdef-writing-mode">writing-mode</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-css21">[CSS21]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/css2/visuren.html#propdef-display">display</a>
     <li><a href="https://drafts.csswg.org/css2/visudet.html#propdef-height">height</a>
     <li><a href="https://drafts.csswg.org/css2/visudet.html#propdef-line-height">line-height</a>
     <li><a href="https://drafts.csswg.org/css2/visudet.html#propdef-max-height">max-height</a>
     <li><a href="https://drafts.csswg.org/css2/visudet.html#propdef-min-height">min-height</a>
     <li><a href="https://drafts.csswg.org/css2/visufx.html#propdef-visibility">visibility</a>
     <li><a href="https://drafts.csswg.org/css2/visudet.html#propdef-width">width</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-dom-ls">[dom-ls]</a> defines the following terms:
    <ul>
     <li><a href="https://dom.spec.whatwg.org/#document">Document</a>
     <li><a href="https://dom.spec.whatwg.org/#documentfragment">DocumentFragment</a>
     <li><a href="https://dom.spec.whatwg.org/#processinginstruction">ProcessingInstruction</a>
     <li><a href="https://dom.spec.whatwg.org/#text">Text</a>
     <li><a href="https://dom.spec.whatwg.org/#case-sensitive">case-sensitive</a>
     <li><a href="https://dom.spec.whatwg.org/#concept-class">class</a>
     <li><a href="https://dom.spec.whatwg.org/#html-namespace">html namespace</a>
     <li><a href="https://dom.spec.whatwg.org/#dom-node-localname">localName</a>
     <li><a href="https://dom.spec.whatwg.org/#dom-node-namespaceuri">namespaceURI</a>
     <li><a href="https://dom.spec.whatwg.org/#dom-node-ownerdocument">ownerDocument</a>
     <li><a href="https://dom.spec.whatwg.org/#dom-processinginstruction-target">target</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-html">[HTML]</a> defines the following terms:
    <ul>
     <li><a href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a>
     <li><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackcue">TextTrackCue</a>
     <li><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#dom-texttrack-addcue">addCue(cue)</a>
     <li><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#audio">audio</a>
     <li><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#collect-a-sequence-of-characters">collect a sequence of characters</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#entry-settings-object">entry settings object</a>
     <li><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#html-elements">html elements</a>
     <li><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#mime-type">mime type</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-document">responsible document</a>
     <li><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#video">video</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-selectors-4">[selectors-4]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/selectors-4/#future-pseudo">:future</a>
     <li><a href="https://drafts.csswg.org/selectors-4/#past-pseudo">:past</a>
    </ul>
  </ul>
  <h2 class="no-num heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-bcp47"><a class="self-link" href="#biblio-bcp47"></a>[BCP47]
   <dd>A. Phillips; M. Davis. <a href="https://tools.ietf.org/html/bcp47">Tags for Identifying Languages</a>. September 2009. IETF Best Current Practice. URL: <a href="https://tools.ietf.org/html/bcp47">https://tools.ietf.org/html/bcp47</a>
   <dt id="biblio-bidi"><a class="self-link" href="#biblio-bidi"></a>[BIDI]
   <dd>Mark Davis; Aharon Lanin; Andrew Glass. <a href="http://www.unicode.org/reports/tr9/">Unicode Bidirectional Algorithm</a>. 5 June 2014. Unicode Standard Annex #9. URL: <a href="http://www.unicode.org/reports/tr9/">http://www.unicode.org/reports/tr9/</a>
   <dt id="biblio-css21"><a class="self-link" href="#biblio-css21"></a>[CSS21]
   <dd>Bert Bos; et al. <a href="http://www.w3.org/TR/CSS2">Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</a>. 7 June 2011. REC. URL: <a href="http://www.w3.org/TR/CSS2">http://www.w3.org/TR/CSS2</a>
   <dt id="biblio-html"><a class="self-link" href="#biblio-html"></a>[HTML]
   <dd>Ian Hickson. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-webidl"><a class="self-link" href="#biblio-webidl"></a>[WebIDL]
   <dd>Cameron McCormack; Boris Zbarsky. <a href="https://heycam.github.io/webidl/">WebIDL Level 1</a>. 4 August 2015. WD. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
   <dt id="biblio-css-align-3"><a class="self-link" href="#biblio-css-align-3"></a>[CSS-ALIGN-3]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="http://dev.w3.org/csswg/css-align/">CSS Box Alignment Module Level 3</a>. 18 December 2014. WD. URL: <a href="http://dev.w3.org/csswg/css-align/">http://dev.w3.org/csswg/css-align/</a>
   <dt id="biblio-css-backgrounds-3"><a class="self-link" href="#biblio-css-backgrounds-3"></a>[CSS-BACKGROUNDS-3]
   <dd>CSS Backgrounds and Borders Module Level 3 URL: <a href="https://drafts.csswg.org/css-backgrounds-3/">https://drafts.csswg.org/css-backgrounds-3/</a>
   <dt id="biblio-css-color-3"><a class="self-link" href="#biblio-css-color-3"></a>[CSS-COLOR-3]
   <dd>CSS Color Module Level 3 URL: <a href="https://drafts.csswg.org/css-color-3/">https://drafts.csswg.org/css-color-3/</a>
   <dt id="biblio-css-color-4"><a class="self-link" href="#biblio-css-color-4"></a>[CSS-COLOR-4]
   <dd>CSS Color Module Level 4 URL: <a href="https://drafts.csswg.org/css-color-4/">https://drafts.csswg.org/css-color-4/</a>
   <dt id="biblio-css-display-3"><a class="self-link" href="#biblio-css-display-3"></a>[CSS-DISPLAY-3]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="http://dev.w3.org/csswg/css-display/">CSS Display Module Level 3</a>. 21 July 2015. WD. URL: <a href="http://dev.w3.org/csswg/css-display/">http://dev.w3.org/csswg/css-display/</a>
   <dt id="biblio-css-flexbox-1"><a class="self-link" href="#biblio-css-flexbox-1"></a>[CSS-FLEXBOX-1]
   <dd>Tab Atkins Jr.; Elika Etemad; Rossen Atanassov. <a href="http://dev.w3.org/csswg/css-flexbox/">CSS Flexible Box Layout Module Level 1</a>. 14 May 2015. LCWD. URL: <a href="http://dev.w3.org/csswg/css-flexbox/">http://dev.w3.org/csswg/css-flexbox/</a>
   <dt id="biblio-css-fonts-3"><a class="self-link" href="#biblio-css-fonts-3"></a>[CSS-FONTS-3]
   <dd>John Daggett. <a href="http://dev.w3.org/csswg/css-fonts/">CSS Fonts Module Level 3</a>. 3 October 2013. CR. URL: <a href="http://dev.w3.org/csswg/css-fonts/">http://dev.w3.org/csswg/css-fonts/</a>
   <dt id="biblio-css-overflow-3"><a class="self-link" href="#biblio-css-overflow-3"></a>[CSS-OVERFLOW-3]
   <dd>David Baron. <a href="http://www.w3.org/TR/css-overflow-3/">CSS Overflow Module Level 3</a>. 18 April 2013. WD. URL: <a href="http://www.w3.org/TR/css-overflow-3/">http://www.w3.org/TR/css-overflow-3/</a>
   <dt id="biblio-css-position-3"><a class="self-link" href="#biblio-css-position-3"></a>[CSS-POSITION-3]
   <dd>CSS Positioned Layout Module Level 3 URL: <a href="https://drafts.csswg.org/css-position-3/">https://drafts.csswg.org/css-position-3/</a>
   <dt id="biblio-css-text-3"><a class="self-link" href="#biblio-css-text-3"></a>[CSS-TEXT-3]
   <dd>Elika Etemad; Koji Ishii. <a href="http://dev.w3.org/csswg/css-text-3/">CSS Text Module Level 3</a>. 10 October 2013. LCWD. URL: <a href="http://dev.w3.org/csswg/css-text-3/">http://dev.w3.org/csswg/css-text-3/</a>
   <dt id="biblio-css-text-decor-3"><a class="self-link" href="#biblio-css-text-decor-3"></a>[CSS-TEXT-DECOR-3]
   <dd>Elika Etemad; Koji Ishii. <a href="http://dev.w3.org/csswg/css-text-decor-3/">CSS Text Decoration Module Level 3</a>. 1 August 2013. CR. URL: <a href="http://dev.w3.org/csswg/css-text-decor-3/">http://dev.w3.org/csswg/css-text-decor-3/</a>
   <dt id="biblio-css-transitions-1"><a class="self-link" href="#biblio-css-transitions-1"></a>[CSS-TRANSITIONS-1]
   <dd>CSS Transitions Module Level 1 URL: <a href="https://drafts.csswg.org/css-transitions-1/">https://drafts.csswg.org/css-transitions-1/</a>
   <dt id="biblio-css-ui-3"><a class="self-link" href="#biblio-css-ui-3"></a>[CSS-UI-3]
   <dd>Tantek Çelik; Florian Rivoal. <a href="http://dev.w3.org/csswg/css-ui/">CSS Basic User Interface Module Level 3 (CSS3 UI)</a>. 7 July 2015. CR. URL: <a href="http://dev.w3.org/csswg/css-ui/">http://dev.w3.org/csswg/css-ui/</a>
   <dt id="biblio-css-values"><a class="self-link" href="#biblio-css-values"></a>[CSS-VALUES]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="http://dev.w3.org/csswg/css-values/">CSS Values and Units Module Level 3</a>. 11 June 2015. CR. URL: <a href="http://dev.w3.org/csswg/css-values/">http://dev.w3.org/csswg/css-values/</a>
   <dt id="biblio-css-writing-modes-3"><a class="self-link" href="#biblio-css-writing-modes-3"></a>[CSS-WRITING-MODES-3]
   <dd>Elika Etemad; Koji Ishii. <a href="http://dev.w3.org/csswg/css-writing-modes-3/">CSS Writing Modes Level 3</a>. 20 March 2014. CR. URL: <a href="http://dev.w3.org/csswg/css-writing-modes-3/">http://dev.w3.org/csswg/css-writing-modes-3/</a>
   <dt id="biblio-css3-color"><a class="self-link" href="#biblio-css3-color"></a>[CSS3-COLOR]
   <dd>Tantek Çelik; Chris Lilley; David Baron. <a href="http://www.w3.org/TR/css3-color">CSS Color Module Level 3</a>. 7 June 2011. REC. URL: <a href="http://www.w3.org/TR/css3-color">http://www.w3.org/TR/css3-color</a>
   <dt id="biblio-css3-ruby"><a class="self-link" href="#biblio-css3-ruby"></a>[CSS3-RUBY]
   <dd>Elika Etemad; Koji Ishii. <a href="http://dev.w3.org/csswg/css-ruby-1/">CSS Ruby Layout Module Level 1</a>. 5 August 2014. WD. URL: <a href="http://dev.w3.org/csswg/css-ruby-1/">http://dev.w3.org/csswg/css-ruby-1/</a>
   <dt id="biblio-dom"><a class="self-link" href="#biblio-dom"></a>[DOM]
   <dd>Anne van Kesteren; et al. <a href="https://w3c.github.io/dom/">W3C DOM4</a>. 18 June 2015. LCWD. URL: <a href="https://w3c.github.io/dom/">https://w3c.github.io/dom/</a>
   <dt id="biblio-dom-ls"><a class="self-link" href="#biblio-dom-ls"></a>[DOM-LS]
   <dd>Document Object Model URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-encoding"><a class="self-link" href="#biblio-encoding"></a>[ENCODING]
   <dd>Anne van Kesteren; Joshua Bell; Addison Phillips. <a href="https://encoding.spec.whatwg.org/">Encoding</a>. 16 September 2014. CR. URL: <a href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a>
   <dt id="biblio-rfc2119"><a class="self-link" href="#biblio-rfc2119"></a>[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-rfc3629"><a class="self-link" href="#biblio-rfc3629"></a>[RFC3629]
   <dd>F. Yergeau. <a href="https://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>. November 2003. Internet Standard. URL: <a href="https://tools.ietf.org/html/rfc3629">https://tools.ietf.org/html/rfc3629</a>
   <dt id="biblio-selectors-4"><a class="self-link" href="#biblio-selectors-4"></a>[SELECTORS-4]
   <dd>Selectors Level 4 URL: <a href="https://drafts.csswg.org/selectors-4/">https://drafts.csswg.org/selectors-4/</a>
   <dt id="biblio-selectors4"><a class="self-link" href="#biblio-selectors4"></a>[SELECTORS4]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="http://www.w3.org/TR/selectors4/">Selectors Level 4</a>. 2 May 2013. WD. URL: <a href="http://www.w3.org/TR/selectors4/">http://www.w3.org/TR/selectors4/</a>
  </dl>
  <h2 class="no-num heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl">enum <a href="#enumdef-autokeyword">AutoKeyword</a> { "auto" };enum <a href="#enumdef-directionsetting">DirectionSetting</a> { "" /* horizontal */, "rl", "lr" };
enum <a href="#enumdef-linealignsetting">LineAlignSetting</a> { "start", "middle", "end" };
enum <a href="#enumdef-positionalignsetting">PositionAlignSetting</a> { "start", "middle", "end", "auto" };
enum <a href="#enumdef-alignsetting">AlignSetting</a> { "start", "middle", "end", "left", "right" };
[<a href="#dom-vttcue-vttcue">Constructor</a>(double <a href="#dom-vttcue-vttcue-starttime-endtime-text-starttime">startTime</a>, double <a href="#dom-vttcue-vttcue-starttime-endtime-text-endtime">endTime</a>, DOMString <a href="#dom-vttcue-vttcue-starttime-endtime-text-text">text</a>)]
interface <a href="#vttcue">VTTCue</a> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackcue">TextTrackCue</a> {
  attribute <a data-link-type="idl-name" href="#vttregion">VTTRegion</a>? <a class="idl-code" data-link-type="attribute" data-type="VTTRegion? " href="#dom-vttcue-region">region</a>;
  attribute <a data-link-type="idl-name" href="#enumdef-directionsetting">DirectionSetting</a> <a class="idl-code" data-link-type="attribute" data-type="DirectionSetting " href="#dom-vttcue-vertical">vertical</a>;
  attribute boolean <a class="idl-code" data-link-type="attribute" data-type="boolean " href="#dom-vttcue-snaptolines">snapToLines</a>;
  attribute (double or <a data-link-type="idl-name" href="#enumdef-autokeyword">AutoKeyword</a>) <a class="idl-code" data-link-type="attribute" data-type="(double or AutoKeyword) " href="#dom-vttcue-line">line</a>;
  attribute <a data-link-type="idl-name" href="#enumdef-linealignsetting">LineAlignSetting</a> <a class="idl-code" data-link-type="attribute" data-type="LineAlignSetting " href="#dom-vttcue-linealign">lineAlign</a>;
  attribute (double or <a data-link-type="idl-name" href="#enumdef-autokeyword">AutoKeyword</a>) <a data-type="(double or AutoKeyword) " href="#dom-vttcue-position">position</a>;
  attribute <a data-link-type="idl-name" href="#enumdef-positionalignsetting">PositionAlignSetting</a> <a class="idl-code" data-link-type="attribute" data-type="PositionAlignSetting " href="#dom-vttcue-positionalign">positionAlign</a>;
  attribute double <a class="idl-code" data-link-type="attribute" data-type="double " href="#dom-vttcue-size">size</a>;
  attribute <a data-link-type="idl-name" href="#enumdef-alignsetting">AlignSetting</a> <a class="idl-code" data-link-type="attribute" data-type="AlignSetting " href="#dom-vttcue-align">align</a>;
  attribute DOMString <a class="idl-code" data-link-type="attribute" data-type="DOMString " href="#dom-vttcue-text">text</a>;
  <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#documentfragment">DocumentFragment</a> <a class="idl-code" data-link-type="method" href="#dom-vttcue-getcueashtml">getCueAsHTML</a>();
};
enum <a href="#enumdef-scrollsetting">ScrollSetting</a> { "" /* none */, "up" };
[<a class="idl-code" data-link-type="constructor" href="#dom-vttregion-vttregion">Constructor</a>]
interface <a href="#vttregion">VTTRegion</a> {
  attribute double <a class="idl-code" data-link-type="attribute" data-type="double " href="#dom-vttregion-width">width</a>;
  attribute long <a class="idl-code" data-link-type="attribute" data-type="long " href="#dom-vttregion-lines">lines</a>;
  attribute double <a class="idl-code" data-link-type="attribute" data-type="double " href="#dom-vttregion-regionanchorx">regionAnchorX</a>;
  attribute double <a class="idl-code" data-link-type="attribute" data-type="double " href="#dom-vttregion-regionanchory">regionAnchorY</a>;
  attribute double <a class="idl-code" data-link-type="attribute" data-type="double " href="#dom-vttregion-viewportanchorx">viewportAnchorX</a>;
  attribute double <a class="idl-code" data-link-type="attribute" data-type="double " href="#dom-vttregion-viewportanchory">viewportAnchorY</a>;
  attribute <a data-link-type="idl-name" href="#enumdef-scrollsetting">ScrollSetting</a> <a class="idl-code" data-link-type="attribute" data-type="ScrollSetting " href="#dom-vttregion-scroll">scroll</a>;
};
</pre>
 </body>
</html>